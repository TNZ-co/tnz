<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Planner Pekerjaan Bulanan - Login</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        body { 
            font-family: 'Inter', sans-serif; 
            backdrop-filter: blur(10px);
        }
        .glass-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        .glass-card-light {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.25);
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
        }
        .glass-button {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            transition: all 0.3s ease;
        }
        .glass-button:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }
        .priority-high { border-left: 4px solid rgba(239, 68, 68, 0.8); }
        .priority-medium { border-left: 4px solid rgba(245, 158, 11, 0.8); }
        .priority-low { border-left: 4px solid rgba(16, 185, 129, 0.8); }
        .gradient-text {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .stat-card-1 { background: linear-gradient(135deg, rgba(59, 130, 246, 0.15) 0%, rgba(147, 51, 234, 0.15) 100%); }
        .stat-card-2 { background: linear-gradient(135deg, rgba(239, 68, 68, 0.15) 0%, rgba(245, 101, 101, 0.15) 100%); }
        .stat-card-3 { background: linear-gradient(135deg, rgba(16, 185, 129, 0.15) 0%, rgba(52, 211, 153, 0.15) 100%); }
        .stat-card-4 { background: linear-gradient(135deg, rgba(147, 51, 234, 0.15) 0%, rgba(168, 85, 247, 0.15) 100%); }
        
        .header-custom-bg {
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            position: relative;
        }
        
        .header-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border-radius: 1rem;
            pointer-events: none;
        }
        
        /* Print Styles */
        @media print {
            body * {
                visibility: hidden;
            }
            
            #printContent, #printContent * {
                visibility: visible;
            }
            
            #printContent {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
                background: white !important;
                color: black !important;
                font-size: 12px;
                line-height: 1.4;
            }
            
            /* Invoice Print Formats */
            .invoice-a4 { width: 210mm; height: 297mm; }
            .invoice-a5 { width: 148mm; height: 210mm; }
            .invoice-a6 { width: 105mm; height: 148mm; }
            .invoice-letter { width: 216mm; height: 279mm; }
            .invoice-legal { width: 216mm; height: 356mm; }
            .invoice-receipt { width: 80mm; min-height: 200mm; }
            
            .invoice-container {
                margin: 0;
                padding: 20mm;
                box-sizing: border-box;
            }
            
            .invoice-receipt .invoice-container {
                padding: 5mm;
                font-size: 10px;
            }
            
            .print-header {
                text-align: center;
                margin-bottom: 20px;
                border-bottom: 2px solid #333;
                padding-bottom: 10px;
            }
            
            .print-stats {
                display: grid;
                grid-template-columns: repeat(4, 1fr);
                gap: 15px;
                margin-bottom: 20px;
                padding: 15px;
                border: 1px solid #ddd;
                background: #f9f9f9;
            }
            
            .print-stat-item {
                text-align: center;
                padding: 10px;
                border: 1px solid #ccc;
                background: white;
            }
            
            .print-project {
                margin-bottom: 15px;
                padding: 15px;
                border: 1px solid #ddd;
                page-break-inside: avoid;
            }
            
            .print-project-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 10px;
                font-weight: bold;
            }
            
            .print-project-details {
                margin-bottom: 8px;
                font-size: 11px;
            }
            
            .print-footer {
                margin-top: 30px;
                text-align: center;
                font-size: 10px;
                color: #666;
                border-top: 1px solid #ddd;
                padding-top: 10px;
            }
            
            .no-print {
                display: none !important;
            }
        }
        
        /* Login animations */
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-out;
        }
        
        .shake {
            animation: shake 0.5s ease-in-out;
        }
        
        .login-container {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .login-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }
    </style>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#4f46e5">
<script>
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('service-worker.js');
  }
</script>
</head>

<body class="bg-gradient-to-br from-transparent via-blue-50/30 to-purple-100/40 min-h-screen relative">
    <div class="absolute inset-0 bg-gradient-to-br from-blue-400/20 via-purple-500/10 to-pink-400/20"></div>
    <div class="absolute inset-0 bg-gradient-to-tl from-cyan-300/10 via-transparent to-indigo-400/15"></div>

    <!-- Login Screen -->
    <div id="loginScreen" class="login-container relative z-10">
        <div class="login-card rounded-2xl p-8 w-full max-w-md mx-4 fade-in">
            <!-- Language Selector -->
            <div class="flex justify-end mb-4">
                <div class="relative">
                    <select id="loginLanguageSelect" onchange="changeLanguageLogin(this.value)" 
                            class="px-3 py-2 bg-white/40 backdrop-blur-sm border border-white/50 rounded-lg focus:ring-2 focus:ring-blue-400 text-gray-800 text-sm">
                        <option value="id">üáÆüá© ID</option>
                        <option value="en">üá∫üá∏ EN</option>
                        <option value="ja">üáØüáµ JP</option>
                        <option value="ko">üá∞üá∑ KR</option>
                        <option value="es">üá™üá∏ ES</option>
                    </select>
                </div>
            </div>
            
            <div class="text-center mb-8">
                <div class="text-6xl mb-4">üîê</div>
                <h1 id="loginWelcomeTitle" class="text-3xl font-bold gradient-text mb-2" data-translate="welcomeTitle">Selamat Datang</h1>
                <p id="loginWelcomeSubtitle" class="text-gray-600" data-translate="welcomeSubtitle">Masuk ke Planner Pekerjaan Bulanan</p>
            </div>
            
            <!-- Login/Register Toggle -->
            <div class="flex bg-white/20 backdrop-blur-sm rounded-xl p-1 mb-6">
                <button id="loginTab" onclick="showLoginForm()" 
                        class="flex-1 py-2 px-4 rounded-lg text-sm font-medium transition-colors bg-white/60 text-blue-700 shadow-sm"
                        data-translate="loginTab">
                    üîë Masuk
                </button>
                <button id="registerTab" onclick="showRegisterForm()" 
                        class="flex-1 py-2 px-4 rounded-lg text-sm font-medium transition-colors text-gray-600 hover:text-blue-700"
                        data-translate="registerTab">
                    üìù Daftar
                </button>
            </div>
            
            <!-- Login Form -->
            <div id="loginFormContainer">
                <form id="loginForm" class="space-y-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="usernameLabel">üë§ Username</label>
                        <input type="text" id="loginUsername" required 
                               class="w-full px-4 py-3 bg-white/60 backdrop-blur-sm border border-white/50 rounded-xl focus:ring-2 focus:ring-blue-400 focus:border-transparent text-gray-800"
                               data-translate-placeholder="usernamePlaceholder"
                               placeholder="Masukkan username">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="passwordLabel">üîë Password</label>
                        <div class="relative">
                            <input type="password" id="loginPassword" required 
                                   class="w-full px-4 py-3 pr-12 bg-white/60 backdrop-blur-sm border border-white/50 rounded-xl focus:ring-2 focus:ring-blue-400 focus:border-transparent text-gray-800"
                                   data-translate-placeholder="passwordPlaceholder"
                                   placeholder="Masukkan password">
                            <button type="button" onclick="toggleLoginPasswordVisibility()" 
                                    class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700">
                                <span id="loginPasswordToggleIcon">üëÅÔ∏è</span>
                            </button>
                        </div>
                    </div>
                    
                    <div class="flex items-center">
                        <input type="checkbox" id="rememberMe" class="mr-3 rounded">
                        <label for="rememberMe" class="text-sm text-gray-700" data-translate="rememberMe">üíæ Ingat saya</label>
                    </div>
                    
                    <div id="loginError" class="hidden bg-red-50 border border-red-200 rounded-xl p-3">
                        <div class="flex items-center gap-2">
                            <span class="text-red-600">‚ùå</span>
                            <span class="text-red-800 text-sm font-medium" data-translate="loginError">Username atau password salah!</span>
                        </div>
                    </div>
                    
                    <button type="submit" id="loginButton" 
                            class="w-full glass-button text-blue-700 px-6 py-3 rounded-xl font-medium hover:bg-blue-500/20 transition-colors">
                        <span id="loginButtonText" data-translate="loginButton">üöÄ Masuk ke Dashboard</span>
                        <span id="loginButtonLoading" class="hidden" data-translate="loginLoading">‚è≥ Memproses...</span>
                    </button>
                </form>
            </div>
            
            <!-- Register Form -->
            <div id="registerFormContainer" class="hidden">
                <div class="bg-green-50 border border-green-200 rounded-xl p-4 mb-6">
                    <div class="flex items-center gap-2 mb-2">
                        <span class="text-green-600">‚ú®</span>
                        <span class="text-green-800 font-medium text-sm" data-translate="createNewAccount">Buat Akun Baru:</span>
                    </div>
                    <div class="text-green-700 text-sm" data-translate="registerDescription">
                        Daftarkan akun Anda untuk menggunakan aplikasi planner pekerjaan
                    </div>
                </div>
                
                <form id="registerForm" class="space-y-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">üë§ Username</label>
                        <input type="text" id="registerUsername" required 
                               class="w-full px-4 py-3 bg-white/60 backdrop-blur-sm border border-white/50 rounded-xl focus:ring-2 focus:ring-green-400 focus:border-transparent text-gray-800"
                               placeholder="Pilih username (min. 3 karakter)">
                        <div class="text-xs text-gray-500 mt-1">Username harus unik dan minimal 3 karakter</div>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">üìß Email (Opsional)</label>
                        <input type="email" id="registerEmail" 
                               class="w-full px-4 py-3 bg-white/60 backdrop-blur-sm border border-white/50 rounded-xl focus:ring-2 focus:ring-green-400 focus:border-transparent text-gray-800"
                               placeholder="email@example.com">
                        <div class="text-xs text-gray-500 mt-1">Email untuk identifikasi akun (opsional)</div>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">üîë Password</label>
                        <div class="relative">
                            <input type="password" id="registerPassword" required 
                                   class="w-full px-4 py-3 pr-12 bg-white/60 backdrop-blur-sm border border-white/50 rounded-xl focus:ring-2 focus:ring-green-400 focus:border-transparent text-gray-800"
                                   placeholder="Buat password (min. 6 karakter)">
                            <button type="button" onclick="toggleRegisterPasswordVisibility()" 
                                    class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700">
                                <span id="registerPasswordToggleIcon">üëÅÔ∏è</span>
                            </button>
                        </div>
                        <div class="text-xs text-gray-500 mt-1">Password minimal 6 karakter</div>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">üîê Konfirmasi Password</label>
                        <div class="relative">
                            <input type="password" id="registerConfirmPassword" required 
                                   class="w-full px-4 py-3 pr-12 bg-white/60 backdrop-blur-sm border border-white/50 rounded-xl focus:ring-2 focus:ring-green-400 focus:border-transparent text-gray-800"
                                   placeholder="Ulangi password">
                            <button type="button" onclick="toggleRegisterConfirmPasswordVisibility()" 
                                    class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700">
                                <span id="registerConfirmPasswordToggleIcon">üëÅÔ∏è</span>
                            </button>
                        </div>
                    </div>
                    
                    <div class="flex items-start">
                        <input type="checkbox" id="agreeTerms" required class="mr-3 mt-1 rounded">
                        <label for="agreeTerms" class="text-sm text-gray-700">
                            üìã Saya setuju bahwa data akan disimpan secara lokal di browser ini dan bertanggung jawab atas keamanan akun saya
                        </label>
                    </div>
                    
                    <div id="registerError" class="hidden bg-red-50 border border-red-200 rounded-xl p-3">
                        <div class="flex items-center gap-2">
                            <span class="text-red-600">‚ùå</span>
                            <span class="text-red-800 text-sm font-medium" id="registerErrorMessage">Terjadi kesalahan!</span>
                        </div>
                    </div>
                    
                    <div id="registerSuccess" class="hidden bg-green-50 border border-green-200 rounded-xl p-3">
                        <div class="flex items-center gap-2">
                            <span class="text-green-600">‚úÖ</span>
                            <span class="text-green-800 text-sm font-medium">Akun berhasil dibuat! Silakan login.</span>
                        </div>
                    </div>
                    
                    <button type="submit" id="registerButton" 
                            class="w-full glass-button text-green-700 px-6 py-3 rounded-xl font-medium hover:bg-green-500/20 transition-colors">
                        <span id="registerButtonText">‚ú® Buat Akun</span>
                        <span id="registerButtonLoading" class="hidden">‚è≥ Membuat akun...</span>
                    </button>
                </form>
            </div>
            
            <div class="mt-6 text-center">
                <p class="text-xs text-gray-500" data-translate="dataSecurityNote">
                    üîí Data Anda aman dan tersimpan lokal di browser
                </p>
            </div>
        </div>
    </div>

    <!-- Main Application (Hidden by default) -->
    <div id="mainApp" class="hidden">
        <div class="container mx-auto px-4 py-8 max-w-6xl relative z-10">
            <!-- Header 1: Title, Date, User Info & Logout -->
            <div id="headerContainer1" class="glass-card rounded-2xl p-6 mb-6">
                <div id="headerOverlay" class="header-overlay"></div>
                <div class="flex flex-col md:flex-row justify-between items-center relative z-10">
                    <!-- Title Section -->
                    <div class="flex-1 text-center md:text-left mb-4 md:mb-0">
                        <div class="flex items-center justify-center md:justify-start gap-3 mb-2">
                            <h1 id="mainTitle" class="text-3xl font-bold gradient-text cursor-pointer hover:bg-white/10 px-2 py-1 rounded-lg transition-colors" onclick="editTitle()">üìÖ Planner Pekerjaan Bulanan</h1>
                            <button onclick="editTitle()" class="text-gray-400 hover:text-gray-600 text-sm">‚úèÔ∏è</button>
                        </div>
                        <div class="flex items-center justify-center md:justify-start gap-3">
                            <p id="mainSubtitle" class="text-gray-700 px-2 py-1">
                                <span id="welcomeGreeting" data-translate="welcomeGreeting">Hai</span> 
                                <span id="usernameInSubtitle" class="font-semibold text-blue-700">-</span>, 
                                <span id="welcomeMessage" data-translate="welcomeMessage">selamat datang kembali!</span>
                            </p>
                        </div>
                    </div>
                    
                    <!-- Date & Time Section -->
                    <div class="flex-1 flex justify-center mb-4 md:mb-0">
                        <div class="glass-card-light px-6 py-4 rounded-xl">
                            <div class="text-center">
                                <div id="currentTime" class="text-2xl font-bold text-blue-700 mb-1">00:00:00</div>
                                <div id="currentDate" class="text-sm text-gray-600">Loading...</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- User Info & Logout Section -->
                    <div class="flex-1 flex justify-center md:justify-end">
                        <div class="flex items-center gap-3">
                            <div class="glass-card-light px-4 py-3 rounded-xl">
                                <div class="text-center">
                                    <div class="text-sm font-medium text-gray-700">üë§ <span id="currentUserDisplay">-</span></div>
                                    <div class="text-xs text-gray-500" id="sessionTypeDisplay">-</div>
                                </div>
                            </div>
                            <button onclick="logout()" class="glass-button text-red-700 px-6 py-3 rounded-xl font-medium hover:bg-red-500/20 transition-colors">
                                üö™ Keluar
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Header 2: Action Buttons -->
            <div id="headerContainer2" class="glass-card rounded-2xl p-6 mb-6">
                <div class="flex flex-wrap justify-center gap-3">
                    <button onclick="openAccountModal()" class="glass-button text-indigo-700 px-6 py-3 rounded-xl font-medium hover:bg-indigo-500/20 transition-colors" data-translate="accountManagement">
                        üë• Kelola Akun
                    </button>
                    <button onclick="openSettingsModal()" class="glass-button text-purple-700 px-6 py-3 rounded-xl font-medium hover:bg-purple-500/20 transition-colors" data-translate="settings">
                        ‚öôÔ∏è Pengaturan
                    </button>
                    <button id="superAdminBtn" onclick="openSuperAdminDashboard()" class="glass-button text-red-700 px-6 py-3 rounded-xl font-medium hover:bg-red-500/20 transition-colors hidden">
                        üîê Super Admin Dashboard
                    </button>
                    <button onclick="exportToExcel()" class="glass-button text-green-700 px-6 py-3 rounded-xl font-medium hover:bg-green-500/20 transition-colors" data-translate="exportExcel">
                        üìä Ekspor ke Excel
                    </button>
                    <button onclick="openPrintModal()" class="glass-button text-orange-700 px-6 py-3 rounded-xl font-medium hover:bg-orange-500/20 transition-colors" data-translate="printReport">
                        üñ®Ô∏è Cetak Laporan
                    </button>
                    <button onclick="openAddModal()" class="glass-button text-blue-700 px-6 py-3 rounded-xl font-medium hover:bg-blue-500/20 transition-colors" data-translate="addProject">
                        ‚ûï Tambah Proyek
                    </button>
                </div>
            </div>

            <!-- Header 3: Statistics Cards -->
            <div id="headerContainer3" class="glass-card rounded-2xl p-6 mb-8">
                <div class="mb-4">
                    <h2 class="text-xl font-semibold gradient-text text-center" data-translate="dashboardStats">üìä Statistik Dashboard</h2>
                </div>
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6" id="statsContainer">
                    <div class="glass-card-light stat-card-1 rounded-xl p-6 backdrop-blur-md border border-white/30">
                        <div class="flex items-center justify-between">
                            <div class="flex-1">
                                <div class="flex items-center gap-2">
                                    <p id="stat1Label" class="text-gray-700 text-sm cursor-pointer hover:bg-white/10 px-2 py-1 rounded transition-colors" onclick="editStatLabel(1)">Total Proyek</p>
                                    <button onclick="editStatLabel(1)" class="text-gray-400 hover:text-gray-600 text-xs">‚úèÔ∏è</button>
                                </div>
                                <p class="text-2xl font-bold text-blue-700" id="totalProjects">0</p>
                            </div>
                            <div class="bg-white/20 backdrop-blur-sm p-3 rounded-full cursor-pointer border border-white/30" onclick="editStatIcon(1)">
                                <span class="text-2xl" id="stat1Icon">üìã</span>
                            </div>
                        </div>
                    </div>
                    <div class="glass-card-light stat-card-2 rounded-xl p-6 backdrop-blur-md border border-white/30">
                        <div class="flex items-center justify-between">
                            <div class="flex-1">
                                <div class="flex items-center gap-2">
                                    <p id="stat2Label" class="text-gray-700 text-sm cursor-pointer hover:bg-white/10 px-2 py-1 rounded transition-colors" onclick="editStatLabel(2)">Prioritas Tinggi</p>
                                    <button onclick="editStatLabel(2)" class="text-gray-400 hover:text-gray-600 text-xs">‚úèÔ∏è</button>
                                </div>
                                <p class="text-2xl font-bold text-red-700" id="highPriority">0</p>
                            </div>
                            <div class="bg-white/20 backdrop-blur-sm p-3 rounded-full cursor-pointer border border-white/30" onclick="editStatIcon(2)">
                                <span class="text-2xl" id="stat2Icon">üî•</span>
                            </div>
                        </div>
                    </div>
                    <div class="glass-card-light stat-card-3 rounded-xl p-6 backdrop-blur-md border border-white/30">
                        <div class="flex items-center justify-between">
                            <div class="flex-1">
                                <div class="flex items-center gap-2">
                                    <p id="stat3Label" class="text-gray-700 text-sm cursor-pointer hover:bg-white/10 px-2 py-1 rounded transition-colors" onclick="editStatLabel(3)">Selesai</p>
                                    <button onclick="editStatLabel(3)" class="text-gray-400 hover:text-gray-600 text-xs">‚úèÔ∏è</button>
                                </div>
                                <p class="text-2xl font-bold text-green-700" id="completedProjects">0</p>
                            </div>
                            <div class="bg-white/20 backdrop-blur-sm p-3 rounded-full cursor-pointer border border-white/30" onclick="editStatIcon(3)">
                                <span class="text-2xl" id="stat3Icon">‚úÖ</span>
                            </div>
                        </div>
                    </div>
                    <div class="glass-card-light stat-card-4 rounded-xl p-6 backdrop-blur-md border border-white/30">
                        <div class="flex items-center justify-between">
                            <div class="flex-1">
                                <div class="flex items-center gap-2">
                                    <p id="stat4Label" class="text-gray-700 text-sm cursor-pointer hover:bg-white/10 px-2 py-1 rounded transition-colors" onclick="editStatLabel(4)">Total Nilai</p>
                                    <button onclick="editStatLabel(4)" class="text-gray-400 hover:text-gray-600 text-xs">‚úèÔ∏è</button>
                                </div>
                                <p class="text-2xl font-bold text-purple-700" id="totalValue">Rp 0</p>
                            </div>
                            <div class="bg-white/20 backdrop-blur-sm p-3 rounded-full cursor-pointer border border-white/30" onclick="editStatIcon(4)">
                                <span class="text-2xl" id="stat4Icon">üí∞</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Filter and Search -->
            <div class="glass-card rounded-xl p-6 mb-8">
                <div class="flex flex-col md:flex-row gap-4">
                    <div class="flex-1">
                        <input type="text" id="searchInput" data-translate-placeholder="searchPlaceholder" placeholder="üîç Cari proyek..." 
                               class="w-full px-4 py-3 bg-white/20 backdrop-blur-sm border border-white/30 rounded-xl focus:ring-2 focus:ring-blue-400 focus:border-transparent text-gray-700 placeholder-gray-600">
                    </div>
                    <select id="priorityFilter" class="px-4 py-3 bg-white/20 backdrop-blur-sm border border-white/30 rounded-xl focus:ring-2 focus:ring-blue-400 text-gray-700">
                        <option value="" data-translate="allPriorities">Semua Prioritas</option>
                        <option value="high" data-translate="high">Tinggi</option>
                        <option value="medium" data-translate="medium">Sedang</option>
                        <option value="low" data-translate="low">Rendah</option>
                    </select>
                    <select id="statusFilter" class="px-4 py-3 bg-white/20 backdrop-blur-sm border border-white/30 rounded-xl focus:ring-2 focus:ring-blue-400 text-gray-700">
                        <option value="" data-translate="allStatuses">Semua Status</option>
                        <option value="pending" data-translate="pending">Pending</option>
                        <option value="progress" data-translate="progress">Dalam Proses</option>
                        <option value="completed" data-translate="completed">Selesai</option>
                    </select>
                </div>
            </div>

            <!-- Projects List -->
            <div class="glass-card rounded-xl overflow-hidden">
                <div class="p-6 border-b border-white/20">
                    <h2 class="text-xl font-semibold gradient-text" data-translate="projectList">Daftar Proyek</h2>
                </div>
                <div id="projectsList" class="divide-y divide-white/20">
                    <div class="p-8 text-center text-gray-600">
                        <span class="text-4xl mb-4 block">üìù</span>
                        <p data-translate="noProjects">Belum ada proyek. Klik "Tambah Proyek" untuk memulai!</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Account Management Modal -->
    <div id="accountModal" class="fixed inset-0 bg-black/30 backdrop-blur-sm hidden items-center justify-center z-50 p-4">
        <div class="bg-white/90 backdrop-blur-xl border border-white/40 shadow-2xl rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
            <div class="p-6 border-b border-white/20">
                <h3 class="text-xl font-semibold gradient-text" data-translate="accountManagement">üë• Manajemen Akun</h3>
            </div>
            <div class="p-6 space-y-6">
                <!-- Current User Info -->
                <div>
                    <h4 class="text-lg font-medium text-gray-700 mb-4" data-translate="accountInfo">üìä Informasi Akun Aktif</h4>
                    <div class="bg-blue-50 border border-blue-200 rounded-xl p-4 mb-4">
                        <div class="space-y-2 text-sm">
                            <div><strong data-translate="activeUsername">üë§ Username Aktif:</strong> <span id="currentUserDisplay2">-</span></div>
                            <div><strong data-translate="sessionType">üîí Tipe Sesi:</strong> <span id="sessionType">-</span></div>
                            <div><strong data-translate="totalRegisteredUsers">üìä Total Akun Terdaftar:</strong> <span id="totalRegisteredUsers">0</span></div>
                        </div>
                    </div>
                </div>
                
                <!-- Registered Users List -->
                <div class="mb-4">
                    <h4 class="text-lg font-medium text-gray-700 mb-4" data-translate="allAccountsList">üìã Daftar Semua Akun</h4>
                    <div id="registeredUsersList" class="space-y-2 max-h-60 overflow-y-auto">
                        <!-- Users will be populated here -->
                    </div>
                </div>
                
                <!-- Update Current User Credentials -->
                <div class="border-t border-gray-200 pt-6">
                    <h4 class="text-lg font-medium text-gray-700 mb-4" data-translate="updateCredentials">üîê Update Kredensial Akun Aktif</h4>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="newUsername">Username Baru</label>
                            <input type="text" id="newUsername" placeholder="Minimal 3 karakter"
                                   class="w-full px-4 py-3 bg-white/40 backdrop-blur-sm border border-white/50 rounded-xl focus:ring-2 focus:ring-blue-400 text-gray-800">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="newPassword">Password Baru</label>
                            <div class="relative">
                                <input type="password" id="newPassword" placeholder="Minimal 6 karakter"
                                       class="w-full px-4 py-3 pr-12 bg-white/40 backdrop-blur-sm border border-white/50 rounded-xl focus:ring-2 focus:ring-blue-400 text-gray-800">
                                <button type="button" onclick="toggleNewPasswordVisibility()" 
                                        class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700">
                                    <span id="newPasswordToggleIcon">üëÅÔ∏è</span>
                                </button>
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="confirmPassword">Konfirmasi Password</label>
                            <div class="relative">
                                <input type="password" id="confirmPassword" placeholder="Ulangi password baru"
                                       class="w-full px-4 py-3 pr-12 bg-white/40 backdrop-blur-sm border border-white/50 rounded-xl focus:ring-2 focus:ring-blue-400 text-gray-800">
                                <button type="button" onclick="toggleConfirmPasswordVisibility()" 
                                        class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700">
                                    <span id="confirmPasswordToggleIcon">üëÅÔ∏è</span>
                                </button>
                            </div>
                        </div>
                        <button onclick="updateCredentials()" 
                                class="w-full px-4 py-3 glass-button text-blue-700 rounded-xl hover:bg-blue-500/20 transition-colors"
                                data-translate="updateCredentialsBtn">
                            üîê Update Kredensial Login
                        </button>
                    </div>
                </div>
            </div>
            <div class="p-6 border-t border-white/20">
                <button type="button" onclick="closeAccountModal()" 
                        class="w-full px-4 py-3 glass-button text-gray-700 rounded-xl hover:bg-white/30 transition-colors"
                        data-translate="close">
                    Tutup
                </button>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="fixed inset-0 bg-black/30 backdrop-blur-sm hidden items-center justify-center z-50 p-4">
        <div class="bg-white/90 backdrop-blur-xl border border-white/40 shadow-2xl rounded-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto">
            <div class="p-6 border-b border-white/20">
                <h3 class="text-xl font-semibold gradient-text">‚öôÔ∏è Pengaturan Tampilan</h3>
            </div>
            <div class="p-6 space-y-6">

                <!-- Language Settings -->
                <div>
                    <h4 class="text-lg font-medium text-gray-700 mb-4" data-translate="language">üåê Bahasa</h4>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="selectLanguage">Pilih Bahasa</label>
                        <select id="languageSelect" onchange="changeLanguage(this.value)" 
                                class="w-full px-4 py-3 bg-white/40 backdrop-blur-sm border border-white/50 rounded-xl focus:ring-2 focus:ring-blue-400 text-gray-800">
                            <option value="id">üáÆüá© Bahasa Indonesia</option>
                            <option value="en">üá∫üá∏ English</option>
                            <option value="ja">üáØüáµ Êó•Êú¨Ë™û (Japanese)</option>
                            <option value="ko">üá∞üá∑ ÌïúÍµ≠Ïñ¥ (Korean)</option>
                            <option value="es">üá™üá∏ Espa√±ol (Spanish)</option>
                        </select>
                    </div>
                </div>

                <!-- Header Settings -->
                <div>
                    <h4 class="text-lg font-medium text-gray-700 mb-4" data-translate="header">üìù Header</h4>
                    <div class="space-y-3">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Judul Utama</label>
                            <input type="text" id="settingsTitle" 
                                   class="w-full px-4 py-3 bg-white/40 backdrop-blur-sm border border-white/50 rounded-xl focus:ring-2 focus:ring-blue-400 text-gray-800">
                        </div>
                        <div class="bg-blue-50 border border-blue-200 rounded-xl p-4">
                            <div class="flex items-center gap-2 mb-2">
                                <span class="text-blue-600">‚ÑπÔ∏è</span>
                                <span class="text-blue-800 font-medium text-sm">Info Subjudul</span>
                            </div>
                            <div class="text-blue-700 text-sm">
                                Subjudul akan menampilkan sapaan personal: "Hai [username], selamat datang kembali!" dan tidak dapat diubah.
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Stats Settings -->
                <div>
                    <h4 class="text-lg font-medium text-gray-700 mb-4">üìä Kartu Statistik</h4>
                    <div class="space-y-4">
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Kartu 1 - Label</label>
                                <input type="text" id="settingsStat1Label" 
                                       class="w-full px-3 py-2 bg-white/40 backdrop-blur-sm border border-white/50 rounded-lg focus:ring-2 focus:ring-blue-400 text-gray-800">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Kartu 1 - Icon</label>
                                <input type="text" id="settingsStat1Icon" 
                                       class="w-full px-3 py-2 bg-white/20 backdrop-blur-sm border border-white/30 rounded-lg focus:ring-2 focus:ring-blue-400 text-gray-700"
                                       placeholder="üìã">
                            </div>
                        </div>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Kartu 2 - Label</label>
                                <input type="text" id="settingsStat2Label" 
                                       class="w-full px-3 py-2 bg-white/40 backdrop-blur-sm border border-white/50 rounded-lg focus:ring-2 focus:ring-blue-400 text-gray-800">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Kartu 2 - Icon</label>
                                <input type="text" id="settingsStat2Icon" 
                                       class="w-full px-3 py-2 bg-white/20 backdrop-blur-sm border border-white/30 rounded-lg focus:ring-2 focus:ring-blue-400 text-gray-700"
                                       placeholder="üî•">
                            </div>
                        </div>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Kartu 3 - Label</label>
                                <input type="text" id="settingsStat3Label" 
                                       class="w-full px-3 py-2 bg-white/40 backdrop-blur-sm border border-white/50 rounded-lg focus:ring-2 focus:ring-blue-400 text-gray-800">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Kartu 3 - Icon</label>
                                <input type="text" id="settingsStat3Icon" 
                                       class="w-full px-3 py-2 bg-white/20 backdrop-blur-sm border border-white/30 rounded-lg focus:ring-2 focus:ring-blue-400 text-gray-700"
                                       placeholder="‚úÖ">
                            </div>
                        </div>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Kartu 4 - Label</label>
                                <input type="text" id="settingsStat4Label" 
                                       class="w-full px-3 py-2 bg-white/40 backdrop-blur-sm border border-white/50 rounded-lg focus:ring-2 focus:ring-blue-400 text-gray-800">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Kartu 4 - Icon</label>
                                <input type="text" id="settingsStat4Icon" 
                                       class="w-full px-3 py-2 bg-white/20 backdrop-blur-sm border border-white/30 rounded-lg focus:ring-2 focus:ring-blue-400 text-gray-700"
                                       placeholder="üí∞">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Reset Button -->
                <div class="pt-4 border-t border-white/20">
                    <button onclick="resetToDefault()" 
                            class="w-full px-4 py-3 glass-button text-gray-700 rounded-xl hover:bg-white/30 transition-colors mb-4">
                        üîÑ Reset ke Default
                    </button>
                </div>
            </div>
            <div class="p-6 border-t border-white/20">
                <div class="flex gap-3">
                    <button type="button" onclick="closeSettingsModal()" 
                            class="flex-1 px-4 py-3 glass-button text-gray-700 rounded-xl hover:bg-white/30 transition-colors"
                            data-translate="cancel">
                        Batal
                    </button>
                    <button onclick="saveSettings()" 
                            class="flex-1 px-4 py-3 glass-button text-blue-700 rounded-xl hover:bg-blue-500/20 transition-colors"
                            data-translate="save">
                        Simpan
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Print Modal -->
    <div id="printModal" class="fixed inset-0 bg-black/30 backdrop-blur-sm hidden items-center justify-center z-50 p-4">
        <div class="bg-white/90 backdrop-blur-xl border border-white/40 shadow-2xl rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto">
            <div class="p-6 border-b border-white/20">
                <h3 class="text-xl font-semibold gradient-text" data-translate="printReportInvoice">üñ®Ô∏è Cetak Laporan & Invoice</h3>
            </div>
            <div class="p-6 space-y-6">
                <!-- Print Type Selection -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="printType">Jenis Cetak</label>
                    <div class="flex bg-white/20 backdrop-blur-sm rounded-xl p-1 mb-4">
                        <button id="reportPrintTab" onclick="showReportPrint()" 
                                class="flex-1 py-2 px-4 rounded-lg text-sm font-medium transition-colors bg-white/60 text-blue-700 shadow-sm"
                                data-translate="projectReport">
                            üìä Laporan Proyek
                        </button>
                        <button id="invoicePrintTab" onclick="showInvoicePrint()" 
                                class="flex-1 py-2 px-4 rounded-lg text-sm font-medium transition-colors text-gray-600 hover:text-blue-700"
                                data-translate="invoiceNote">
                            üßæ Invoice/Nota
                        </button>
                    </div>
                </div>

                <!-- Report Print Section -->
                <div id="reportPrintSection">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="reportType">Jenis Laporan</label>
                        <select id="reportType" class="w-full px-4 py-3 bg-white/40 backdrop-blur-sm border border-white/50 rounded-xl focus:ring-2 focus:ring-blue-400 text-gray-800">
                            <option value="all" data-translate="allProjects">Semua Proyek</option>
                            <option value="completed" data-translate="completedOnly">Hanya yang Selesai</option>
                            <option value="pending" data-translate="pendingOnly">Hanya yang Pending</option>
                            <option value="progress" data-translate="progressOnly">Hanya yang Dalam Proses</option>
                            <option value="high" data-translate="highPriorityOnly">Hanya Prioritas Tinggi</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="printOptions">Opsi Cetak</label>
                        <div class="space-y-2">
                            <label class="flex items-center">
                                <input type="checkbox" id="includeStats" checked class="mr-2 rounded">
                                <span class="text-sm" data-translate="includeStatistics">Sertakan Statistik</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" id="includeDescription" checked class="mr-2 rounded">
                                <span class="text-sm" data-translate="includeDescriptions">Sertakan Deskripsi</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" id="includePrices" checked class="mr-2 rounded">
                                <span class="text-sm" data-translate="includePrices">Sertakan Harga</span>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Invoice Print Section -->
                <div id="invoicePrintSection" class="hidden">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Left Column - Invoice Settings -->
                        <div class="space-y-4">
                            <h4 class="text-lg font-medium text-gray-700 mb-4" data-translate="invoiceSettings">‚öôÔ∏è Pengaturan Invoice</h4>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="selectProjectInvoice">Pilih Proyek untuk Invoice</label>
                                <select id="invoiceProject" class="w-full px-4 py-3 bg-white/40 backdrop-blur-sm border border-white/50 rounded-xl focus:ring-2 focus:ring-blue-400 text-gray-800">
                                    <option value="" data-translate="selectProject">Pilih Proyek...</option>
                                </select>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="paperFormat">Format Kertas</label>
                                <select id="invoiceFormat" class="w-full px-4 py-3 bg-white/40 backdrop-blur-sm border border-white/50 rounded-xl focus:ring-2 focus:ring-blue-400 text-gray-800">
                                    <option value="a4" data-translate="paperA4">üìÑ A4 (210 x 297 mm)</option>
                                    <option value="a5" data-translate="paperA5">üìÑ A5 (148 x 210 mm)</option>
                                    <option value="a6" data-translate="paperA6">üìÑ A6 (105 x 148 mm)</option>
                                    <option value="letter" data-translate="paperLetter">üìÑ Letter (216 x 279 mm)</option>
                                    <option value="legal" data-translate="paperLegal">üìÑ Legal (216 x 356 mm)</option>
                                    <option value="receipt" data-translate="paperReceipt">üßæ Receipt (80mm)</option>
                                </select>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="invoiceNumber">Nomor Invoice</label>
                                <input type="text" id="invoiceNumber" 
                                       class="w-full px-4 py-3 bg-white/40 backdrop-blur-sm border border-white/50 rounded-xl focus:ring-2 focus:ring-blue-400 text-gray-800"
                                       placeholder="INV-001">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="invoiceDate">Tanggal Invoice</label>
                                <input type="date" id="invoiceDate" 
                                       class="w-full px-4 py-3 bg-white/40 backdrop-blur-sm border border-white/50 rounded-xl focus:ring-2 focus:ring-blue-400 text-gray-800">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="dueDate">Jatuh Tempo</label>
                                <input type="date" id="invoiceDueDate" 
                                       class="w-full px-4 py-3 bg-white/40 backdrop-blur-sm border border-white/50 rounded-xl focus:ring-2 focus:ring-blue-400 text-gray-800">
                            </div>
                        </div>
                        
                        <!-- Right Column - Company Info -->
                        <div class="space-y-4">
                            <h4 class="text-lg font-medium text-gray-700 mb-4" data-translate="companyInfo">üè¢ Info Perusahaan</h4>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="companyName">Nama Perusahaan</label>
                                <input type="text" id="companyName" 
                                       class="w-full px-4 py-3 bg-white/40 backdrop-blur-sm border border-white/50 rounded-xl focus:ring-2 focus:ring-blue-400 text-gray-800"
                                       placeholder="PT. Nama Perusahaan">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="address">Alamat</label>
                                <textarea id="companyAddress" rows="3" 
                                          class="w-full px-4 py-3 bg-white/40 backdrop-blur-sm border border-white/50 rounded-xl focus:ring-2 focus:ring-blue-400 text-gray-800"
                                          placeholder="Jl. Contoh No. 123&#10;Jakarta 12345"></textarea>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="phone">Telepon</label>
                                <input type="text" id="companyPhone" 
                                       class="w-full px-4 py-3 bg-white/40 backdrop-blur-sm border border-white/50 rounded-xl focus:ring-2 focus:ring-blue-400 text-gray-800"
                                       placeholder="+62 21 1234 5678">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="email">Email</label>
                                <input type="email" id="companyEmail" 
                                       class="w-full px-4 py-3 bg-white/40 backdrop-blur-sm border border-white/50 rounded-xl focus:ring-2 focus:ring-blue-400 text-gray-800"
                                       placeholder="info@perusahaan.com">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="website">Website</label>
                                <input type="text" id="companyWebsite" 
                                       class="w-full px-4 py-3 bg-white/40 backdrop-blur-sm border border-white/50 rounded-xl focus:ring-2 focus:ring-blue-400 text-gray-800"
                                       placeholder="www.perusahaan.com">
                            </div>
                        </div>
                    </div>
                    
                    <!-- Additional Invoice Options -->
                    <div class="border-t border-white/20 pt-6">
                        <h4 class="text-lg font-medium text-gray-700 mb-4" data-translate="paymentOptions">üí∞ Opsi Pembayaran</h4>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="taxPPN">PPN (%)</label>
                                <input type="number" id="invoiceTax" min="0" max="100" step="0.1" value="11" 
                                       class="w-full px-4 py-3 bg-white/40 backdrop-blur-sm border border-white/50 rounded-xl focus:ring-2 focus:ring-blue-400 text-gray-800">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="discount">Diskon (%)</label>
                                <input type="number" id="invoiceDiscount" min="0" max="100" step="0.1" value="0" 
                                       class="w-full px-4 py-3 bg-white/40 backdrop-blur-sm border border-white/50 rounded-xl focus:ring-2 focus:ring-blue-400 text-gray-800">
                            </div>
                        </div>
                        
                        <div class="mt-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="additionalNotes">Catatan Tambahan</label>
                            <textarea id="invoiceNotes" rows="2" 
                                      class="w-full px-4 py-3 bg-white/40 backdrop-blur-sm border border-white/50 rounded-xl focus:ring-2 focus:ring-blue-400 text-gray-800"
                                      placeholder="Terima kasih atas kepercayaan Anda..."></textarea>
                        </div>
                        
                        <div class="mt-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="bankInfo">Info Rekening Bank</label>
                            <textarea id="bankInfo" rows="3" 
                                      class="w-full px-4 py-3 bg-white/40 backdrop-blur-sm border border-white/50 rounded-xl focus:ring-2 focus:ring-blue-400 text-gray-800"
                                      placeholder="Bank BCA&#10;No. Rek: 1234567890&#10;A.n: Nama Pemilik"></textarea>
                        </div>
                    </div>
                </div>
                
                <div class="flex gap-3">
                    <button type="button" onclick="closePrintModal()" 
                            class="flex-1 px-4 py-3 glass-button text-gray-700 rounded-xl hover:bg-white/30 transition-colors"
                            data-translate="cancel">
                        Tutup
                    </button>
                    <button id="printReportBtn" onclick="printReport()" 
                            class="flex-1 px-4 py-3 glass-button text-purple-700 rounded-xl hover:bg-purple-500/20 transition-colors"
                            data-translate="print">
                        üñ®Ô∏è Cetak Laporan
                    </button>
                    <button id="printInvoiceBtn" onclick="printInvoice()" 
                            class="hidden flex-1 px-4 py-3 glass-button text-green-700 rounded-xl hover:bg-green-500/20 transition-colors"
                            data-translate="printInvoice">
                        üßæ Cetak Invoice
                    </button>
                    <button id="saveInvoicePdfBtn" onclick="saveInvoiceAsPDF()" 
                            class="hidden flex-1 px-4 py-3 glass-button text-red-700 rounded-xl hover:bg-red-500/20 transition-colors"
                            data-translate="saveAsPDF">
                        üìÑ Simpan PDF
                    </button>
                    <button id="saveInvoicePngBtn" onclick="saveInvoiceAsPNG()" 
                            class="hidden flex-1 px-4 py-3 glass-button text-blue-700 rounded-xl hover:bg-blue-500/20 transition-colors"
                            data-translate="saveAsPNG">
                        üñºÔ∏è Simpan PNG
                    </button>
                    <button id="editInvoiceBtn" onclick="editInvoiceDirectly()" 
                            class="hidden flex-1 px-4 py-3 glass-button text-orange-700 rounded-xl hover:bg-orange-500/20 transition-colors"
                            data-translate="editInvoice">
                        ‚úèÔ∏è Edit Nota
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Super Admin Dashboard Modal -->
    <div id="superAdminModal" class="fixed inset-0 bg-black/30 backdrop-blur-sm hidden items-center justify-center z-50 p-4">
        <div class="bg-white/90 backdrop-blur-xl border border-white/40 shadow-2xl rounded-2xl max-w-7xl w-full max-h-[95vh] overflow-y-auto">
            <div class="p-6 border-b border-white/20">
                <div class="flex justify-between items-center">
                    <h3 class="text-xl font-semibold gradient-text">üîê Super Admin Dashboard - Database Pengguna</h3>
                    <button onclick="closeSuperAdminDashboard()" class="text-gray-500 hover:text-gray-700 text-2xl">√ó</button>
                </div>
            </div>
            
            <div class="p-6">
                <!-- Statistics Overview -->
                <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                    <div class="bg-blue-50 border border-blue-200 rounded-xl p-6">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-blue-600 text-sm font-medium">Total Pengguna</p>
                                <p class="text-2xl font-bold text-blue-700" id="totalUsersCount">0</p>
                            </div>
                            <div class="bg-blue-100 p-3 rounded-full">
                                <span class="text-2xl">üë•</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-green-50 border border-green-200 rounded-xl p-6">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-green-600 text-sm font-medium">Pengguna Aktif Hari Ini</p>
                                <p class="text-2xl font-bold text-green-700" id="activeUsersToday">0</p>
                            </div>
                            <div class="bg-green-100 p-3 rounded-full">
                                <span class="text-2xl">üü¢</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-purple-50 border border-purple-200 rounded-xl p-6">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-purple-600 text-sm font-medium">Total Proyek</p>
                                <p class="text-2xl font-bold text-purple-700" id="totalProjectsAll">0</p>
                            </div>
                            <div class="bg-purple-100 p-3 rounded-full">
                                <span class="text-2xl">üìã</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-orange-50 border border-orange-200 rounded-xl p-6">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-orange-600 text-sm font-medium">Total Aktivitas</p>
                                <p class="text-2xl font-bold text-orange-700" id="totalActivities">0</p>
                            </div>
                            <div class="bg-orange-100 p-3 rounded-full">
                                <span class="text-2xl">üìä</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Tabs -->
                <div class="flex bg-white/20 backdrop-blur-sm rounded-xl p-1 mb-6">
                    <button id="usersTab" onclick="showUsersTab()" 
                            class="flex-1 py-2 px-4 rounded-lg text-sm font-medium transition-colors bg-white/60 text-blue-700 shadow-sm">
                        üë• Data Pengguna
                    </button>
                    <button id="activitiesTab" onclick="showActivitiesTab()" 
                            class="flex-1 py-2 px-4 rounded-lg text-sm font-medium transition-colors text-gray-600 hover:text-blue-700">
                        üìä Log Aktivitas
                    </button>
                    <button id="statisticsTab" onclick="showStatisticsTab()" 
                            class="flex-1 py-2 px-4 rounded-lg text-sm font-medium transition-colors text-gray-600 hover:text-blue-700">
                        üìà Statistik Detail
                    </button>
                    <button id="systemTab" onclick="showSystemTab()" 
                            class="flex-1 py-2 px-4 rounded-lg text-sm font-medium transition-colors text-gray-600 hover:text-blue-700">
                        ‚öôÔ∏è Sistem
                    </button>
                </div>
                
                <!-- Users Tab Content -->
                <div id="usersTabContent">
                    <div class="bg-white/60 backdrop-blur-sm border border-white/50 rounded-xl p-6">
                        <h4 class="text-lg font-semibold text-gray-800 mb-4">üìã Daftar Semua Pengguna</h4>
                        <div class="overflow-x-auto">
                            <table class="w-full border-collapse">
                                <thead>
                                    <tr class="bg-gray-100">
                                        <th class="border border-gray-300 px-4 py-2 text-left">Username</th>
                                        <th class="border border-gray-300 px-4 py-2 text-left">Email</th>
                                        <th class="border border-gray-300 px-4 py-2 text-left">Tipe</th>
                                        <th class="border border-gray-300 px-4 py-2 text-left">Terdaftar</th>
                                        <th class="border border-gray-300 px-4 py-2 text-left">Login Terakhir</th>
                                        <th class="border border-gray-300 px-4 py-2 text-left">Total Login</th>
                                        <th class="border border-gray-300 px-4 py-2 text-left">Proyek</th>
                                        <th class="border border-gray-300 px-4 py-2 text-left">Status</th>
                                    </tr>
                                </thead>
                                <tbody id="usersTableBody">
                                    <!-- Data akan diisi oleh JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                
                <!-- Activities Tab Content -->
                <div id="activitiesTabContent" class="hidden">
                    <div class="bg-white/60 backdrop-blur-sm border border-white/50 rounded-xl p-6">
                        <div class="flex justify-between items-center mb-4">
                            <h4 class="text-lg font-semibold text-gray-800">üìä Log Aktivitas Pengguna</h4>
                            <div class="flex gap-2">
                                <select id="activityFilter" class="px-3 py-2 bg-white/60 border border-gray-300 rounded-lg text-sm">
                                    <option value="">Semua Aktivitas</option>
                                    <option value="LOGIN">Login</option>
                                    <option value="PROJECT_CREATED">Proyek Dibuat</option>
                                    <option value="PROJECT_COMPLETED">Proyek Selesai</option>
                                    <option value="EXPORT">Export Data</option>
                                </select>
                                <button onclick="clearActivityLogs()" class="px-4 py-2 bg-red-500 text-white rounded-lg text-sm hover:bg-red-600">
                                    üóëÔ∏è Hapus Log
                                </button>
                            </div>
                        </div>
                        <div class="max-h-96 overflow-y-auto">
                            <div id="activitiesContainer">
                                <!-- Activities akan diisi oleh JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Statistics Tab Content -->
                <div id="statisticsTabContent" class="hidden">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="bg-white/60 backdrop-blur-sm border border-white/50 rounded-xl p-6">
                            <h4 class="text-lg font-semibold text-gray-800 mb-4">üìà Statistik Login Harian</h4>
                            <div id="dailyLoginStats">
                                <!-- Chart akan diisi oleh JavaScript -->
                            </div>
                        </div>
                        
                        <div class="bg-white/60 backdrop-blur-sm border border-white/50 rounded-xl p-6">
                            <h4 class="text-lg font-semibold text-gray-800 mb-4">üèÜ Pengguna Paling Aktif</h4>
                            <div id="topUsersStats">
                                <!-- Stats akan diisi oleh JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- System Tab Content -->
                <div id="systemTabContent" class="hidden">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="bg-white/60 backdrop-blur-sm border border-white/50 rounded-xl p-6">
                            <h4 class="text-lg font-semibold text-gray-800 mb-4">üíæ Manajemen Data</h4>
                            <div class="space-y-4">
                                <button onclick="exportAllData()" class="w-full px-4 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600">
                                    üìä Export Semua Data
                                </button>
                                <button onclick="backupDatabase()" class="w-full px-4 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600">
                                    üíæ Backup Database
                                </button>
                                <button onclick="clearOldData()" class="w-full px-4 py-3 bg-orange-500 text-white rounded-lg hover:bg-orange-600">
                                    üßπ Bersihkan Data Lama
                                </button>
                                <button onclick="resetAllData()" class="w-full px-4 py-3 bg-red-500 text-white rounded-lg hover:bg-red-600">
                                    ‚ö†Ô∏è Reset Semua Data
                                </button>
                            </div>
                        </div>
                        
                        <div class="bg-white/60 backdrop-blur-sm border border-white/50 rounded-xl p-6">
                            <h4 class="text-lg font-semibold text-gray-800 mb-4">‚ÑπÔ∏è Informasi Sistem</h4>
                            <div class="space-y-2 text-sm">
                                <div><strong>Total Storage:</strong> <span id="storageUsed">0 KB</span></div>
                                <div><strong>Browser:</strong> <span id="browserInfo">-</span></div>
                                <div><strong>Platform:</strong> <span id="platformInfo">-</span></div>
                                <div><strong>Waktu Server:</strong> <span id="serverTime">-</span></div>
                                <div><strong>Session ID:</strong> <span id="currentSessionId">-</span></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="p-6 border-t border-white/20">
                <button onclick="closeSuperAdminDashboard()" 
                        class="w-full px-4 py-3 glass-button text-gray-700 rounded-xl hover:bg-white/30 transition-colors">
                    Tutup Dashboard
                </button>
            </div>
        </div>
    </div>

    <!-- Invoice Editor Modal -->
    <div id="invoiceEditorModal" class="fixed inset-0 bg-black/30 backdrop-blur-sm hidden items-center justify-center z-50 p-4">
        <div class="bg-white/90 backdrop-blur-xl border border-white/40 shadow-2xl rounded-2xl max-w-6xl w-full max-h-[95vh] overflow-y-auto">
            <div class="p-6 border-b border-white/20">
                <div class="flex justify-between items-center">
                    <h3 class="text-xl font-semibold gradient-text" data-translate="editInvoiceTitle">‚úèÔ∏è Edit Invoice/Nota</h3>
                    <button onclick="closeInvoiceEditor()" class="text-gray-500 hover:text-gray-700 text-2xl">√ó</button>
                </div>
            </div>
            
            <div class="flex flex-col lg:flex-row">
                <!-- Editor Panel -->
                <div class="w-full lg:w-1/3 p-6 border-b lg:border-b-0 lg:border-r border-white/20 bg-gray-50/50">
                    <h4 class="text-lg font-medium text-gray-700 mb-4" data-translate="editorPanel">üé® Editor</h4>
                    
                    <!-- Logo Upload -->
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="companyLogo">üè¢ Logo Perusahaan</label>
                        <div class="border-2 border-dashed border-gray-300 rounded-lg p-4 text-center">
                            <input type="file" id="logoUpload" accept="image/*" class="hidden" onchange="handleLogoUpload(event)">
                            <div id="logoPreview" class="mb-2">
                                <div class="w-20 h-20 bg-gray-200 rounded-lg mx-auto flex items-center justify-center text-gray-500">
                                    üè¢
                                </div>
                            </div>
                            <button onclick="document.getElementById('logoUpload').click()" 
                                    class="text-blue-600 hover:text-blue-800 text-sm" data-translate="uploadLogo">
                                üìÅ Upload Logo
                            </button>
                        </div>
                    </div>
                    
                    <!-- Header Settings -->
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="invoiceTitleLabel">üìù Judul Invoice</label>
                        <input type="text" id="invoiceTitle" value="INVOICE" 
                               class="w-full px-3 py-2 bg-white/60 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-400"
                               onchange="updateInvoicePreview()">
                    </div>
                    
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="headerColor">üé® Warna Header</label>
                        <input type="color" id="headerColor" value="#333333" 
                               class="w-full h-10 rounded-lg border border-gray-300"
                               onchange="updateInvoicePreview()">
                    </div>
                    
                    <!-- Company Info Editor -->
                    <div class="mb-6">
                        <h5 class="font-medium text-gray-700 mb-3" data-translate="companyInfoEditor">üè¢ Info Perusahaan</h5>
                        <div class="space-y-3">
                            <input type="text" id="editCompanyName" data-translate-placeholder="companyNamePlaceholder" placeholder="Nama Perusahaan" 
                                   class="w-full px-3 py-2 bg-white/60 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-400"
                                   onchange="updateInvoicePreview()">
                            <textarea id="editCompanyAddress" data-translate-placeholder="companyAddressPlaceholder" placeholder="Alamat Perusahaan" rows="2"
                                      class="w-full px-3 py-2 bg-white/60 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-400"
                                      onchange="updateInvoicePreview()"></textarea>
                            <input type="text" id="editCompanyPhone" data-translate-placeholder="phonePlaceholder" placeholder="Telepon" 
                                   class="w-full px-3 py-2 bg-white/60 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-400"
                                   onchange="updateInvoicePreview()">
                            <input type="email" id="editCompanyEmail" data-translate-placeholder="emailPlaceholder" placeholder="Email" 
                                   class="w-full px-3 py-2 bg-white/60 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-400"
                                   onchange="updateInvoicePreview()">
                        </div>
                    </div>
                    
                    <!-- Signature Section -->
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="signature">‚úçÔ∏è Tanda Tangan</label>
                        <div class="border-2 border-dashed border-gray-300 rounded-lg p-4 text-center">
                            <input type="file" id="signatureUpload" accept="image/*" class="hidden" onchange="handleSignatureUpload(event)">
                            <div id="signaturePreview" class="mb-2">
                                <div class="w-24 h-16 bg-gray-200 rounded-lg mx-auto flex items-center justify-center text-gray-500">
                                    ‚úçÔ∏è
                                </div>
                            </div>
                            <button onclick="document.getElementById('signatureUpload').click()" 
                                    class="text-blue-600 hover:text-blue-800 text-sm" data-translate="uploadSignature">
                                üìÅ Upload Tanda Tangan
                            </button>
                        </div>
                        <input type="text" id="signatureName" data-translate-placeholder="signerNamePlaceholder" placeholder="Nama Penandatangan" 
                               class="w-full px-3 py-2 bg-white/60 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-400 mt-2"
                               onchange="updateInvoicePreview()">
                        <input type="text" id="signatureTitle" data-translate-placeholder="signerTitlePlaceholder" placeholder="Jabatan" 
                               class="w-full px-3 py-2 bg-white/60 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-400 mt-2"
                               onchange="updateInvoicePreview()">
                    </div>
                    
                    <!-- Footer Settings -->
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="footerLabel">üìÑ Footer</label>
                        <textarea id="invoiceFooter" data-translate-placeholder="footerPlaceholder" placeholder="Terima kasih atas kepercayaan Anda!" rows="2"
                                  class="w-full px-3 py-2 bg-white/60 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-400"
                                  onchange="updateInvoicePreview()"></textarea>
                    </div>
                </div>
                
                <!-- Preview Panel -->
                <div class="flex-1 p-6 min-h-0">
                    <div class="flex justify-between items-center mb-4">
                        <h4 class="text-lg font-medium text-gray-700" data-translate="previewPanel">üëÅÔ∏è Preview</h4>
                        <div class="flex gap-2">
                            <button onclick="printEditedInvoice()" 
                                    class="px-4 py-2 glass-button text-purple-700 rounded-lg hover:bg-purple-500/20 transition-colors"
                                    data-translate="printBtn">
                                üñ®Ô∏è Cetak
                            </button>
                            <button onclick="saveEditedInvoiceAsPDF()" 
                                    class="px-4 py-2 glass-button text-red-700 rounded-lg hover:bg-red-500/20 transition-colors"
                                    data-translate="pdfBtn">
                                üìÑ PDF
                            </button>
                            <button onclick="saveEditedInvoiceAsPNG()" 
                                    class="px-4 py-2 glass-button text-blue-700 rounded-lg hover:bg-blue-500/20 transition-colors"
                                    data-translate="pngBtn">
                                üñºÔ∏è PNG
                            </button>
                        </div>
                    </div>
                    
                    <!-- Invoice Preview -->
                    <div id="invoicePreviewContainer" class="bg-white border border-gray-300 rounded-lg p-6 shadow-lg min-h-[600px]">
                        <!-- Invoice content will be generated here -->
                    </div>
                </div>
            </div>
            
            <div class="p-6 border-t border-white/20">
                <div class="flex justify-end gap-3">
                    <button onclick="closeInvoiceEditor()" 
                            class="px-6 py-3 glass-button text-gray-700 rounded-xl hover:bg-white/30 transition-colors"
                            data-translate="close">
                        Tutup
                    </button>
                    <button onclick="saveInvoiceTemplate()" 
                            class="px-6 py-3 glass-button text-green-700 rounded-xl hover:bg-green-500/20 transition-colors"
                            data-translate="saveTemplate">
                        üíæ Simpan Template
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Add/Edit Modal -->
    <div id="projectModal" class="fixed inset-0 bg-black/30 backdrop-blur-sm hidden items-center justify-center z-50 p-4">
        <div class="bg-white/90 backdrop-blur-xl border border-white/40 shadow-2xl rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto">
            <div class="p-6 border-b border-white/20">
                <h3 id="modalTitle" class="text-xl font-semibold gradient-text" data-translate="addNewProject">Tambah Proyek Baru</h3>
            </div>
            <form id="projectForm" class="p-6 space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="projectName">Nama Proyek</label>
                    <input type="text" id="projectName" required 
                           class="w-full px-4 py-3 bg-white/40 backdrop-blur-sm border border-white/50 rounded-xl focus:ring-2 focus:ring-blue-400 text-gray-800">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="clientName">Nama Client</label>
                    <input type="text" id="clientName" required 
                           class="w-full px-4 py-3 bg-white/40 backdrop-blur-sm border border-white/50 rounded-xl focus:ring-2 focus:ring-blue-400 text-gray-800"
                           placeholder="Masukkan nama client">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="platform">Platform</label>
                    <select id="platform" required 
                            class="w-full px-4 py-3 bg-white/40 backdrop-blur-sm border border-white/50 rounded-xl focus:ring-2 focus:ring-blue-400 text-gray-800">
                        <option value="" data-translate="selectPlatform">Pilih Platform</option>
                        <option value="fiverr" data-translate="fiverr">üü¢ Fiverr</option>
                        <option value="upwork" data-translate="upwork">üîµ Upwork</option>
                        <option value="facebook" data-translate="facebook">üîµ Facebook</option>
                        <option value="tiktok" data-translate="tiktok">‚ö´ TikTok</option>
                        <option value="instagram" data-translate="instagram">üü£ Instagram</option>
                        <option value="linkedin" data-translate="linkedin">üîµ LinkedIn</option>
                        <option value="freelancer" data-translate="freelancer">üü† Freelancer</option>
                        <option value="direct" data-translate="directClient">üíº Direct Client</option>
                        <option value="referral" data-translate="referral">ü§ù Referral</option>
                        <option value="other" data-translate="other">üì± Lainnya</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="description">Deskripsi</label>
                    <textarea id="projectDescription" rows="3" 
                              class="w-full px-4 py-3 bg-white/40 backdrop-blur-sm border border-white/50 rounded-xl focus:ring-2 focus:ring-blue-400 text-gray-800"></textarea>
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="startDate">Tanggal Mulai</label>
                        <input type="date" id="startDate" required 
                               class="w-full px-4 py-3 bg-white/40 backdrop-blur-sm border border-white/50 rounded-xl focus:ring-2 focus:ring-blue-400 text-gray-800">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="endDate">Tanggal Selesai</label>
                        <input type="date" id="endDate" required 
                               class="w-full px-4 py-3 bg-white/40 backdrop-blur-sm border border-white/50 rounded-xl focus:ring-2 focus:ring-blue-400 text-gray-800">
                    </div>
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="priority">Prioritas</label>
                        <select id="priority" required 
                                class="w-full px-4 py-3 bg-white/40 backdrop-blur-sm border border-white/50 rounded-xl focus:ring-2 focus:ring-blue-400 text-gray-800">
                            <option value="high" data-translate="high">üî• Tinggi</option>
                            <option value="medium" data-translate="medium">‚ö° Sedang</option>
                            <option value="low" data-translate="low">üìù Rendah</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="status">Status</label>
                        <select id="status" required 
                                class="w-full px-4 py-3 bg-white/40 backdrop-blur-sm border border-white/50 rounded-xl focus:ring-2 focus:ring-blue-400 text-gray-800">
                            <option value="pending" data-translate="pending">‚è≥ Menunggu</option>
                            <option value="progress" data-translate="progress">üîÑ Dalam Proses</option>
                            <option value="completed" data-translate="completed">‚úÖ Selesai</option>
                        </select>
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="projectPrice">Harga Proyek (Rp)</label>
                    <input type="number" id="projectPrice" min="0" step="1000" 
                           class="w-full px-4 py-3 bg-white/40 backdrop-blur-sm border border-white/50 rounded-xl focus:ring-2 focus:ring-blue-400 text-gray-800"
                           placeholder="0">
                </div>
                <div class="flex gap-3 pt-4">
                    <button type="button" onclick="closeModal()" 
                            class="flex-1 px-4 py-3 glass-button text-gray-700 rounded-xl hover:bg-white/30 transition-colors"
                            data-translate="cancel">
                        Batal
                    </button>
                    <button type="submit" 
                            class="flex-1 px-4 py-3 glass-button text-blue-700 rounded-xl hover:bg-blue-500/20 transition-colors"
                            data-translate="save">
                        Simpan
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Authentication variables
        let userCredentials = JSON.parse(localStorage.getItem('userCredentials') || '{"username": "admin", "password": "admin123"}');
        let userAccounts = JSON.parse(localStorage.getItem('userAccounts') || '[]');
        let currentUser = null;
        let isAuthenticated = false;
        
        // Super Admin credentials (hanya untuk Anda)
        const SUPER_ADMIN = {
            username: "superadmin",
            password: "SuperAdmin2024!@#",
            secretKey: "MASTER_ACCESS_2024"
        };

        // Application variables
        let projects = JSON.parse(localStorage.getItem('workPlanner') || '[]');
        let editingId = null;
        let customSettings = JSON.parse(localStorage.getItem('plannerSettings') || '{}');
        
        // User activity tracking
        function trackUserActivity(action, details = {}) {
            const activity = {
                id: Date.now(),
                username: currentUser,
                action: action,
                details: details,
                timestamp: new Date().toISOString(),
                userAgent: navigator.userAgent,
                ip: 'Local', // Karena ini aplikasi lokal
                sessionId: sessionStorage.getItem('sessionId') || generateSessionId()
            };
            
            let activities = JSON.parse(localStorage.getItem('userActivities') || '[]');
            activities.push(activity);
            
            // Simpan maksimal 1000 aktivitas terakhir
            if (activities.length > 1000) {
                activities = activities.slice(-1000);
            }
            
            localStorage.setItem('userActivities', JSON.stringify(activities));
        }
        
        function generateSessionId() {
            const sessionId = 'session_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
            sessionStorage.setItem('sessionId', sessionId);
            return sessionId;
        }
        
        // Track user statistics
        function updateUserStats() {
            const stats = JSON.parse(localStorage.getItem('userStats') || '{}');
            const today = new Date().toDateString();
            
            if (!stats[currentUser]) {
                stats[currentUser] = {
                    totalLogins: 0,
                    lastLogin: null,
                    firstLogin: new Date().toISOString(),
                    totalProjects: 0,
                    totalTimeSpent: 0,
                    dailyActivity: {}
                };
            }
            
            stats[currentUser].totalLogins++;
            stats[currentUser].lastLogin = new Date().toISOString();
            
            if (!stats[currentUser].dailyActivity[today]) {
                stats[currentUser].dailyActivity[today] = {
                    logins: 0,
                    projectsCreated: 0,
                    projectsCompleted: 0,
                    timeSpent: 0
                };
            }
            
            stats[currentUser].dailyActivity[today].logins++;
            
            localStorage.setItem('userStats', JSON.stringify(stats));
        }
        
        // Language translations
        const translations = {
            id: {
                // Login Screen
                welcomeTitle: 'Selamat Datang',
                welcomeSubtitle: 'Masuk ke Planner Pekerjaan Bulanan',
                loginTab: 'üîë Masuk',
                registerTab: 'üìù Daftar',
                defaultCredentials: 'Kredensial Default:',
                username: 'Username',
                password: 'Password',
                usernameLabel: 'üë§ Username',
                passwordLabel: 'üîë Password',
                usernamePlaceholder: 'Masukkan username',
                passwordPlaceholder: 'Masukkan password',
                rememberMe: 'üíæ Ingat saya',
                loginError: 'Username atau password salah!',
                loginButton: 'üöÄ Masuk ke Dashboard',
                loginLoading: '‚è≥ Memproses...',
                createNewAccount: 'Buat Akun Baru:',
                registerDescription: 'Daftarkan akun Anda untuk menggunakan aplikasi planner pekerjaan',
                dataSecurityNote: 'üîí Data Anda aman dan tersimpan lokal di browser',
                
                // Header
                title: 'üìÖ Planner Pekerjaan Bulanan',
                subtitle: 'Kelola proyek dan tugas Anda dengan mudah',
                settings: '‚öôÔ∏è Pengaturan',
                exportExcel: 'üìä Ekspor ke Excel',
                addProject: '‚ûï Tambah Proyek',
                
                // Stats
                totalProjects: 'Total Proyek',
                highPriority: 'Prioritas Tinggi',
                completed: 'Selesai',
                totalValue: 'Total Nilai',
                
                // Filters
                searchPlaceholder: 'üîç Cari proyek...',
                allPriorities: 'Semua Prioritas',
                allStatuses: 'Semua Status',
                high: 'Tinggi',
                medium: 'Sedang',
                low: 'Rendah',
                pending: 'Menunggu',
                progress: 'Dalam Proses',
                completed: 'Selesai',
                
                // Project List
                projectList: 'Daftar Proyek',
                noProjects: 'Belum ada proyek. Klik "Tambah Proyek" untuk memulai!',
                client: 'Klien',
                platform: 'Platform',
                edit: '‚úèÔ∏è Edit',
                delete: 'üóëÔ∏è Hapus',
                
                // Modal
                addNewProject: 'Tambah Proyek Baru',
                editProject: 'Edit Proyek',
                projectName: 'Nama Proyek',
                clientName: 'Nama Klien',
                selectPlatform: 'Pilih Platform',
                description: 'Deskripsi',
                startDate: 'Tanggal Mulai',
                endDate: 'Tanggal Selesai',
                priority: 'Prioritas',
                status: 'Status',
                projectPrice: 'Harga Proyek',
                cancel: 'Batal',
                save: 'Simpan',
                
                // Settings Modal
                displaySettings: '‚öôÔ∏è Pengaturan Tampilan',
                language: 'üåê Bahasa',
                selectLanguage: 'Pilih Bahasa',
                header: 'üìù Header',
                resetDefault: 'üîÑ Reset ke Default',
                
                // Platforms
                fiverr: 'Fiverr',
                upwork: 'Upwork',
                facebook: 'Facebook',
                tiktok: 'TikTok',
                instagram: 'Instagram',
                linkedin: 'LinkedIn',
                freelancer: 'Freelancer',
                directClient: 'Klien Langsung',
                referral: 'Rujukan',
                other: 'Lainnya',
                
                // Account Management
                accountManagement: 'üë• Kelola Akun',
                accountInfo: 'üìä Informasi Akun Aktif',
                activeUsername: 'üë§ Username Aktif',
                sessionType: 'üîí Tipe Sesi',
                totalRegisteredUsers: 'üìä Total Akun Terdaftar',
                allAccountsList: 'üìã Daftar Semua Akun',
                updateCredentials: 'üîê Update Kredensial Akun Aktif',
                newUsername: 'Username Baru',
                newPassword: 'Password Baru',
                confirmPassword: 'Konfirmasi Password',
                updateCredentialsBtn: 'üîê Update Kredensial Login',
                onlyAdminAvailable: 'Hanya akun admin default yang tersedia',
                activeAccount: 'Aktif',
                createdOn: 'Dibuat',
                deleteAccount: 'Hapus Akun',
                close: 'Tutup',
                
                // Invoice Features
                printReportInvoice: 'üñ®Ô∏è Cetak Laporan & Invoice',
                printType: 'Jenis Cetak',
                projectReport: 'üìä Laporan Proyek',
                invoiceNote: 'üßæ Invoice/Nota',
                invoiceSettings: '‚öôÔ∏è Pengaturan Invoice',
                selectProjectInvoice: 'Pilih Proyek untuk Invoice',
                selectProject: 'Pilih Proyek...',
                paperFormat: 'Format Kertas',
                invoiceNumber: 'Nomor Invoice',
                invoiceDate: 'Tanggal Invoice',
                dueDate: 'Jatuh Tempo',
                companyInfo: 'üè¢ Info Perusahaan',
                companyName: 'Nama Perusahaan',
                address: 'Alamat',
                phone: 'Telepon',
                email: 'Email',
                website: 'Website',
                paymentOptions: 'üí∞ Opsi Pembayaran',
                taxPPN: 'PPN (%)',
                discount: 'Diskon (%)',
                additionalNotes: 'Catatan Tambahan',
                bankInfo: 'Info Rekening Bank',
                printInvoice: 'üßæ Cetak Invoice',
                
                // Paper formats
                paperA4: 'üìÑ A4 (210 x 297 mm)',
                paperA5: 'üìÑ A5 (148 x 210 mm)',
                paperA6: 'üìÑ A6 (105 x 148 mm)',
                paperLetter: 'üìÑ Letter (216 x 279 mm)',
                paperLegal: 'üìÑ Legal (216 x 356 mm)',
                paperReceipt: 'üßæ Receipt (80mm)',
                
                // Validation messages
                allFieldsRequired: 'Semua field harus diisi!',
                usernameMinLength: 'Username minimal 3 karakter!',
                passwordMinLength: 'Password minimal 6 karakter!',
                passwordMismatch: 'Konfirmasi password tidak cocok!',
                confirmUpdateCredentials: 'Apakah Anda yakin ingin mengubah kredensial login?\n\nPastikan Anda mengingat username dan password baru!',
                credentialsUpdated: 'Kredensial berhasil diperbarui!\n\nGunakan username dan password baru untuk login selanjutnya.',
                confirmDeleteAccount: 'Apakah Anda yakin ingin menghapus akun',
                accountDeleted: 'berhasil dihapus!',
                selectProjectFirst: 'Pilih proyek untuk invoice terlebih dahulu!',
                projectNotFound: 'Proyek tidak ditemukan!',
                
                // Welcome message
                welcomeGreeting: 'Hai',
                welcomeMessage: 'selamat datang kembali!',
                
                // Messages
                deleteConfirm: 'Apakah Anda yakin ingin menghapus proyek ini?',
                resetConfirm: 'Apakah Anda yakin ingin mereset semua pengaturan ke default?',
                noDataExport: 'Tidak ada data untuk diekspor!',
                noMatchingProjects: 'Tidak ada proyek yang sesuai dengan filter.',
                dashboardStats: 'üìä Statistik Dashboard',
                
                // Print translations
                printReport: 'üñ®Ô∏è Cetak Laporan',
                reportType: 'Jenis Laporan',
                allProjects: 'Semua Proyek',
                completedOnly: 'Hanya yang Selesai',
                pendingOnly: 'Hanya yang Pending',
                progressOnly: 'Hanya yang Dalam Proses',
                highPriorityOnly: 'Hanya Prioritas Tinggi',
                printOptions: 'Opsi Cetak',
                includeStatistics: 'Sertakan Statistik',
                includeDescriptions: 'Sertakan Deskripsi',
                includePrices: 'Sertakan Harga',
                print: 'üñ®Ô∏è Cetak',
                saveAsPDF: 'üìÑ Simpan PDF',
                saveAsPNG: 'üñºÔ∏è Simpan PNG',
                editInvoice: '‚úèÔ∏è Edit Nota',
                
                // Invoice Editor
                editInvoiceTitle: '‚úèÔ∏è Edit Invoice/Nota',
                editorPanel: 'üé® Editor',
                companyLogo: 'üè¢ Logo Perusahaan',
                uploadLogo: 'üìÅ Upload Logo',
                invoiceTitleLabel: 'üìù Judul Invoice',
                headerColor: 'üé® Warna Header',
                companyInfoEditor: 'üè¢ Info Perusahaan',
                companyNamePlaceholder: 'Nama Perusahaan',
                companyAddressPlaceholder: 'Alamat Perusahaan',
                phonePlaceholder: 'Telepon',
                emailPlaceholder: 'Email',
                signature: '‚úçÔ∏è Tanda Tangan',
                uploadSignature: 'üìÅ Upload Tanda Tangan',
                signerNamePlaceholder: 'Nama Penandatangan',
                signerTitlePlaceholder: 'Jabatan',
                footerLabel: 'üìÑ Footer',
                footerPlaceholder: 'Terima kasih atas kepercayaan Anda!',
                previewPanel: 'üëÅÔ∏è Preview',
                printBtn: 'üñ®Ô∏è Cetak',
                pdfBtn: 'üìÑ PDF',
                pngBtn: 'üñºÔ∏è PNG',
                saveTemplate: 'üíæ Simpan Template'
            },
            en: {
                // Login Screen
                welcomeTitle: 'Welcome',
                welcomeSubtitle: 'Login to Monthly Work Planner',
                loginTab: 'üîë Login',
                registerTab: 'üìù Register',
                defaultCredentials: 'Default Credentials:',
                username: 'Username',
                password: 'Password',
                usernameLabel: 'üë§ Username',
                passwordLabel: 'üîë Password',
                usernamePlaceholder: 'Enter username',
                passwordPlaceholder: 'Enter password',
                rememberMe: 'üíæ Remember me',
                loginError: 'Invalid username or password!',
                loginButton: 'üöÄ Login to Dashboard',
                loginLoading: '‚è≥ Processing...',
                createNewAccount: 'Create New Account:',
                registerDescription: 'Register your account to use the work planner application',
                dataSecurityNote: 'üîí Your data is safe and stored locally in browser',
                
                // Header
                title: 'üìÖ Monthly Work Planner',
                subtitle: 'Manage your projects and tasks with ease',
                settings: '‚öôÔ∏è Settings',
                exportExcel: 'üìä Export to Excel',
                addProject: '‚ûï Add Project',
                
                // Stats
                totalProjects: 'Total Projects',
                highPriority: 'High Priority',
                completed: 'Completed',
                totalValue: 'Total Value',
                
                // Filters
                searchPlaceholder: 'üîç Search projects...',
                allPriorities: 'All Priorities',
                allStatuses: 'All Statuses',
                high: 'High',
                medium: 'Medium',
                low: 'Low',
                pending: 'Pending',
                progress: 'In Progress',
                completed: 'Completed',
                
                // Project List
                projectList: 'Project List',
                noProjects: 'No projects yet. Click "Add Project" to get started!',
                client: 'Client',
                platform: 'Platform',
                edit: '‚úèÔ∏è Edit',
                delete: 'üóëÔ∏è Delete',
                
                // Modal
                addNewProject: 'Add New Project',
                editProject: 'Edit Project',
                projectName: 'Project Name',
                clientName: 'Client Name',
                selectPlatform: 'Select Platform',
                description: 'Description',
                startDate: 'Start Date',
                endDate: 'End Date',
                priority: 'Priority',
                status: 'Status',
                projectPrice: 'Project Price',
                cancel: 'Cancel',
                save: 'Save',
                
                // Settings Modal
                displaySettings: '‚öôÔ∏è Display Settings',
                language: 'üåê Language',
                selectLanguage: 'Select Language',
                header: 'üìù Header',
                resetDefault: 'üîÑ Reset to Default',
                
                // Platforms
                fiverr: 'Fiverr',
                upwork: 'Upwork',
                facebook: 'Facebook',
                tiktok: 'TikTok',
                instagram: 'Instagram',
                linkedin: 'LinkedIn',
                freelancer: 'Freelancer',
                directClient: 'Direct Client',
                referral: 'Referral',
                other: 'Other',
                
                // Account Management
                accountManagement: 'üë• Account Management',
                accountInfo: 'üìä Active Account Information',
                activeUsername: 'üë§ Active Username',
                sessionType: 'üîí Session Type',
                totalRegisteredUsers: 'üìä Total Registered Accounts',
                allAccountsList: 'üìã All Accounts List',
                updateCredentials: 'üîê Update Active Account Credentials',
                newUsername: 'New Username',
                newPassword: 'New Password',
                confirmPassword: 'Confirm Password',
                updateCredentialsBtn: 'üîê Update Login Credentials',
                onlyAdminAvailable: 'Only default admin account available',
                activeAccount: 'Active',
                createdOn: 'Created',
                deleteAccount: 'Delete Account',
                close: 'Close',
                
                // Invoice Features
                printReportInvoice: 'üñ®Ô∏è Print Report & Invoice',
                printType: 'Print Type',
                projectReport: 'üìä Project Report',
                invoiceNote: 'üßæ Invoice/Receipt',
                invoiceSettings: '‚öôÔ∏è Invoice Settings',
                selectProjectInvoice: 'Select Project for Invoice',
                selectProject: 'Select Project...',
                paperFormat: 'Paper Format',
                invoiceNumber: 'Invoice Number',
                invoiceDate: 'Invoice Date',
                dueDate: 'Due Date',
                companyInfo: 'üè¢ Company Information',
                companyName: 'Company Name',
                address: 'Address',
                phone: 'Phone',
                email: 'Email',
                website: 'Website',
                paymentOptions: 'üí∞ Payment Options',
                taxPPN: 'Tax (%)',
                discount: 'Discount (%)',
                additionalNotes: 'Additional Notes',
                bankInfo: 'Bank Account Information',
                printInvoice: 'üßæ Print Invoice',
                
                // Paper formats
                paperA4: 'üìÑ A4 (210 x 297 mm)',
                paperA5: 'üìÑ A5 (148 x 210 mm)',
                paperA6: 'üìÑ A6 (105 x 148 mm)',
                paperLetter: 'üìÑ Letter (216 x 279 mm)',
                paperLegal: 'üìÑ Legal (216 x 356 mm)',
                paperReceipt: 'üßæ Receipt (80mm)',
                
                // Validation messages
                allFieldsRequired: 'All fields must be filled!',
                usernameMinLength: 'Username minimum 3 characters!',
                passwordMinLength: 'Password minimum 6 characters!',
                passwordMismatch: 'Password confirmation does not match!',
                confirmUpdateCredentials: 'Are you sure you want to change login credentials?\n\nMake sure you remember the new username and password!',
                credentialsUpdated: 'Credentials successfully updated!\n\nUse the new username and password for next login.',
                confirmDeleteAccount: 'Are you sure you want to delete account',
                accountDeleted: 'successfully deleted!',
                selectProjectFirst: 'Please select a project for invoice first!',
                projectNotFound: 'Project not found!',
                
                // Welcome message
                welcomeGreeting: 'Hello',
                welcomeMessage: 'welcome back!',
                
                // Messages
                deleteConfirm: 'Are you sure you want to delete this project?',
                resetConfirm: 'Are you sure you want to reset all settings to default?',
                noDataExport: 'No data to export!',
                noMatchingProjects: 'No projects match the current filter.',
                dashboardStats: 'üìä Dashboard Statistics',
                
                // Print translations
                printReport: 'üñ®Ô∏è Print Report',
                reportType: 'Report Type',
                allProjects: 'All Projects',
                completedOnly: 'Completed Only',
                pendingOnly: 'Pending Only',
                progressOnly: 'In Progress Only',
                highPriorityOnly: 'High Priority Only',
                printOptions: 'Print Options',
                includeStatistics: 'Include Statistics',
                includeDescriptions: 'Include Descriptions',
                includePrices: 'Include Prices',
                print: 'üñ®Ô∏è Print',
                saveAsPDF: 'üìÑ Save PDF',
                saveAsPNG: 'üñºÔ∏è Save PNG',
                editInvoice: '‚úèÔ∏è Edit Invoice',
                
                // Invoice Editor
                editInvoiceTitle: '‚úèÔ∏è Edit Invoice/Receipt',
                editorPanel: 'üé® Editor',
                companyLogo: 'üè¢ Company Logo',
                uploadLogo: 'üìÅ Upload Logo',
                invoiceTitleLabel: 'üìù Invoice Title',
                headerColor: 'üé® Header Color',
                companyInfoEditor: 'üè¢ Company Information',
                companyNamePlaceholder: 'Company Name',
                companyAddressPlaceholder: 'Company Address',
                phonePlaceholder: 'Phone',
                emailPlaceholder: 'Email',
                signature: '‚úçÔ∏è Signature',
                uploadSignature: 'üìÅ Upload Signature',
                signerNamePlaceholder: 'Signer Name',
                signerTitlePlaceholder: 'Position',
                footerLabel: 'üìÑ Footer',
                footerPlaceholder: 'Thank you for your trust!',
                previewPanel: 'üëÅÔ∏è Preview',
                printBtn: 'üñ®Ô∏è Print',
                pdfBtn: 'üìÑ PDF',
                pngBtn: 'üñºÔ∏è PNG',
                saveTemplate: 'üíæ Save Template'
            },
            ja: {
                // Login Screen
                welcomeTitle: '„Çà„ÅÜ„Åì„Åù',
                welcomeSubtitle: 'ÊúàÊ¨°‰ΩúÊ•≠„Éó„É©„É≥„Éä„Éº„Å´„É≠„Ç∞„Ç§„É≥',
                loginTab: 'üîë „É≠„Ç∞„Ç§„É≥',
                registerTab: 'üìù ÁôªÈå≤',
                defaultCredentials: '„Éá„Éï„Ç©„É´„ÉàË™çË®ºÊÉÖÂ†±:',
                username: '„É¶„Éº„Ç∂„ÉºÂêç',
                password: '„Éë„Çπ„ÉØ„Éº„Éâ',
                usernameLabel: 'üë§ „É¶„Éº„Ç∂„ÉºÂêç',
                passwordLabel: 'üîë „Éë„Çπ„ÉØ„Éº„Éâ',
                usernamePlaceholder: '„É¶„Éº„Ç∂„ÉºÂêç„ÇíÂÖ•Âäõ',
                passwordPlaceholder: '„Éë„Çπ„ÉØ„Éº„Éâ„ÇíÂÖ•Âäõ',
                rememberMe: 'üíæ „É≠„Ç∞„Ç§„É≥Áä∂ÊÖã„Çí‰øùÊåÅ',
                loginError: '„É¶„Éº„Ç∂„ÉºÂêç„Åæ„Åü„ÅØ„Éë„Çπ„ÉØ„Éº„Éâ„ÅåÈñìÈÅï„Å£„Å¶„ÅÑ„Åæ„ÅôÔºÅ',
                loginButton: 'üöÄ „ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ„Å´„É≠„Ç∞„Ç§„É≥',
                loginLoading: '‚è≥ Âá¶ÁêÜ‰∏≠...',
                createNewAccount: 'Êñ∞„Åó„ÅÑ„Ç¢„Ç´„Ç¶„É≥„Éà„Çí‰ΩúÊàê:',
                registerDescription: '‰ΩúÊ•≠„Éó„É©„É≥„Éä„Éº„Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥„Çí‰ΩøÁî®„Åô„Çã„Åü„ÇÅ„Å´„Ç¢„Ç´„Ç¶„É≥„Éà„ÇíÁôªÈå≤„Åó„Å¶„Åè„Å†„Åï„ÅÑ',
                dataSecurityNote: 'üîí „Éá„Éº„Çø„ÅØÂÆâÂÖ®„Åß„Éñ„É©„Ç¶„Ç∂„Å´„É≠„Éº„Ç´„É´‰øùÂ≠ò„Åï„Çå„Åæ„Åô',
                
                // Header
                title: 'üìÖ ÊúàÊ¨°‰ΩúÊ•≠„Éó„É©„É≥„Éä„Éº',
                subtitle: '„Éó„É≠„Ç∏„Çß„ÇØ„Éà„Å®„Çø„Çπ„ÇØ„ÇíÁ∞°Âçò„Å´ÁÆ°ÁêÜ',
                settings: '‚öôÔ∏è Ë®≠ÂÆö',
                exportExcel: 'üìä Excel„Å´„Ç®„ÇØ„Çπ„Éù„Éº„Éà',
                addProject: '‚ûï „Éó„É≠„Ç∏„Çß„ÇØ„ÉàËøΩÂä†',
                
                // Stats
                totalProjects: 'Á∑è„Éó„É≠„Ç∏„Çß„ÇØ„ÉàÊï∞',
                highPriority: 'È´òÂÑ™ÂÖàÂ∫¶',
                completed: 'ÂÆå‰∫Ü',
                totalValue: 'Á∑è‰æ°ÂÄ§',
                
                // Filters
                searchPlaceholder: 'üîç „Éó„É≠„Ç∏„Çß„ÇØ„Éà„ÇíÊ§úÁ¥¢...',
                allPriorities: '„Åô„Åπ„Å¶„ÅÆÂÑ™ÂÖàÂ∫¶',
                allStatuses: '„Åô„Åπ„Å¶„ÅÆ„Çπ„ÉÜ„Éº„Çø„Çπ',
                high: 'È´ò',
                medium: '‰∏≠',
                low: '‰Ωé',
                pending: '‰øùÁïô‰∏≠',
                progress: 'ÈÄ≤Ë°å‰∏≠',
                completed: 'ÂÆå‰∫Ü',
                
                // Project List
                projectList: '„Éó„É≠„Ç∏„Çß„ÇØ„Éà‰∏ÄË¶ß',
                noProjects: '„Åæ„Å†„Éó„É≠„Ç∏„Çß„ÇØ„Éà„Åå„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ„Äå„Éó„É≠„Ç∏„Çß„ÇØ„ÉàËøΩÂä†„Äç„Çí„ÇØ„É™„ÉÉ„ÇØ„Åó„Å¶ÈñãÂßã„Åó„Å¶„Åè„Å†„Åï„ÅÑÔºÅ',
                client: '„ÇØ„É©„Ç§„Ç¢„É≥„Éà',
                platform: '„Éó„É©„ÉÉ„Éà„Éï„Ç©„Éº„É†',
                edit: '‚úèÔ∏è Á∑®ÈõÜ',
                delete: 'üóëÔ∏è ÂâäÈô§',
                
                // Modal
                addNewProject: 'Êñ∞„Åó„ÅÑ„Éó„É≠„Ç∏„Çß„ÇØ„Éà„ÇíËøΩÂä†',
                editProject: '„Éó„É≠„Ç∏„Çß„ÇØ„Éà„ÇíÁ∑®ÈõÜ',
                projectName: '„Éó„É≠„Ç∏„Çß„ÇØ„ÉàÂêç',
                clientName: '„ÇØ„É©„Ç§„Ç¢„É≥„ÉàÂêç',
                selectPlatform: '„Éó„É©„ÉÉ„Éà„Éï„Ç©„Éº„É†„ÇíÈÅ∏Êäû',
                description: 'Ë™¨Êòé',
                startDate: 'ÈñãÂßãÊó•',
                endDate: 'ÁµÇ‰∫ÜÊó•',
                priority: 'ÂÑ™ÂÖàÂ∫¶',
                status: '„Çπ„ÉÜ„Éº„Çø„Çπ',
                projectPrice: '„Éó„É≠„Ç∏„Çß„ÇØ„Éà‰æ°Ê†º',
                cancel: '„Ç≠„É£„É≥„Çª„É´',
                save: '‰øùÂ≠ò',
                
                // Settings Modal
                displaySettings: '‚öôÔ∏è Ë°®Á§∫Ë®≠ÂÆö',
                language: 'üåê Ë®ÄË™û',
                selectLanguage: 'Ë®ÄË™û„ÇíÈÅ∏Êäû',
                header: 'üìù „Éò„ÉÉ„ÉÄ„Éº',
                resetDefault: 'üîÑ „Éá„Éï„Ç©„É´„Éà„Å´„É™„Çª„ÉÉ„Éà',
                
                // Platforms
                fiverr: 'Fiverr',
                upwork: 'Upwork',
                facebook: 'Facebook',
                tiktok: 'TikTok',
                instagram: 'Instagram',
                linkedin: 'LinkedIn',
                freelancer: 'Freelancer',
                directClient: 'Áõ¥Êé•„ÇØ„É©„Ç§„Ç¢„É≥„Éà',
                referral: 'Á¥π‰ªã',
                other: '„Åù„ÅÆ‰ªñ',
                
                // Account Management
                accountManagement: 'üë• „Ç¢„Ç´„Ç¶„É≥„ÉàÁÆ°ÁêÜ',
                accountInfo: 'üìä „Ç¢„ÇØ„ÉÜ„Ç£„Éñ„Ç¢„Ç´„Ç¶„É≥„ÉàÊÉÖÂ†±',
                activeUsername: 'üë§ „Ç¢„ÇØ„ÉÜ„Ç£„Éñ„É¶„Éº„Ç∂„ÉºÂêç',
                sessionType: 'üîí „Çª„ÉÉ„Ç∑„Éß„É≥„Çø„Ç§„Éó',
                totalRegisteredUsers: 'üìä ÁôªÈå≤„Ç¢„Ç´„Ç¶„É≥„ÉàÁ∑èÊï∞',
                allAccountsList: 'üìã ÂÖ®„Ç¢„Ç´„Ç¶„É≥„Éà‰∏ÄË¶ß',
                updateCredentials: 'üîê „Ç¢„ÇØ„ÉÜ„Ç£„Éñ„Ç¢„Ç´„Ç¶„É≥„ÉàË™çË®ºÊÉÖÂ†±Êõ¥Êñ∞',
                newUsername: 'Êñ∞„Åó„ÅÑ„É¶„Éº„Ç∂„ÉºÂêç',
                newPassword: 'Êñ∞„Åó„ÅÑ„Éë„Çπ„ÉØ„Éº„Éâ',
                confirmPassword: '„Éë„Çπ„ÉØ„Éº„ÉâÁ¢∫Ë™ç',
                updateCredentialsBtn: 'üîê „É≠„Ç∞„Ç§„É≥Ë™çË®ºÊÉÖÂ†±„ÇíÊõ¥Êñ∞',
                onlyAdminAvailable: '„Éá„Éï„Ç©„É´„ÉàÁÆ°ÁêÜËÄÖ„Ç¢„Ç´„Ç¶„É≥„Éà„ÅÆ„ÅøÂà©Áî®ÂèØËÉΩ',
                activeAccount: '„Ç¢„ÇØ„ÉÜ„Ç£„Éñ',
                createdOn: '‰ΩúÊàêÊó•',
                deleteAccount: '„Ç¢„Ç´„Ç¶„É≥„ÉàÂâäÈô§',
                close: 'Èñâ„Åò„Çã',
                
                // Invoice Features
                printReportInvoice: 'üñ®Ô∏è „É¨„Éù„Éº„Éà„ÉªË´ãÊ±ÇÊõ∏Âç∞Âà∑',
                printType: 'Âç∞Âà∑„Çø„Ç§„Éó',
                projectReport: 'üìä „Éó„É≠„Ç∏„Çß„ÇØ„Éà„É¨„Éù„Éº„Éà',
                invoiceNote: 'üßæ Ë´ãÊ±ÇÊõ∏/È†òÂèéÊõ∏',
                invoiceSettings: '‚öôÔ∏è Ë´ãÊ±ÇÊõ∏Ë®≠ÂÆö',
                selectProjectInvoice: 'Ë´ãÊ±ÇÊõ∏Áî®„Éó„É≠„Ç∏„Çß„ÇØ„ÉàÈÅ∏Êäû',
                selectProject: '„Éó„É≠„Ç∏„Çß„ÇØ„Éà„ÇíÈÅ∏Êäû...',
                paperFormat: 'Áî®Á¥ô„Éï„Ç©„Éº„Éû„ÉÉ„Éà',
                invoiceNumber: 'Ë´ãÊ±ÇÊõ∏Áï™Âè∑',
                invoiceDate: 'Ë´ãÊ±ÇÊõ∏Êó•‰ªò',
                dueDate: 'ÊîØÊâïÊúüÈôê',
                companyInfo: 'üè¢ ‰ºöÁ§æÊÉÖÂ†±',
                companyName: '‰ºöÁ§æÂêç',
                address: '‰ΩèÊâÄ',
                phone: 'ÈõªË©±Áï™Âè∑',
                email: '„É°„Éº„É´„Ç¢„Éâ„É¨„Çπ',
                website: '„Ç¶„Çß„Éñ„Çµ„Ç§„Éà',
                paymentOptions: 'üí∞ ÊîØÊâï„ÅÑ„Ç™„Éó„Ç∑„Éß„É≥',
                taxPPN: 'Á®éÈáë (%)',
                discount: 'Ââ≤Âºï (%)',
                additionalNotes: 'ËøΩÂä†„É°„É¢',
                bankInfo: 'ÈäÄË°åÂè£Â∫ßÊÉÖÂ†±',
                printInvoice: 'üßæ Ë´ãÊ±ÇÊõ∏Âç∞Âà∑',
                
                // Paper formats
                paperA4: 'üìÑ A4 (210 x 297 mm)',
                paperA5: 'üìÑ A5 (148 x 210 mm)',
                paperA6: 'üìÑ A6 (105 x 148 mm)',
                paperLetter: 'üìÑ Letter (216 x 279 mm)',
                paperLegal: 'üìÑ Legal (216 x 356 mm)',
                paperReceipt: 'üßæ Receipt (80mm)',
                
                // Validation messages
                allFieldsRequired: '„Åô„Åπ„Å¶„ÅÆ„Éï„Ç£„Éº„É´„Éâ„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑÔºÅ',
                usernameMinLength: '„É¶„Éº„Ç∂„ÉºÂêç„ÅØÊúÄ‰Ωé3ÊñáÂ≠ó„Åß„ÅôÔºÅ',
                passwordMinLength: '„Éë„Çπ„ÉØ„Éº„Éâ„ÅØÊúÄ‰Ωé6ÊñáÂ≠ó„Åß„ÅôÔºÅ',
                passwordMismatch: '„Éë„Çπ„ÉØ„Éº„ÉâÁ¢∫Ë™ç„Åå‰∏ÄËá¥„Åó„Åæ„Åõ„ÇìÔºÅ',
                confirmUpdateCredentials: '„É≠„Ç∞„Ç§„É≥Ë™çË®ºÊÉÖÂ†±„ÇíÂ§âÊõ¥„Åó„Å¶„ÇÇ„Çà„Çç„Åó„ÅÑ„Åß„Åô„ÅãÔºü\n\nÊñ∞„Åó„ÅÑ„É¶„Éº„Ç∂„ÉºÂêç„Å®„Éë„Çπ„ÉØ„Éº„Éâ„ÇíË¶ö„Åà„Å¶„Åä„ÅÑ„Å¶„Åè„Å†„Åï„ÅÑÔºÅ',
                credentialsUpdated: 'Ë™çË®ºÊÉÖÂ†±„ÅåÊ≠£Â∏∏„Å´Êõ¥Êñ∞„Åï„Çå„Åæ„Åó„ÅüÔºÅ\n\nÊ¨°Âõû„É≠„Ç∞„Ç§„É≥ÊôÇ„ÅØÊñ∞„Åó„ÅÑ„É¶„Éº„Ç∂„ÉºÂêç„Å®„Éë„Çπ„ÉØ„Éº„Éâ„Çí‰ΩøÁî®„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ',
                confirmDeleteAccount: '„Ç¢„Ç´„Ç¶„É≥„Éà„ÇíÂâäÈô§„Åó„Å¶„ÇÇ„Çà„Çç„Åó„ÅÑ„Åß„Åô„Åã',
                accountDeleted: '„ÅåÊ≠£Â∏∏„Å´ÂâäÈô§„Åï„Çå„Åæ„Åó„ÅüÔºÅ',
                selectProjectFirst: 'ÊúÄÂàù„Å´Ë´ãÊ±ÇÊõ∏Áî®„ÅÆ„Éó„É≠„Ç∏„Çß„ÇØ„Éà„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑÔºÅ',
                projectNotFound: '„Éó„É≠„Ç∏„Çß„ÇØ„Éà„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„ÇìÔºÅ',
                
                // Welcome message
                welcomeGreeting: '„Åì„Çì„Å´„Å°„ÅØ',
                welcomeMessage: '„Åä„Åã„Åà„Çä„Å™„Åï„ÅÑÔºÅ',
                
                // Messages
                deleteConfirm: '„Åì„ÅÆ„Éó„É≠„Ç∏„Çß„ÇØ„Éà„ÇíÂâäÈô§„Åó„Å¶„ÇÇ„Çà„Çç„Åó„ÅÑ„Åß„Åô„ÅãÔºü',
                resetConfirm: '„Åô„Åπ„Å¶„ÅÆË®≠ÂÆö„Çí„Éá„Éï„Ç©„É´„Éà„Å´„É™„Çª„ÉÉ„Éà„Åó„Å¶„ÇÇ„Çà„Çç„Åó„ÅÑ„Åß„Åô„ÅãÔºü',
                noDataExport: '„Ç®„ÇØ„Çπ„Éù„Éº„Éà„Åô„Çã„Éá„Éº„Çø„Åå„ÅÇ„Çä„Åæ„Åõ„ÇìÔºÅ',
                noMatchingProjects: 'ÁèæÂú®„ÅÆ„Éï„Ç£„É´„Çø„Éº„Å´‰∏ÄËá¥„Åô„Çã„Éó„É≠„Ç∏„Çß„ÇØ„Éà„Åå„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ',
                dashboardStats: 'üìä „ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„ÉâÁµ±Ë®à',
                
                // Print translations
                printReport: 'üñ®Ô∏è „É¨„Éù„Éº„ÉàÂç∞Âà∑',
                reportType: '„É¨„Éù„Éº„Éà„Çø„Ç§„Éó',
                allProjects: '„Åô„Åπ„Å¶„ÅÆ„Éó„É≠„Ç∏„Çß„ÇØ„Éà',
                completedOnly: 'ÂÆå‰∫Ü„ÅÆ„Åø',
                pendingOnly: '‰øùÁïô‰∏≠„ÅÆ„Åø',
                progressOnly: 'ÈÄ≤Ë°å‰∏≠„ÅÆ„Åø',
                highPriorityOnly: 'È´òÂÑ™ÂÖàÂ∫¶„ÅÆ„Åø',
                printOptions: 'Âç∞Âà∑„Ç™„Éó„Ç∑„Éß„É≥',
                includeStatistics: 'Áµ±Ë®à„ÇíÂê´„ÇÅ„Çã',
                includeDescriptions: 'Ë™¨Êòé„ÇíÂê´„ÇÅ„Çã',
                includePrices: '‰æ°Ê†º„ÇíÂê´„ÇÅ„Çã',
                print: 'üñ®Ô∏è Âç∞Âà∑',
                saveAsPDF: 'üìÑ PDF‰øùÂ≠ò',
                saveAsPNG: 'üñºÔ∏è PNG‰øùÂ≠ò',
                editInvoice: '‚úèÔ∏è Ë´ãÊ±ÇÊõ∏Á∑®ÈõÜ',
                
                // Invoice Editor
                editInvoiceTitle: '‚úèÔ∏è Ë´ãÊ±ÇÊõ∏/È†òÂèéÊõ∏Á∑®ÈõÜ',
                editorPanel: 'üé® „Ç®„Éá„Ç£„Çø„Éº',
                companyLogo: 'üè¢ ‰ºöÁ§æ„É≠„Ç¥',
                uploadLogo: 'üìÅ „É≠„Ç¥„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ',
                invoiceTitleLabel: 'üìù Ë´ãÊ±ÇÊõ∏„Çø„Ç§„Éà„É´',
                headerColor: 'üé® „Éò„ÉÉ„ÉÄ„ÉºËâ≤',
                companyInfoEditor: 'üè¢ ‰ºöÁ§æÊÉÖÂ†±',
                companyNamePlaceholder: '‰ºöÁ§æÂêç',
                companyAddressPlaceholder: '‰ºöÁ§æ‰ΩèÊâÄ',
                phonePlaceholder: 'ÈõªË©±Áï™Âè∑',
                emailPlaceholder: '„É°„Éº„É´„Ç¢„Éâ„É¨„Çπ',
                signature: '‚úçÔ∏è ÁΩ≤Âêç',
                uploadSignature: 'üìÅ ÁΩ≤Âêç„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ',
                signerNamePlaceholder: 'ÁΩ≤ÂêçËÄÖÂêç',
                signerTitlePlaceholder: 'ÂΩπËÅ∑',
                footerLabel: 'üìÑ „Éï„ÉÉ„Çø„Éº',
                footerPlaceholder: '„Åî‰ø°È†º„ÅÑ„Åü„Å†„Åç„ÅÇ„Çä„Åå„Å®„ÅÜ„Åî„Åñ„ÅÑ„Åæ„ÅôÔºÅ',
                previewPanel: 'üëÅÔ∏è „Éó„É¨„Éì„É•„Éº',
                printBtn: 'üñ®Ô∏è Âç∞Âà∑',
                pdfBtn: 'üìÑ PDF',
                pngBtn: 'üñºÔ∏è PNG',
                saveTemplate: 'üíæ „ÉÜ„É≥„Éó„É¨„Éº„Éà‰øùÂ≠ò'
            },
            ko: {
                // Login Screen
                welcomeTitle: 'ÌôòÏòÅÌï©ÎãàÎã§',
                welcomeSubtitle: 'ÏõîÍ∞Ñ ÏóÖÎ¨¥ ÌîåÎûòÎÑàÏóê Î°úÍ∑∏Ïù∏',
                loginTab: 'üîë Î°úÍ∑∏Ïù∏',
                registerTab: 'üìù ÌöåÏõêÍ∞ÄÏûÖ',
                defaultCredentials: 'Í∏∞Î≥∏ Ïù∏Ï¶ù Ï†ïÎ≥¥:',
                username: 'ÏÇ¨Ïö©ÏûêÎ™Ö',
                password: 'ÎπÑÎ∞ÄÎ≤àÌò∏',
                usernameLabel: 'üë§ ÏÇ¨Ïö©ÏûêÎ™Ö',
                passwordLabel: 'üîë ÎπÑÎ∞ÄÎ≤àÌò∏',
                usernamePlaceholder: 'ÏÇ¨Ïö©ÏûêÎ™ÖÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî',
                passwordPlaceholder: 'ÎπÑÎ∞ÄÎ≤àÌò∏Î•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî',
                rememberMe: 'üíæ Î°úÍ∑∏Ïù∏ ÏÉÅÌÉú Ïú†ÏßÄ',
                loginError: 'ÏÇ¨Ïö©ÏûêÎ™Ö ÎòêÎäî ÎπÑÎ∞ÄÎ≤àÌò∏Í∞Ä ÏûòÎ™ªÎêòÏóàÏäµÎãàÎã§!',
                loginButton: 'üöÄ ÎåÄÏãúÎ≥¥ÎìúÎ°ú Î°úÍ∑∏Ïù∏',
                loginLoading: '‚è≥ Ï≤òÎ¶¨ Ï§ë...',
                createNewAccount: 'ÏÉà Í≥ÑÏ†ï ÎßåÎì§Í∏∞:',
                registerDescription: 'ÏóÖÎ¨¥ ÌîåÎûòÎÑà Ïï†ÌîåÎ¶¨ÏºÄÏù¥ÏÖòÏùÑ ÏÇ¨Ïö©ÌïòÍ∏∞ ÏúÑÌï¥ Í≥ÑÏ†ïÏùÑ Îì±Î°ùÌïòÏÑ∏Ïöî',
                dataSecurityNote: 'üîí Îç∞Ïù¥ÌÑ∞Îäî ÏïàÏ†ÑÌïòÍ≤å Î∏åÎùºÏö∞Ï†ÄÏóê Î°úÏª¨ Ï†ÄÏû•Îê©ÎãàÎã§',
                
                // Header
                title: 'üìÖ ÏõîÍ∞Ñ ÏóÖÎ¨¥ ÌîåÎûòÎÑà',
                subtitle: 'ÌîÑÎ°úÏ†ùÌä∏ÏôÄ ÏûëÏóÖÏùÑ ÏâΩÍ≤å Í¥ÄÎ¶¨ÌïòÏÑ∏Ïöî',
                settings: '‚öôÔ∏è ÏÑ§Ï†ï',
                exportExcel: 'üìä ExcelÎ°ú ÎÇ¥Î≥¥ÎÇ¥Í∏∞',
                addProject: '‚ûï ÌîÑÎ°úÏ†ùÌä∏ Ï∂îÍ∞Ä',
                
                // Stats
                totalProjects: 'Ï¥ù ÌîÑÎ°úÏ†ùÌä∏',
                highPriority: 'ÎÜíÏùÄ Ïö∞ÏÑ†ÏàúÏúÑ',
                completed: 'ÏôÑÎ£åÎê®',
                totalValue: 'Ï¥ù Í∞ÄÏπò',
                
                // Filters
                searchPlaceholder: 'üîç ÌîÑÎ°úÏ†ùÌä∏ Í≤ÄÏÉâ...',
                allPriorities: 'Î™®Îì† Ïö∞ÏÑ†ÏàúÏúÑ',
                allStatuses: 'Î™®Îì† ÏÉÅÌÉú',
                high: 'ÎÜíÏùå',
                medium: 'Î≥¥ÌÜµ',
                low: 'ÎÇÆÏùå',
                pending: 'ÎåÄÍ∏∞ Ï§ë',
                progress: 'ÏßÑÌñâ Ï§ë',
                completed: 'ÏôÑÎ£åÎê®',
                
                // Project List
                projectList: 'ÌîÑÎ°úÏ†ùÌä∏ Î™©Î°ù',
                noProjects: 'ÏïÑÏßÅ ÌîÑÎ°úÏ†ùÌä∏Í∞Ä ÏóÜÏäµÎãàÎã§. "ÌîÑÎ°úÏ†ùÌä∏ Ï∂îÍ∞Ä"Î•º ÌÅ¥Î¶≠ÌïòÏó¨ ÏãúÏûëÌïòÏÑ∏Ïöî!',
                client: 'ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏',
                platform: 'ÌîåÎû´Ìèº',
                edit: '‚úèÔ∏è Ìé∏Ïßë',
                delete: 'üóëÔ∏è ÏÇ≠Ï†ú',
                
                // Modal
                addNewProject: 'ÏÉà ÌîÑÎ°úÏ†ùÌä∏ Ï∂îÍ∞Ä',
                editProject: 'ÌîÑÎ°úÏ†ùÌä∏ Ìé∏Ïßë',
                projectName: 'ÌîÑÎ°úÏ†ùÌä∏Î™Ö',
                clientName: 'ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏Î™Ö',
                selectPlatform: 'ÌîåÎû´Ìèº ÏÑ†ÌÉù',
                description: 'ÏÑ§Î™Ö',
                startDate: 'ÏãúÏûëÏùº',
                endDate: 'Ï¢ÖÎ£åÏùº',
                priority: 'Ïö∞ÏÑ†ÏàúÏúÑ',
                status: 'ÏÉÅÌÉú',
                projectPrice: 'ÌîÑÎ°úÏ†ùÌä∏ Í∞ÄÍ≤©',
                cancel: 'Ï∑®ÏÜå',
                save: 'Ï†ÄÏû•',
                
                // Settings Modal
                displaySettings: '‚öôÔ∏è ÌôîÎ©¥ ÏÑ§Ï†ï',
                language: 'üåê Ïñ∏Ïñ¥',
                selectLanguage: 'Ïñ∏Ïñ¥ ÏÑ†ÌÉù',
                header: 'üìù Ìó§Îçî',
                resetDefault: 'üîÑ Í∏∞Î≥∏Í∞íÏúºÎ°ú Ïû¨ÏÑ§Ï†ï',
                
                // Platforms
                fiverr: 'Fiverr',
                upwork: 'Upwork',
                facebook: 'Facebook',
                tiktok: 'TikTok',
                instagram: 'Instagram',
                linkedin: 'LinkedIn',
                freelancer: 'Freelancer',
                directClient: 'ÏßÅÏ†ë ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏',
                referral: 'Ï∂îÏ≤ú',
                other: 'Í∏∞ÌÉÄ',
                
                // Account Management
                accountManagement: 'üë• Í≥ÑÏ†ï Í¥ÄÎ¶¨',
                accountInfo: 'üìä ÌôúÏÑ± Í≥ÑÏ†ï Ï†ïÎ≥¥',
                activeUsername: 'üë§ ÌôúÏÑ± ÏÇ¨Ïö©ÏûêÎ™Ö',
                sessionType: 'üîí ÏÑ∏ÏÖò Ïú†Ìòï',
                totalRegisteredUsers: 'üìä Ï¥ù Îì±Î°ù Í≥ÑÏ†ï Ïàò',
                allAccountsList: 'üìã Î™®Îì† Í≥ÑÏ†ï Î™©Î°ù',
                updateCredentials: 'üîê ÌôúÏÑ± Í≥ÑÏ†ï ÏûêÍ≤© Ï¶ùÎ™Ö ÏóÖÎç∞Ïù¥Ìä∏',
                newUsername: 'ÏÉà ÏÇ¨Ïö©ÏûêÎ™Ö',
                newPassword: 'ÏÉà ÎπÑÎ∞ÄÎ≤àÌò∏',
                confirmPassword: 'ÎπÑÎ∞ÄÎ≤àÌò∏ ÌôïÏù∏',
                updateCredentialsBtn: 'üîê Î°úÍ∑∏Ïù∏ ÏûêÍ≤© Ï¶ùÎ™Ö ÏóÖÎç∞Ïù¥Ìä∏',
                onlyAdminAvailable: 'Í∏∞Î≥∏ Í¥ÄÎ¶¨Ïûê Í≥ÑÏ†ïÎßå ÏÇ¨Ïö© Í∞ÄÎä•',
                activeAccount: 'ÌôúÏÑ±',
                createdOn: 'ÏÉùÏÑ±Ïùº',
                deleteAccount: 'Í≥ÑÏ†ï ÏÇ≠Ï†ú',
                close: 'Îã´Í∏∞',
                
                // Invoice Features
                printReportInvoice: 'üñ®Ô∏è Î≥¥Í≥†ÏÑú Î∞è ÏÜ°Ïû• Ïù∏ÏáÑ',
                printType: 'Ïù∏ÏáÑ Ïú†Ìòï',
                projectReport: 'üìä ÌîÑÎ°úÏ†ùÌä∏ Î≥¥Í≥†ÏÑú',
                invoiceNote: 'üßæ ÏÜ°Ïû•/ÏòÅÏàòÏ¶ù',
                invoiceSettings: '‚öôÔ∏è ÏÜ°Ïû• ÏÑ§Ï†ï',
                selectProjectInvoice: 'ÏÜ°Ïû•Ïö© ÌîÑÎ°úÏ†ùÌä∏ ÏÑ†ÌÉù',
                selectProject: 'ÌîÑÎ°úÏ†ùÌä∏ ÏÑ†ÌÉù...',
                paperFormat: 'Ïö©ÏßÄ ÌòïÏãù',
                invoiceNumber: 'ÏÜ°Ïû• Î≤àÌò∏',
                invoiceDate: 'ÏÜ°Ïû• ÎÇ†Ïßú',
                dueDate: 'ÎßåÎ£åÏùº',
                companyInfo: 'üè¢ ÌöåÏÇ¨ Ï†ïÎ≥¥',
                companyName: 'ÌöåÏÇ¨Î™Ö',
                address: 'Ï£ºÏÜå',
                phone: 'Ï†ÑÌôîÎ≤àÌò∏',
                email: 'Ïù¥Î©îÏùº',
                website: 'ÏõπÏÇ¨Ïù¥Ìä∏',
                paymentOptions: 'üí∞ Í≤∞Ï†ú ÏòµÏÖò',
                taxPPN: 'ÏÑ∏Í∏à (%)',
                discount: 'Ìï†Ïù∏ (%)',
                additionalNotes: 'Ï∂îÍ∞Ä Î©îÎ™®',
                bankInfo: 'ÏùÄÌñâ Í≥ÑÏ¢å Ï†ïÎ≥¥',
                printInvoice: 'üßæ ÏÜ°Ïû• Ïù∏ÏáÑ',
                
                // Paper formats
                paperA4: 'üìÑ A4 (210 x 297 mm)',
                paperA5: 'üìÑ A5 (148 x 210 mm)',
                paperA6: 'üìÑ A6 (105 x 148 mm)',
                paperLetter: 'üìÑ Letter (216 x 279 mm)',
                paperLegal: 'üìÑ Legal (216 x 356 mm)',
                paperReceipt: 'üßæ Receipt (80mm)',
                
                // Validation messages
                allFieldsRequired: 'Î™®Îì† ÌïÑÎìúÎ•º ÏûÖÎ†•Ìï¥Ïïº Ìï©ÎãàÎã§!',
                usernameMinLength: 'ÏÇ¨Ïö©ÏûêÎ™ÖÏùÄ ÏµúÏÜå 3ÏûêÏûÖÎãàÎã§!',
                passwordMinLength: 'ÎπÑÎ∞ÄÎ≤àÌò∏Îäî ÏµúÏÜå 6ÏûêÏûÖÎãàÎã§!',
                passwordMismatch: 'ÎπÑÎ∞ÄÎ≤àÌò∏ ÌôïÏù∏Ïù¥ ÏùºÏπòÌïòÏßÄ ÏïäÏäµÎãàÎã§!',
                confirmUpdateCredentials: 'Î°úÍ∑∏Ïù∏ ÏûêÍ≤© Ï¶ùÎ™ÖÏùÑ Î≥ÄÍ≤ΩÌïòÏãúÍ≤†ÏäµÎãàÍπå?\n\nÏÉà ÏÇ¨Ïö©ÏûêÎ™ÖÍ≥º ÎπÑÎ∞ÄÎ≤àÌò∏Î•º Í∏∞ÏñµÌï¥ ÎëêÏÑ∏Ïöî!',
                credentialsUpdated: 'ÏûêÍ≤© Ï¶ùÎ™ÖÏù¥ ÏÑ±Í≥µÏ†ÅÏúºÎ°ú ÏóÖÎç∞Ïù¥Ìä∏ÎêòÏóàÏäµÎãàÎã§!\n\nÎã§Ïùå Î°úÍ∑∏Ïù∏ Ïãú ÏÉà ÏÇ¨Ïö©ÏûêÎ™ÖÍ≥º ÎπÑÎ∞ÄÎ≤àÌò∏Î•º ÏÇ¨Ïö©ÌïòÏÑ∏Ïöî.',
                confirmDeleteAccount: 'Í≥ÑÏ†ïÏùÑ ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå',
                accountDeleted: 'ÏÑ±Í≥µÏ†ÅÏúºÎ°ú ÏÇ≠Ï†úÎêòÏóàÏäµÎãàÎã§!',
                selectProjectFirst: 'Î®ºÏ†Ä ÏÜ°Ïû•Ïö© ÌîÑÎ°úÏ†ùÌä∏Î•º ÏÑ†ÌÉùÌïòÏÑ∏Ïöî!',
                projectNotFound: 'ÌîÑÎ°úÏ†ùÌä∏Î•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§!',
                
                // Welcome message
                welcomeGreeting: 'ÏïàÎÖïÌïòÏÑ∏Ïöî',
                welcomeMessage: 'Îã§Ïãú Ïò§Ïã† Í≤ÉÏùÑ ÌôòÏòÅÌï©ÎãàÎã§!',
                
                // Messages
                deleteConfirm: 'Ïù¥ ÌîÑÎ°úÏ†ùÌä∏Î•º ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?',
                resetConfirm: 'Î™®Îì† ÏÑ§Ï†ïÏùÑ Í∏∞Î≥∏Í∞íÏúºÎ°ú Ïû¨ÏÑ§Ï†ïÌïòÏãúÍ≤†ÏäµÎãàÍπå?',
                noDataExport: 'ÎÇ¥Î≥¥ÎÇº Îç∞Ïù¥ÌÑ∞Í∞Ä ÏóÜÏäµÎãàÎã§!',
                noMatchingProjects: 'ÌòÑÏû¨ ÌïÑÌÑ∞ÏôÄ ÏùºÏπòÌïòÎäî ÌîÑÎ°úÏ†ùÌä∏Í∞Ä ÏóÜÏäµÎãàÎã§.',
                dashboardStats: 'üìä ÎåÄÏãúÎ≥¥Îìú ÌÜµÍ≥Ñ',
                
                // Print translations
                printReport: 'üñ®Ô∏è Î≥¥Í≥†ÏÑú Ïù∏ÏáÑ',
                reportType: 'Î≥¥Í≥†ÏÑú Ïú†Ìòï',
                allProjects: 'Î™®Îì† ÌîÑÎ°úÏ†ùÌä∏',
                completedOnly: 'ÏôÑÎ£åÎêú Í≤ÉÎßå',
                pendingOnly: 'ÎåÄÍ∏∞ Ï§ëÏù∏ Í≤ÉÎßå',
                progressOnly: 'ÏßÑÌñâ Ï§ëÏù∏ Í≤ÉÎßå',
                highPriorityOnly: 'ÎÜíÏùÄ Ïö∞ÏÑ†ÏàúÏúÑÎßå',
                printOptions: 'Ïù∏ÏáÑ ÏòµÏÖò',
                includeStatistics: 'ÌÜµÍ≥Ñ Ìè¨Ìï®',
                includeDescriptions: 'ÏÑ§Î™Ö Ìè¨Ìï®',
                includePrices: 'Í∞ÄÍ≤© Ìè¨Ìï®',
                print: 'üñ®Ô∏è Ïù∏ÏáÑ',
                saveAsPDF: 'üìÑ PDF Ï†ÄÏû•',
                saveAsPNG: 'üñºÔ∏è PNG Ï†ÄÏû•',
                editInvoice: '‚úèÔ∏è ÏÜ°Ïû• Ìé∏Ïßë',
                
                // Invoice Editor
                editInvoiceTitle: '‚úèÔ∏è ÏÜ°Ïû•/ÏòÅÏàòÏ¶ù Ìé∏Ïßë',
                editorPanel: 'üé® Ìé∏ÏßëÍ∏∞',
                companyLogo: 'üè¢ ÌöåÏÇ¨ Î°úÍ≥†',
                uploadLogo: 'üìÅ Î°úÍ≥† ÏóÖÎ°úÎìú',
                invoiceTitleLabel: 'üìù ÏÜ°Ïû• Ï†úÎ™©',
                headerColor: 'üé® Ìó§Îçî ÏÉâÏÉÅ',
                companyInfoEditor: 'üè¢ ÌöåÏÇ¨ Ï†ïÎ≥¥',
                companyNamePlaceholder: 'ÌöåÏÇ¨Î™Ö',
                companyAddressPlaceholder: 'ÌöåÏÇ¨ Ï£ºÏÜå',
                phonePlaceholder: 'Ï†ÑÌôîÎ≤àÌò∏',
                emailPlaceholder: 'Ïù¥Î©îÏùº',
                signature: '‚úçÔ∏è ÏÑúÎ™Ö',
                uploadSignature: 'üìÅ ÏÑúÎ™Ö ÏóÖÎ°úÎìú',
                signerNamePlaceholder: 'ÏÑúÎ™ÖÏûê Ïù¥Î¶Ñ',
                signerTitlePlaceholder: 'ÏßÅÏ±Ö',
                footerLabel: 'üìÑ Ìë∏ÌÑ∞',
                footerPlaceholder: 'Ïã†Î¢∞Ìï¥ Ï£ºÏÖîÏÑú Í∞êÏÇ¨Ìï©ÎãàÎã§!',
                previewPanel: 'üëÅÔ∏è ÎØ∏Î¶¨Î≥¥Í∏∞',
                printBtn: 'üñ®Ô∏è Ïù∏ÏáÑ',
                pdfBtn: 'üìÑ PDF',
                pngBtn: 'üñºÔ∏è PNG',
                saveTemplate: 'üíæ ÌÖúÌîåÎ¶ø Ï†ÄÏû•'
            },
            es: {
                // Login Screen
                welcomeTitle: 'Bienvenido',
                welcomeSubtitle: 'Iniciar sesi√≥n en el Planificador de Trabajo Mensual',
                loginTab: 'üîë Iniciar Sesi√≥n',
                registerTab: 'üìù Registrarse',
                defaultCredentials: 'Credenciales por defecto:',
                username: 'Nombre de usuario',
                password: 'Contrase√±a',
                usernameLabel: 'üë§ Nombre de usuario',
                passwordLabel: 'üîë Contrase√±a',
                usernamePlaceholder: 'Ingrese nombre de usuario',
                passwordPlaceholder: 'Ingrese contrase√±a',
                rememberMe: 'üíæ Recordarme',
                loginError: '¬°Nombre de usuario o contrase√±a incorrectos!',
                loginButton: 'üöÄ Iniciar sesi√≥n al Panel',
                loginLoading: '‚è≥ Procesando...',
                createNewAccount: 'Crear nueva cuenta:',
                registerDescription: 'Registre su cuenta para usar la aplicaci√≥n de planificador de trabajo',
                dataSecurityNote: 'üîí Sus datos est√°n seguros y almacenados localmente en el navegador',
                
                // Header
                title: 'üìÖ Planificador de Trabajo Mensual',
                subtitle: 'Gestione sus proyectos y tareas con facilidad',
                settings: '‚öôÔ∏è Configuraci√≥n',
                exportExcel: 'üìä Exportar a Excel',
                addProject: '‚ûï Agregar Proyecto',
                
                // Stats
                totalProjects: 'Total de Proyectos',
                highPriority: 'Alta Prioridad',
                completed: 'Completados',
                totalValue: 'Valor Total',
                
                // Filters
                searchPlaceholder: 'üîç Buscar proyectos...',
                allPriorities: 'Todas las Prioridades',
                allStatuses: 'Todos los Estados',
                high: 'Alta',
                medium: 'Media',
                low: 'Baja',
                pending: 'Pendiente',
                progress: 'En Progreso',
                completed: 'Completado',
                
                // Project List
                projectList: 'Lista de Proyectos',
                noProjects: 'A√∫n no hay proyectos. ¬°Haga clic en "Agregar Proyecto" para comenzar!',
                client: 'Cliente',
                platform: 'Plataforma',
                edit: '‚úèÔ∏è Editar',
                delete: 'üóëÔ∏è Eliminar',
                
                // Modal
                addNewProject: 'Agregar Nuevo Proyecto',
                editProject: 'Editar Proyecto',
                projectName: 'Nombre del Proyecto',
                clientName: 'Nombre del Cliente',
                selectPlatform: 'Seleccionar Plataforma',
                description: 'Descripci√≥n',
                startDate: 'Fecha de Inicio',
                endDate: 'Fecha de Finalizaci√≥n',
                priority: 'Prioridad',
                status: 'Estado',
                projectPrice: 'Precio del Proyecto',
                cancel: 'Cancelar',
                save: 'Guardar',
                
                // Settings Modal
                displaySettings: '‚öôÔ∏è Configuraci√≥n de Pantalla',
                language: 'üåê Idioma',
                selectLanguage: 'Seleccionar Idioma',
                header: 'üìù Encabezado',
                resetDefault: 'üîÑ Restablecer por Defecto',
                
                // Platforms
                fiverr: 'Fiverr',
                upwork: 'Upwork',
                facebook: 'Facebook',
                tiktok: 'TikTok',
                instagram: 'Instagram',
                linkedin: 'LinkedIn',
                freelancer: 'Freelancer',
                directClient: 'Cliente Directo',
                referral: 'Referencia',
                other: 'Otro',
                
                // Account Management
                accountManagement: 'üë• Gesti√≥n de Cuentas',
                accountInfo: 'üìä Informaci√≥n de Cuenta Activa',
                activeUsername: 'üë§ Nombre de Usuario Activo',
                sessionType: 'üîí Tipo de Sesi√≥n',
                totalRegisteredUsers: 'üìä Total de Cuentas Registradas',
                allAccountsList: 'üìã Lista de Todas las Cuentas',
                updateCredentials: 'üîê Actualizar Credenciales de Cuenta Activa',
                newUsername: 'Nuevo Nombre de Usuario',
                newPassword: 'Nueva Contrase√±a',
                confirmPassword: 'Confirmar Contrase√±a',
                updateCredentialsBtn: 'üîê Actualizar Credenciales de Acceso',
                onlyAdminAvailable: 'Solo cuenta de administrador por defecto disponible',
                activeAccount: 'Activa',
                createdOn: 'Creada',
                deleteAccount: 'Eliminar Cuenta',
                close: 'Cerrar',
                
                // Invoice Features
                printReportInvoice: 'üñ®Ô∏è Imprimir Informe y Factura',
                printType: 'Tipo de Impresi√≥n',
                projectReport: 'üìä Informe de Proyecto',
                invoiceNote: 'üßæ Factura/Recibo',
                invoiceSettings: '‚öôÔ∏è Configuraci√≥n de Factura',
                selectProjectInvoice: 'Seleccionar Proyecto para Factura',
                selectProject: 'Seleccionar Proyecto...',
                paperFormat: 'Formato de Papel',
                invoiceNumber: 'N√∫mero de Factura',
                invoiceDate: 'Fecha de Factura',
                dueDate: 'Fecha de Vencimiento',
                companyInfo: 'üè¢ Informaci√≥n de la Empresa',
                companyName: 'Nombre de la Empresa',
                address: 'Direcci√≥n',
                phone: 'Tel√©fono',
                email: 'Correo Electr√≥nico',
                website: 'Sitio Web',
                paymentOptions: 'üí∞ Opciones de Pago',
                taxPPN: 'Impuesto (%)',
                discount: 'Descuento (%)',
                additionalNotes: 'Notas Adicionales',
                bankInfo: 'Informaci√≥n de Cuenta Bancaria',
                printInvoice: 'üßæ Imprimir Factura',
                
                // Paper formats
                paperA4: 'üìÑ A4 (210 x 297 mm)',
                paperA5: 'üìÑ A5 (148 x 210 mm)',
                paperA6: 'üìÑ A6 (105 x 148 mm)',
                paperLetter: 'üìÑ Letter (216 x 279 mm)',
                paperLegal: 'üìÑ Legal (216 x 356 mm)',
                paperReceipt: 'üßæ Receipt (80mm)',
                
                // Validation messages
                allFieldsRequired: '¬°Todos los campos deben ser completados!',
                usernameMinLength: '¬°El nombre de usuario debe tener m√≠nimo 3 caracteres!',
                passwordMinLength: '¬°La contrase√±a debe tener m√≠nimo 6 caracteres!',
                passwordMismatch: '¬°La confirmaci√≥n de contrase√±a no coincide!',
                confirmUpdateCredentials: '¬øEst√° seguro de que desea cambiar las credenciales de acceso?\n\n¬°Aseg√∫rese de recordar el nuevo nombre de usuario y contrase√±a!',
                credentialsUpdated: '¬°Credenciales actualizadas exitosamente!\n\nUse el nuevo nombre de usuario y contrase√±a para el pr√≥ximo acceso.',
                confirmDeleteAccount: '¬øEst√° seguro de que desea eliminar la cuenta',
                accountDeleted: 'eliminada exitosamente!',
                selectProjectFirst: '¬°Por favor seleccione un proyecto para la factura primero!',
                projectNotFound: '¬°Proyecto no encontrado!',
                
                // Welcome message
                welcomeGreeting: 'Hola',
                welcomeMessage: '¬°bienvenido de nuevo!',
                
                // Messages
                deleteConfirm: '¬øEst√° seguro de que desea eliminar este proyecto?',
                resetConfirm: '¬øEst√° seguro de que desea restablecer toda la configuraci√≥n por defecto?',
                noDataExport: '¬°No hay datos para exportar!',
                noMatchingProjects: 'No hay proyectos que coincidan con el filtro actual.',
                dashboardStats: 'üìä Estad√≠sticas del Panel',
                
                // Print translations
                printReport: 'üñ®Ô∏è Imprimir Informe',
                reportType: 'Tipo de Informe',
                allProjects: 'Todos los Proyectos',
                completedOnly: 'Solo Completados',
                pendingOnly: 'Solo Pendientes',
                progressOnly: 'Solo en Progreso',
                highPriorityOnly: 'Solo Alta Prioridad',
                printOptions: 'Opciones de Impresi√≥n',
                includeStatistics: 'Incluir Estad√≠sticas',
                includeDescriptions: 'Incluir Descripciones',
                includePrices: 'Incluir Precios',
                print: 'üñ®Ô∏è Imprimir',
                saveAsPDF: 'üìÑ Guardar PDF',
                saveAsPNG: 'üñºÔ∏è Guardar PNG',
                editInvoice: '‚úèÔ∏è Editar Factura',
                
                // Invoice Editor
                editInvoiceTitle: '‚úèÔ∏è Editar Factura/Recibo',
                editorPanel: 'üé® Editor',
                companyLogo: 'üè¢ Logo de la Empresa',
                uploadLogo: 'üìÅ Subir Logo',
                invoiceTitleLabel: 'üìù T√≠tulo de la Factura',
                headerColor: 'üé® Color del Encabezado',
                companyInfoEditor: 'üè¢ Informaci√≥n de la Empresa',
                companyNamePlaceholder: 'Nombre de la Empresa',
                companyAddressPlaceholder: 'Direcci√≥n de la Empresa',
                phonePlaceholder: 'Tel√©fono',
                emailPlaceholder: 'Correo Electr√≥nico',
                signature: '‚úçÔ∏è Firma',
                uploadSignature: 'üìÅ Subir Firma',
                signerNamePlaceholder: 'Nombre del Firmante',
                signerTitlePlaceholder: 'Cargo',
                footerLabel: 'üìÑ Pie de P√°gina',
                footerPlaceholder: '¬°Gracias por su confianza!',
                previewPanel: 'üëÅÔ∏è Vista Previa',
                printBtn: 'üñ®Ô∏è Imprimir',
                pdfBtn: 'üìÑ PDF',
                pngBtn: 'üñºÔ∏è PNG',
                saveTemplate: 'üíæ Guardar Plantilla'
            }
        };

        // Current language
        let currentLanguage = localStorage.getItem('plannerLanguage') || 'id';

        // Default settings
        const defaultSettings = {
            title: 'üìÖ Planner Pekerjaan Bulanan',
            stat1Label: 'Total Proyek',
            stat1Icon: 'üìã',
            stat2Label: 'Prioritas Tinggi',
            stat2Icon: 'üî•',
            stat3Label: 'Selesai',
            stat3Icon: '‚úÖ',
            stat4Label: 'Total Nilai',
            stat4Icon: 'üí∞',
            language: 'id'
        };

        // Translation function
        function t(key) {
            return translations[currentLanguage][key] || translations['id'][key] || key;
        }

        // Authentication functions
        function checkAuthentication() {
            // Check if user is remembered (permanent login)
            const rememberedUser = localStorage.getItem('rememberedUser');
            if (rememberedUser) {
                currentUser = rememberedUser;
                isAuthenticated = true;
                showMainApp();
                return;
            }
            
            // Check if user has active session (temporary login)
            const sessionUser = sessionStorage.getItem('currentUser');
            if (sessionUser) {
                currentUser = sessionUser;
                isAuthenticated = true;
                showMainApp();
                return;
            }
            
            // No authentication found, show login
            showLoginScreen();
        }

        function showLoginScreen() {
            document.getElementById('loginScreen').classList.remove('hidden');
            document.getElementById('mainApp').classList.add('hidden');
        }

        function showMainApp() {
            document.getElementById('loginScreen').classList.add('hidden');
            document.getElementById('mainApp').classList.remove('hidden');
            updateUserInfo();
            loadCustomSettings();
            renderProjects();
            updateStats();
            updateClock();
            
            // Show super admin button if logged in as super admin
            if (currentUser === SUPER_ADMIN.username) {
                document.getElementById('superAdminBtn').classList.remove('hidden');
            } else {
                document.getElementById('superAdminBtn').classList.add('hidden');
            }
        }

        function toggleLoginPasswordVisibility() {
            const passwordInput = document.getElementById('loginPassword');
            const toggleIcon = document.getElementById('loginPasswordToggleIcon');
            
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                toggleIcon.textContent = 'üôà';
            } else {
                passwordInput.type = 'password';
                toggleIcon.textContent = 'üëÅÔ∏è';
            }
        }

        // Form toggle functions
        function showLoginForm() {
            document.getElementById('loginFormContainer').classList.remove('hidden');
            document.getElementById('registerFormContainer').classList.add('hidden');
            document.getElementById('loginTab').classList.add('bg-white/60', 'text-blue-700', 'shadow-sm');
            document.getElementById('loginTab').classList.remove('text-gray-600');
            document.getElementById('registerTab').classList.remove('bg-white/60', 'text-blue-700', 'shadow-sm');
            document.getElementById('registerTab').classList.add('text-gray-600');
            
            // Clear any error messages
            document.getElementById('loginError').classList.add('hidden');
            document.getElementById('registerError').classList.add('hidden');
            document.getElementById('registerSuccess').classList.add('hidden');
        }

        function showRegisterForm() {
            document.getElementById('loginFormContainer').classList.add('hidden');
            document.getElementById('registerFormContainer').classList.remove('hidden');
            document.getElementById('registerTab').classList.add('bg-white/60', 'text-green-700', 'shadow-sm');
            document.getElementById('registerTab').classList.remove('text-gray-600');
            document.getElementById('loginTab').classList.remove('bg-white/60', 'text-blue-700', 'shadow-sm');
            document.getElementById('loginTab').classList.add('text-gray-600');
            
            // Clear any error messages
            document.getElementById('loginError').classList.add('hidden');
            document.getElementById('registerError').classList.add('hidden');
            document.getElementById('registerSuccess').classList.add('hidden');
        }

        // Password visibility toggles for register form
        function toggleRegisterPasswordVisibility() {
            const passwordInput = document.getElementById('registerPassword');
            const toggleIcon = document.getElementById('registerPasswordToggleIcon');
            
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                toggleIcon.textContent = 'üôà';
            } else {
                passwordInput.type = 'password';
                toggleIcon.textContent = 'üëÅÔ∏è';
            }
        }

        function toggleRegisterConfirmPasswordVisibility() {
            const passwordInput = document.getElementById('registerConfirmPassword');
            const toggleIcon = document.getElementById('registerConfirmPasswordToggleIcon');
            
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                toggleIcon.textContent = 'üôà';
            } else {
                passwordInput.type = 'password';
                toggleIcon.textContent = 'üëÅÔ∏è';
            }
        }

        function login(username, password, remember = false) {
            // Check super admin credentials first
            if (username === SUPER_ADMIN.username && password === SUPER_ADMIN.password) {
                currentUser = username;
                isAuthenticated = true;
                
                if (remember) {
                    localStorage.setItem('rememberedUser', username);
                } else {
                    sessionStorage.setItem('currentUser', username);
                }
                
                // Track super admin login
                trackUserActivity('SUPER_ADMIN_LOGIN', { 
                    timestamp: new Date().toISOString(),
                    userAgent: navigator.userAgent 
                });
                
                showMainApp();
                return true;
            }
            
            // Check default admin credentials
            if (username === userCredentials.username && password === userCredentials.password) {
                currentUser = username;
                isAuthenticated = true;
                
                if (remember) {
                    localStorage.setItem('rememberedUser', username);
                } else {
                    sessionStorage.setItem('currentUser', username);
                }
                
                // Track admin login
                trackUserActivity('ADMIN_LOGIN', { timestamp: new Date().toISOString() });
                updateUserStats();
                
                showMainApp();
                return true;
            }
            
            // Check registered user accounts
            const userAccount = userAccounts.find(account => 
                account.username === username && password === password
            );
            
            if (userAccount) {
                currentUser = username;
                isAuthenticated = true;
                
                if (remember) {
                    localStorage.setItem('rememberedUser', username);
                } else {
                    sessionStorage.setItem('currentUser', username);
                }
                
                // Track user login
                trackUserActivity('USER_LOGIN', { 
                    timestamp: new Date().toISOString(),
                    email: userAccount.email 
                });
                updateUserStats();
                
                showMainApp();
                return true;
            }
            
            return false;
        }

        function logout() {
            if (confirm('üö™ Apakah Anda yakin ingin keluar?')) {
                // Clear all authentication data
                localStorage.removeItem('rememberedUser');
                sessionStorage.removeItem('currentUser');
                currentUser = null;
                isAuthenticated = false;
                
                // Show login screen
                showLoginScreen();
                
                // Clear login form
                document.getElementById('loginForm').reset();
                document.getElementById('loginError').classList.add('hidden');
            }
        }

        function updateUserInfo() {
            const userDisplays = document.querySelectorAll('#currentUserDisplay, #currentUserDisplay2');
            userDisplays.forEach(display => {
                display.textContent = currentUser || '-';
            });
            
            // Update username in subtitle
            const usernameInSubtitle = document.getElementById('usernameInSubtitle');
            if (usernameInSubtitle) {
                usernameInSubtitle.textContent = currentUser || '-';
            }
            
            const sessionType = localStorage.getItem('rememberedUser') ? 'Permanen (Diingat)' : 'Sementara (Sesi)';
            const sessionDisplays = document.querySelectorAll('#sessionTypeDisplay, #sessionType');
            sessionDisplays.forEach(display => {
                display.textContent = sessionType;
            });
        }

        // Registration function
        function registerUser(username, email, password, confirmPassword) {
            // Validation
            if (!username || !password || !confirmPassword) {
                return { success: false, message: 'Semua field wajib harus diisi!' };
            }
            
            if (username.length < 3) {
                return { success: false, message: 'Username minimal 3 karakter!' };
            }
            
            if (password.length < 6) {
                return { success: false, message: 'Password minimal 6 karakter!' };
            }
            
            if (password !== confirmPassword) {
                return { success: false, message: 'Konfirmasi password tidak cocok!' };
            }
            
            // Check if username already exists (including default admin)
            if (username === userCredentials.username) {
                return { success: false, message: 'Username sudah digunakan! Pilih username lain.' };
            }
            
            const existingUser = userAccounts.find(account => account.username === username);
            if (existingUser) {
                return { success: false, message: 'Username sudah digunakan! Pilih username lain.' };
            }
            
            // Check if email already exists (if provided)
            if (email) {
                const existingEmail = userAccounts.find(account => account.email === email);
                if (existingEmail) {
                    return { success: false, message: 'Email sudah terdaftar! Gunakan email lain.' };
                }
            }
            
            // Create new user account
            const newUser = {
                id: Date.now(),
                username: username,
                email: email || '',
                password: password,
                createdAt: new Date().toISOString(),
                lastLogin: null
            };
            
            userAccounts.push(newUser);
            localStorage.setItem('userAccounts', JSON.stringify(userAccounts));
            
            return { success: true, message: 'Akun berhasil dibuat!' };
        }

        // Login form handler
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize language selector
            const loginLanguageSelect = document.getElementById('loginLanguageSelect');
            if (loginLanguageSelect) {
                loginLanguageSelect.value = currentLanguage;
            }
            
            // Update translations on page load
            updateTranslations();
            
            // Check authentication on page load
            checkAuthentication();
            
            // Login form event listener
            document.getElementById('loginForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const username = document.getElementById('loginUsername').value.trim();
                const password = document.getElementById('loginPassword').value;
                const remember = document.getElementById('rememberMe').checked;
                
                // Show loading state
                const button = document.getElementById('loginButton');
                const buttonText = document.getElementById('loginButtonText');
                const buttonLoading = document.getElementById('loginButtonLoading');
                
                button.disabled = true;
                buttonText.classList.add('hidden');
                buttonLoading.classList.remove('hidden');
                
                // Simulate loading delay
                setTimeout(() => {
                    if (login(username, password, remember)) {
                        // Success - form will be hidden by showMainApp()
                        document.getElementById('loginError').classList.add('hidden');
                    } else {
                        // Failed login
                        document.getElementById('loginError').classList.remove('hidden');
                        
                        // Shake animation
                        const loginCard = document.querySelector('.login-card');
                        loginCard.classList.add('shake');
                        setTimeout(() => {
                            loginCard.classList.remove('shake');
                        }, 500);
                    }
                    
                    // Reset button state
                    button.disabled = false;
                    buttonText.classList.remove('hidden');
                    buttonLoading.classList.add('hidden');
                }, 1000);
            });
            
            // Register form event listener
            document.getElementById('registerForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const username = document.getElementById('registerUsername').value.trim();
                const email = document.getElementById('registerEmail').value.trim();
                const password = document.getElementById('registerPassword').value;
                const confirmPassword = document.getElementById('registerConfirmPassword').value;
                
                // Show loading state
                const button = document.getElementById('registerButton');
                const buttonText = document.getElementById('registerButtonText');
                const buttonLoading = document.getElementById('registerButtonLoading');
                
                button.disabled = true;
                buttonText.classList.add('hidden');
                buttonLoading.classList.remove('hidden');
                
                // Hide previous messages
                document.getElementById('registerError').classList.add('hidden');
                document.getElementById('registerSuccess').classList.add('hidden');
                
                // Simulate loading delay
                setTimeout(() => {
                    const result = registerUser(username, email, password, confirmPassword);
                    
                    if (result.success) {
                        // Success
                        document.getElementById('registerSuccess').classList.remove('hidden');
                        document.getElementById('registerForm').reset();
                        
                        // Auto switch to login form after 2 seconds
                        setTimeout(() => {
                            showLoginForm();
                            // Pre-fill username in login form
                            document.getElementById('loginUsername').value = username;
                        }, 2000);
                    } else {
                        // Error
                        document.getElementById('registerErrorMessage').textContent = result.message;
                        document.getElementById('registerError').classList.remove('hidden');
                        
                        // Shake animation
                        const loginCard = document.querySelector('.login-card');
                        loginCard.classList.add('shake');
                        setTimeout(() => {
                            loginCard.classList.remove('shake');
                        }, 500);
                    }
                    
                    // Reset button state
                    button.disabled = false;
                    buttonText.classList.remove('hidden');
                    buttonLoading.classList.add('hidden');
                }, 1500);
            });
            
            // Other event listeners
            if (document.getElementById('searchInput')) {
                document.getElementById('searchInput').addEventListener('input', filterProjects);
                document.getElementById('priorityFilter').addEventListener('change', filterProjects);
                document.getElementById('statusFilter').addEventListener('change', filterProjects);
                document.getElementById('projectForm').addEventListener('submit', saveProject);
            }
        });

        // Credential management functions
        function toggleNewPasswordVisibility() {
            const passwordInput = document.getElementById('newPassword');
            const toggleIcon = document.getElementById('newPasswordToggleIcon');
            
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                toggleIcon.textContent = 'üôà';
            } else {
                passwordInput.type = 'password';
                toggleIcon.textContent = 'üëÅÔ∏è';
            }
        }

        function toggleConfirmPasswordVisibility() {
            const passwordInput = document.getElementById('confirmPassword');
            const toggleIcon = document.getElementById('confirmPasswordToggleIcon');
            
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                toggleIcon.textContent = 'üôà';
            } else {
                passwordInput.type = 'password';
                toggleIcon.textContent = 'üëÅÔ∏è';
            }
        }

        function updateCredentials() {
            const newUsername = document.getElementById('newUsername').value.trim();
            const newPassword = document.getElementById('newPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            
            // Validation
            if (!newUsername || !newPassword || !confirmPassword) {
                alert('‚ùå ' + t('allFieldsRequired'));
                return;
            }
            
            if (newUsername.length < 3) {
                alert('‚ùå ' + t('usernameMinLength'));
                return;
            }
            
            if (newPassword.length < 6) {
                alert('‚ùå ' + t('passwordMinLength'));
                return;
            }
            
            if (newPassword !== confirmPassword) {
                alert('‚ùå ' + t('passwordMismatch'));
                return;
            }
            
            if (confirm('üîê ' + t('confirmUpdateCredentials'))) {
                // Update credentials
                userCredentials = {
                    username: newUsername,
                    password: newPassword
                };
                
                localStorage.setItem('userCredentials', JSON.stringify(userCredentials));
                
                // Update current user if username changed
                if (currentUser !== newUsername) {
                    currentUser = newUsername;
                    
                    // Update stored authentication
                    if (localStorage.getItem('rememberedUser')) {
                        localStorage.setItem('rememberedUser', newUsername);
                    }
                    if (sessionStorage.getItem('currentUser')) {
                        sessionStorage.setItem('currentUser', newUsername);
                    }
                }
                
                // Clear form
                document.getElementById('newUsername').value = '';
                document.getElementById('newPassword').value = '';
                document.getElementById('confirmPassword').value = '';
                
                // Update display
                updateUserInfo();
                
                alert('‚úÖ ' + t('credentialsUpdated'));
            }
        }

        // Change language function
        function changeLanguage(lang) {
            currentLanguage = lang;
            localStorage.setItem('plannerLanguage', lang);
            customSettings.language = lang;
            localStorage.setItem('plannerSettings', JSON.stringify(customSettings));
            
            // Update all translatable elements
            updateTranslations();
            
            // Re-render projects to update their content
            renderProjects();
            updateStats();
        }

        // Change language function for login screen
        function changeLanguageLogin(lang) {
            currentLanguage = lang;
            localStorage.setItem('plannerLanguage', lang);
            
            // Update all translatable elements
            updateTranslations();
        }

        // Update all translations
        function updateTranslations() {
            // Update elements with data-translate attribute
            document.querySelectorAll('[data-translate]').forEach(element => {
                const key = element.getAttribute('data-translate');
                element.textContent = t(key);
            });
            
            // Update placeholder texts
            document.querySelectorAll('[data-translate-placeholder]').forEach(element => {
                const key = element.getAttribute('data-translate-placeholder');
                element.placeholder = t(key);
            });
            
            // Update select options
            document.querySelectorAll('option[data-translate]').forEach(option => {
                const key = option.getAttribute('data-translate');
                const originalText = option.textContent;
                const iconMatch = originalText.match(/^[üü¢üîµ‚ö´üü£üü†üíºü§ùüì±]/);
                const icon = iconMatch ? iconMatch[0] + ' ' : '';
                option.textContent = icon + t(key).replace(/^[üü¢üîµ‚ö´üü£üü†üíºü§ùüì±]\s*/, '');
            });
        }

        // Clock function
        function updateClock() {
            const now = new Date();
            
            // Format time (24-hour format)
            const timeOptions = {
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit',
                hour12: false,
                timeZone: 'Asia/Jakarta'
            };
            
            // Format date
            const dateOptions = {
                weekday: 'long',
                year: 'numeric',
                month: 'long',
                day: 'numeric',
                timeZone: 'Asia/Jakarta'
            };
            
            const timeString = now.toLocaleTimeString('id-ID', timeOptions);
            const dateString = now.toLocaleDateString('id-ID', dateOptions);
            
            const timeElement = document.getElementById('currentTime');
            const dateElement = document.getElementById('currentDate');
            
            if (timeElement) timeElement.textContent = timeString;
            if (dateElement) dateElement.textContent = dateString;
            
            // Update every second
            setTimeout(updateClock, 1000);
        }

        // Load and apply custom settings
        function loadCustomSettings() {
            const settings = { ...defaultSettings, ...customSettings };
            
            const titleElement = document.getElementById('mainTitle');
            
            if (titleElement) titleElement.textContent = settings.title;
            
            // Load stat labels and icons
            for (let i = 1; i <= 4; i++) {
                const labelElement = document.getElementById(`stat${i}Label`);
                const iconElement = document.getElementById(`stat${i}Icon`);
                
                if (labelElement) labelElement.textContent = settings[`stat${i}Label`];
                if (iconElement) iconElement.textContent = settings[`stat${i}Icon`];
            }
        }

        // Quick edit functions
        function editTitle() {
            const currentText = document.getElementById('mainTitle').textContent;
            const newText = prompt('Edit judul:', currentText);
            if (newText && newText.trim()) {
                document.getElementById('mainTitle').textContent = newText.trim();
                customSettings.title = newText.trim();
                localStorage.setItem('plannerSettings', JSON.stringify(customSettings));
            }
        }



        function editStatLabel(statNumber) {
            const currentText = document.getElementById(`stat${statNumber}Label`).textContent;
            const newText = prompt(`Edit label kartu ${statNumber}:`, currentText);
            if (newText && newText.trim()) {
                document.getElementById(`stat${statNumber}Label`).textContent = newText.trim();
                customSettings[`stat${statNumber}Label`] = newText.trim();
                localStorage.setItem('plannerSettings', JSON.stringify(customSettings));
            }
        }

        function editStatIcon(statNumber) {
            const currentIcon = document.getElementById(`stat${statNumber}Icon`).textContent;
            const newIcon = prompt(`Edit icon kartu ${statNumber} (gunakan emoji):`, currentIcon);
            if (newIcon && newIcon.trim()) {
                document.getElementById(`stat${statNumber}Icon`).textContent = newIcon.trim();
                customSettings[`stat${statNumber}Icon`] = newIcon.trim();
                localStorage.setItem('plannerSettings', JSON.stringify(customSettings));
            }
        }

        // Account management functions
        function openAccountModal() {
            // Update user info
            updateUserInfo();
            
            // Display registered users
            displayRegisteredUsers();
            
            document.getElementById('accountModal').classList.remove('hidden');
            document.getElementById('accountModal').classList.add('flex');
        }

        function closeAccountModal() {
            document.getElementById('accountModal').classList.add('hidden');
            document.getElementById('accountModal').classList.remove('flex');
        }

        // Settings modal functions
        function displayRegisteredUsers() {
            const usersList = document.getElementById('registeredUsersList');
            const totalUsers = document.getElementById('totalRegisteredUsers');
            
            // Update total count (including default admin)
            totalUsers.textContent = userAccounts.length + 1;
            
            if (userAccounts.length === 0) {
                usersList.innerHTML = `
                    <div class="text-center text-gray-500 text-sm py-4">
                        <span class="text-2xl block mb-2">üë§</span>
                        ${t('onlyAdminAvailable')}
                    </div>
                `;
                return;
            }
            
            usersList.innerHTML = userAccounts.map(user => {
                const createdDate = new Date(user.createdAt).toLocaleDateString('id-ID');
                const isCurrentUser = user.username === currentUser;
                
                return `
                    <div class="bg-white/60 backdrop-blur-sm border border-white/50 rounded-lg p-3 ${isCurrentUser ? 'ring-2 ring-blue-400' : ''}">
                        <div class="flex items-center justify-between">
                            <div class="flex-1">
                                <div class="flex items-center gap-2">
                                    <span class="font-medium text-gray-800">${user.username}</span>
                                    ${isCurrentUser ? `<span class="text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full">${t('activeAccount')}</span>` : ''}
                                </div>
                                ${user.email ? `<div class="text-xs text-gray-600">üìß ${user.email}</div>` : ''}
                                <div class="text-xs text-gray-500">üìÖ ${t('createdOn')}: ${createdDate}</div>
                            </div>
                            ${!isCurrentUser ? `
                                <button onclick="deleteUserAccount('${user.username}')" 
                                        class="text-red-600 hover:text-red-800 text-sm px-2 py-1 rounded hover:bg-red-50 transition-colors">
                                    üóëÔ∏è
                                </button>
                            ` : ''}
                        </div>
                    </div>
                `;
            }).join('');
        }

        function deleteUserAccount(username) {
            if (confirm(`üóëÔ∏è ${t('confirmDeleteAccount')} "${username}"?\n\nTindakan ini tidak dapat dibatalkan!`)) {
                userAccounts = userAccounts.filter(account => account.username !== username);
                localStorage.setItem('userAccounts', JSON.stringify(userAccounts));
                displayRegisteredUsers();
                
                alert(`‚úÖ Akun "${username}" ${t('accountDeleted')}`);
            }
        }

        function openSettingsModal() {
            const settings = { ...defaultSettings, ...customSettings };
            
            // Load language setting
            document.getElementById('languageSelect').value = currentLanguage;
            
            document.getElementById('settingsTitle').value = settings.title;
            document.getElementById('settingsStat1Label').value = settings.stat1Label;
            document.getElementById('settingsStat1Icon').value = settings.stat1Icon;
            document.getElementById('settingsStat2Label').value = settings.stat2Label;
            document.getElementById('settingsStat2Icon').value = settings.stat2Icon;
            document.getElementById('settingsStat3Label').value = settings.stat3Label;
            document.getElementById('settingsStat3Icon').value = settings.stat3Icon;
            document.getElementById('settingsStat4Label').value = settings.stat4Label;
            document.getElementById('settingsStat4Icon').value = settings.stat4Icon;
            
            document.getElementById('settingsModal').classList.remove('hidden');
            document.getElementById('settingsModal').classList.add('flex');
        }

        function closeSettingsModal() {
            document.getElementById('settingsModal').classList.add('hidden');
            document.getElementById('settingsModal').classList.remove('flex');
        }

        function saveSettings() {
            customSettings = {
                title: document.getElementById('settingsTitle').value.trim() || defaultSettings.title,
                stat1Label: document.getElementById('settingsStat1Label').value.trim() || defaultSettings.stat1Label,
                stat1Icon: document.getElementById('settingsStat1Icon').value.trim() || defaultSettings.stat1Icon,
                stat2Label: document.getElementById('settingsStat2Label').value.trim() || defaultSettings.stat2Label,
                stat2Icon: document.getElementById('settingsStat2Icon').value.trim() || defaultSettings.stat2Icon,
                stat3Label: document.getElementById('settingsStat3Label').value.trim() || defaultSettings.stat3Label,
                stat3Icon: document.getElementById('settingsStat3Icon').value.trim() || defaultSettings.stat3Icon,
                stat4Label: document.getElementById('settingsStat4Label').value.trim() || defaultSettings.stat4Label,
                stat4Icon: document.getElementById('settingsStat4Icon').value.trim() || defaultSettings.stat4Icon,
                language: currentLanguage
            };
            
            localStorage.setItem('plannerSettings', JSON.stringify(customSettings));
            loadCustomSettings();
            closeSettingsModal();
        }

        function resetToDefault() {
            if (confirm(t('resetConfirm'))) {
                customSettings = {};
                localStorage.removeItem('plannerSettings');
                loadCustomSettings();
                
                // Update form fields
                document.getElementById('settingsTitle').value = defaultSettings.title;
                document.getElementById('settingsStat1Label').value = defaultSettings.stat1Label;
                document.getElementById('settingsStat1Icon').value = defaultSettings.stat1Icon;
                document.getElementById('settingsStat2Label').value = defaultSettings.stat2Label;
                document.getElementById('settingsStat2Icon').value = defaultSettings.stat2Icon;
                document.getElementById('settingsStat3Label').value = defaultSettings.stat3Label;
                document.getElementById('settingsStat3Icon').value = defaultSettings.stat3Icon;
                document.getElementById('settingsStat4Label').value = defaultSettings.stat4Label;
                document.getElementById('settingsStat4Icon').value = defaultSettings.stat4Icon;
            }
        }

        // Project management functions
        function openAddModal() {
            editingId = null;
            document.getElementById('modalTitle').textContent = t('addNewProject');
            document.getElementById('projectForm').reset();
            document.getElementById('projectModal').classList.remove('hidden');
            document.getElementById('projectModal').classList.add('flex');
        }

        function openEditModal(id) {
            editingId = id;
            const project = projects.find(p => p.id === id);
            if (!project) return;

            document.getElementById('modalTitle').textContent = t('editProject');
            document.getElementById('projectName').value = project.name;
            document.getElementById('clientName').value = project.clientName;
            document.getElementById('platform').value = project.platform || '';
            document.getElementById('projectDescription').value = project.description;
            document.getElementById('startDate').value = project.startDate;
            document.getElementById('endDate').value = project.endDate;
            document.getElementById('priority').value = project.priority;
            document.getElementById('status').value = project.status;
            document.getElementById('projectPrice').value = project.price || 0;
            
            document.getElementById('projectModal').classList.remove('hidden');
            document.getElementById('projectModal').classList.add('flex');
        }

        function closeModal() {
            document.getElementById('projectModal').classList.add('hidden');
            document.getElementById('projectModal').classList.remove('flex');
        }

        function saveProject(e) {
            e.preventDefault();
            
            const projectData = {
                id: editingId || Date.now(),
                name: document.getElementById('projectName').value,
                clientName: document.getElementById('clientName').value,
                platform: document.getElementById('platform').value,
                description: document.getElementById('projectDescription').value,
                startDate: document.getElementById('startDate').value,
                endDate: document.getElementById('endDate').value,
                priority: document.getElementById('priority').value,
                status: document.getElementById('status').value,
                price: parseFloat(document.getElementById('projectPrice').value) || 0,
                createdAt: editingId ? projects.find(p => p.id === editingId).createdAt : new Date().toISOString(),
                createdBy: currentUser // Track who created the project
            };

            if (editingId) {
                const index = projects.findIndex(p => p.id === editingId);
                projects[index] = projectData;
                
                // Track project update
                trackUserActivity('PROJECT_UPDATED', {
                    projectId: editingId,
                    projectName: projectData.name,
                    changes: 'Project details updated'
                });
            } else {
                projects.push(projectData);
                
                // Track project creation
                trackUserActivity('PROJECT_CREATED', {
                    projectId: projectData.id,
                    projectName: projectData.name,
                    clientName: projectData.clientName,
                    platform: projectData.platform
                });
                
                // Update user stats
                const stats = JSON.parse(localStorage.getItem('userStats') || '{}');
                if (stats[currentUser]) {
                    stats[currentUser].totalProjects++;
                    const today = new Date().toDateString();
                    if (stats[currentUser].dailyActivity[today]) {
                        stats[currentUser].dailyActivity[today].projectsCreated++;
                    }
                    localStorage.setItem('userStats', JSON.stringify(stats));
                }
            }

            localStorage.setItem('workPlanner', JSON.stringify(projects));
            renderProjects();
            updateStats();
            closeModal();
        }

        function toggleProjectStatus(id) {
            const project = projects.find(p => p.id === id);
            if (!project) return;
            
            // Toggle between completed and pending
            project.status = project.status === 'completed' ? 'pending' : 'completed';
            
            localStorage.setItem('workPlanner', JSON.stringify(projects));
            renderProjects();
            updateStats();
        }

        function deleteProject(id) {
            if (confirm(t('deleteConfirm'))) {
                projects = projects.filter(p => p.id !== id);
                localStorage.setItem('workPlanner', JSON.stringify(projects));
                renderProjects();
                updateStats();
            }
        }

        function renderProjects() {
            const container = document.getElementById('projectsList');
            if (!container) return;
            
            if (projects.length === 0) {
                container.innerHTML = `
                    <div class="p-8 text-center text-gray-500">
                        <span class="text-4xl mb-4 block">üìù</span>
                        <p>${t('noProjects')}</p>
                    </div>
                `;
                return;
            }

            const sortedProjects = [...projects].sort((a, b) => {
                const priorityOrder = { high: 3, medium: 2, low: 1 };
                return priorityOrder[b.priority] - priorityOrder[a.priority];
            });

            container.innerHTML = sortedProjects.map(project => {
                const priorityColors = {
                    high: 'bg-red-100 text-red-800',
                    medium: 'bg-yellow-100 text-yellow-800',
                    low: 'bg-green-100 text-green-800'
                };

                const statusColors = {
                    pending: 'bg-gray-100 text-gray-800',
                    progress: 'bg-blue-100 text-blue-800',
                    completed: 'bg-green-100 text-green-800'
                };

                const priorityIcons = {
                    high: 'üî•',
                    medium: '‚ö°',
                    low: 'üìù'
                };

                const statusIcons = {
                    pending: '‚è≥',
                    progress: 'üîÑ',
                    completed: '‚úÖ'
                };

                return `
                    <div class="p-6 priority-${project.priority} hover:bg-gray-50 transition-colors ${project.status === 'completed' ? 'bg-green-50' : ''}">
                        <div class="flex flex-col md:flex-row md:items-center justify-between gap-4">
                            <div class="flex items-start gap-4 flex-1">
                                <div class="flex items-center mt-1">
                                    <input type="checkbox" 
                                           ${project.status === 'completed' ? 'checked' : ''} 
                                           onchange="toggleProjectStatus(${project.id})"
                                           class="w-5 h-5 text-green-600 bg-gray-100 border-gray-300 rounded focus:ring-green-500 focus:ring-2 cursor-pointer">
                                </div>
                                <div class="flex-1">
                                    <div class="flex items-center gap-3 mb-2">
                                        <h3 class="text-lg font-semibold text-gray-800 ${project.status === 'completed' ? 'line-through text-gray-500' : ''}">${project.name}</h3>
                                        <span class="px-2 py-1 rounded-full text-xs font-medium ${priorityColors[project.priority]}">
                                            ${priorityIcons[project.priority]} ${t(project.priority)}
                                        </span>
                                        <span class="px-2 py-1 rounded-full text-xs font-medium ${statusColors[project.status]}">
                                            ${statusIcons[project.status]} ${t(project.status)}
                                        </span>
                                    </div>
                                    <p class="text-blue-600 font-medium mb-1 ${project.status === 'completed' ? 'text-gray-400' : ''}">üë§ ${t('client')}: ${project.clientName}</p>
                                    ${project.platform ? `<p class="text-purple-600 font-medium mb-1 ${project.status === 'completed' ? 'text-gray-400' : ''}">üì± ${t('platform')}: ${getPlatformDisplay(project.platform)}</p>` : ''}
                                    <p class="text-gray-600 mb-2 ${project.status === 'completed' ? 'text-gray-400' : ''}">${project.description}</p>
                                    <div class="flex flex-wrap gap-4 text-sm text-gray-500">
                                        <span>üìÖ ${formatDate(project.startDate)} - ${formatDate(project.endDate)}</span>
                                        <span class="font-semibold text-purple-600 ${project.status === 'completed' ? 'text-gray-400' : ''}">üí∞ ${formatCurrency(project.price)}</span>
                                    </div>
                                </div>
                            </div>
                            <div class="flex gap-2">
                                <button onclick="openEditModal(${project.id})" 
                                        class="px-4 py-2 glass-button text-blue-700 rounded-lg hover:bg-blue-500/20 transition-colors">
                                    ${t('edit')}
                                </button>
                                <button onclick="deleteProject(${project.id})" 
                                        class="px-4 py-2 glass-button text-red-700 rounded-lg hover:bg-red-500/20 transition-colors">
                                    ${t('delete')}
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function filterProjects() {
            const search = document.getElementById('searchInput').value.toLowerCase();
            const priorityFilter = document.getElementById('priorityFilter').value;
            const statusFilter = document.getElementById('statusFilter').value;

            let filtered = projects.filter(project => {
                const matchesSearch = project.name.toLowerCase().includes(search) || 
                                    project.description.toLowerCase().includes(search) ||
                                    project.clientName.toLowerCase().includes(search) ||
                                    (project.platform && project.platform.toLowerCase().includes(search));
                const matchesPriority = !priorityFilter || project.priority === priorityFilter;
                const matchesStatus = !statusFilter || project.status === statusFilter;
                
                return matchesSearch && matchesPriority && matchesStatus;
            });

            // Temporarily update the display
            const container = document.getElementById('projectsList');
            if (filtered.length === 0) {
                container.innerHTML = `
                    <div class="p-8 text-center text-gray-500">
                        <span class="text-4xl mb-4 block">üîç</span>
                        <p>${t('noMatchingProjects')}</p>
                    </div>
                `;
                return;
            }

            // Use the same rendering logic but with filtered data
            const originalProjects = projects;
            projects = filtered;
            renderProjects();
            projects = originalProjects;
        }

        function updateStats() {
            const totalElement = document.getElementById('totalProjects');
            const highElement = document.getElementById('highPriority');
            const completedElement = document.getElementById('completedProjects');
            const valueElement = document.getElementById('totalValue');
            
            if (totalElement) totalElement.textContent = projects.length;
            if (highElement) highElement.textContent = projects.filter(p => p.priority === 'high').length;
            if (completedElement) completedElement.textContent = projects.filter(p => p.status === 'completed').length;
            
            const totalValue = projects.reduce((sum, project) => sum + (project.price || 0), 0);
            if (valueElement) valueElement.textContent = formatCurrency(totalValue);
        }

        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('id-ID', { 
                day: 'numeric', 
                month: 'short', 
                year: 'numeric' 
            });
        }

        function formatCurrency(amount) {
            return new Intl.NumberFormat('id-ID', {
                style: 'currency',
                currency: 'IDR',
                minimumFractionDigits: 0
            }).format(amount);
        }

        function getPlatformDisplay(platform) {
            const platformIcons = {
                'fiverr': 'üü¢',
                'upwork': 'üîµ',
                'facebook': 'üîµ',
                'tiktok': '‚ö´',
                'instagram': 'üü£',
                'linkedin': 'üîµ',
                'freelancer': 'üü†',
                'direct': 'üíº',
                'referral': 'ü§ù',
                'other': 'üì±'
            };
            const icon = platformIcons[platform] || 'üì±';
            const translatedName = t(platform) || platform;
            return `${icon} ${translatedName.replace(/^[üü¢üîµ‚ö´üü£üü†üíºü§ùüì±]\s*/, '')}`;
        }

        function exportToExcel() {
            if (projects.length === 0) {
                alert(t('noDataExport'));
                return;
            }

            const exportData = projects.map(project => ({
                'Nama Proyek': project.name,
                'Nama Client': project.clientName,
                'Platform': project.platform ? getPlatformDisplay(project.platform) : '-',
                'Deskripsi': project.description,
                'Tanggal Mulai': project.startDate,
                'Tanggal Selesai': project.endDate,
                'Prioritas': project.priority.charAt(0).toUpperCase() + project.priority.slice(1),
                'Status': project.status === 'progress' ? 'Dalam Proses' : project.status.charAt(0).toUpperCase() + project.status.slice(1),
                'Total Harga (Rp)': project.price || 0,
                'Dibuat': new Date(project.createdAt).toLocaleDateString('id-ID')
            }));

            const ws = XLSX.utils.json_to_sheet(exportData);
            const wb = XLSX.utils.book_new();
            XLSX.utils.book_append_sheet(wb, ws, 'Planner Pekerjaan');

            // Auto-fit column widths
            const colWidths = [];
            Object.keys(exportData[0]).forEach(key => {
                const maxLength = Math.max(
                    key.length,
                    ...exportData.map(row => String(row[key]).length)
                );
                colWidths.push({ wch: Math.min(maxLength + 2, 50) });
            });
            ws['!cols'] = colWidths;

            const fileName = `Planner_Pekerjaan_${new Date().toISOString().split('T')[0]}.xlsx`;
            XLSX.writeFile(wb, fileName);
        }

        // Print functions
        function openPrintModal() {
            // Load invoice settings from localStorage
            loadInvoiceSettings();
            
            // Populate project dropdown for invoice
            populateInvoiceProjects();
            
            // Set default dates
            const today = new Date().toISOString().split('T')[0];
            const dueDate = new Date();
            dueDate.setDate(dueDate.getDate() + 30);
            
            document.getElementById('invoiceDate').value = today;
            document.getElementById('invoiceDueDate').value = dueDate.toISOString().split('T')[0];
            
            // Generate invoice number
            const invoiceCount = parseInt(localStorage.getItem('invoiceCounter') || '0') + 1;
            document.getElementById('invoiceNumber').value = `INV-${String(invoiceCount).padStart(3, '0')}`;
            
            document.getElementById('printModal').classList.remove('hidden');
            document.getElementById('printModal').classList.add('flex');
        }

        function closePrintModal() {
            document.getElementById('printModal').classList.add('hidden');
            document.getElementById('printModal').classList.remove('flex');
        }

        function showReportPrint() {
            document.getElementById('reportPrintSection').classList.remove('hidden');
            document.getElementById('invoicePrintSection').classList.add('hidden');
            
            document.getElementById('reportPrintTab').classList.add('bg-white/60', 'text-blue-700', 'shadow-sm');
            document.getElementById('reportPrintTab').classList.remove('text-gray-600');
            document.getElementById('invoicePrintTab').classList.remove('bg-white/60', 'text-blue-700', 'shadow-sm');
            document.getElementById('invoicePrintTab').classList.add('text-gray-600');
            
            document.getElementById('printReportBtn').classList.remove('hidden');
            document.getElementById('printInvoiceBtn').classList.add('hidden');
            document.getElementById('saveInvoicePdfBtn').classList.add('hidden');
            document.getElementById('saveInvoicePngBtn').classList.add('hidden');
            document.getElementById('editInvoiceBtn').classList.add('hidden');
        }

        function showInvoicePrint() {
            document.getElementById('reportPrintSection').classList.add('hidden');
            document.getElementById('invoicePrintSection').classList.remove('hidden');
            
            document.getElementById('invoicePrintTab').classList.add('bg-white/60', 'text-green-700', 'shadow-sm');
            document.getElementById('invoicePrintTab').classList.remove('text-gray-600');
            document.getElementById('reportPrintTab').classList.remove('bg-white/60', 'text-blue-700', 'shadow-sm');
            document.getElementById('reportPrintTab').classList.add('text-gray-600');
            
            document.getElementById('printReportBtn').classList.add('hidden');
            document.getElementById('printInvoiceBtn').classList.remove('hidden');
            document.getElementById('saveInvoicePdfBtn').classList.remove('hidden');
            document.getElementById('saveInvoicePngBtn').classList.remove('hidden');
            document.getElementById('editInvoiceBtn').classList.remove('hidden');
        }

        function populateInvoiceProjects() {
            const select = document.getElementById('invoiceProject');
            select.innerHTML = '<option value="">Pilih Proyek...</option>';
            
            projects.forEach(project => {
                const option = document.createElement('option');
                option.value = project.id;
                option.textContent = `${project.name} - ${project.clientName} (${formatCurrency(project.price || 0)})`;
                select.appendChild(option);
            });
        }

        function loadInvoiceSettings() {
            const settings = JSON.parse(localStorage.getItem('invoiceSettings') || '{}');
            
            if (settings.companyName) document.getElementById('companyName').value = settings.companyName;
            if (settings.companyAddress) document.getElementById('companyAddress').value = settings.companyAddress;
            if (settings.companyPhone) document.getElementById('companyPhone').value = settings.companyPhone;
            if (settings.companyEmail) document.getElementById('companyEmail').value = settings.companyEmail;
            if (settings.companyWebsite) document.getElementById('companyWebsite').value = settings.companyWebsite;
            if (settings.bankInfo) document.getElementById('bankInfo').value = settings.bankInfo;
            if (settings.invoiceNotes) document.getElementById('invoiceNotes').value = settings.invoiceNotes;
        }

        function saveInvoiceSettings() {
            const settings = {
                companyName: document.getElementById('companyName').value,
                companyAddress: document.getElementById('companyAddress').value,
                companyPhone: document.getElementById('companyPhone').value,
                companyEmail: document.getElementById('companyEmail').value,
                companyWebsite: document.getElementById('companyWebsite').value,
                bankInfo: document.getElementById('bankInfo').value,
                invoiceNotes: document.getElementById('invoiceNotes').value
            };
            
            localStorage.setItem('invoiceSettings', JSON.stringify(settings));
        }

        function printInvoice() {
            const projectId = document.getElementById('invoiceProject').value;
            if (!projectId) {
                alert('‚ùå ' + t('selectProjectFirst'));
                return;
            }
            
            const project = projects.find(p => p.id == projectId);
            if (!project) {
                alert('‚ùå ' + t('projectNotFound'));
                return;
            }
            
            // Save invoice settings
            saveInvoiceSettings();
            
            // Get invoice data
            const invoiceData = {
                number: document.getElementById('invoiceNumber').value,
                date: document.getElementById('invoiceDate').value,
                dueDate: document.getElementById('invoiceDueDate').value,
                format: document.getElementById('invoiceFormat').value,
                tax: parseFloat(document.getElementById('invoiceTax').value) || 0,
                discount: parseFloat(document.getElementById('invoiceDiscount').value) || 0,
                company: {
                    name: document.getElementById('companyName').value,
                    address: document.getElementById('companyAddress').value,
                    phone: document.getElementById('companyPhone').value,
                    email: document.getElementById('companyEmail').value,
                    website: document.getElementById('companyWebsite').value
                },
                notes: document.getElementById('invoiceNotes').value,
                bankInfo: document.getElementById('bankInfo').value,
                project: project
            };
            
            // Generate invoice content
            const invoiceContent = generateInvoiceContent(invoiceData);
            
            // Create print window
            const printWindow = document.createElement('div');
            printWindow.id = 'printContent';
            printWindow.className = `invoice-${invoiceData.format}`;
            printWindow.innerHTML = invoiceContent;
            printWindow.style.display = 'none';
            document.body.appendChild(printWindow);
            
            // Update invoice counter
            const currentCounter = parseInt(localStorage.getItem('invoiceCounter') || '0');
            localStorage.setItem('invoiceCounter', (currentCounter + 1).toString());
            
            // Print
            window.print();
            
            // Clean up
            setTimeout(() => {
                document.body.removeChild(printWindow);
            }, 1000);
            
            closePrintModal();
        }

        function generateInvoiceContent(data) {
            const subtotal = data.project.price || 0;
            const discountAmount = subtotal * (data.discount / 100);
            const afterDiscount = subtotal - discountAmount;
            const taxAmount = afterDiscount * (data.tax / 100);
            const total = afterDiscount + taxAmount;
            
            const formatDate = (dateStr) => {
                return new Date(dateStr).toLocaleDateString('id-ID', {
                    day: 'numeric',
                    month: 'long',
                    year: 'numeric'
                });
            };
            
            return `
                <div class="invoice-container">
                    <div style="text-align: center; margin-bottom: 30px; border-bottom: 3px solid #333; padding-bottom: 20px;">
                        <h1 style="font-size: 28px; margin: 0; font-weight: bold; color: #333;">INVOICE</h1>
                        <p style="font-size: 16px; margin: 5px 0; color: #666;">No: ${data.number}</p>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 40px; margin-bottom: 30px;">
                        <div>
                            <h3 style="font-size: 16px; font-weight: bold; margin-bottom: 10px; color: #333;">DARI:</h3>
                            <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; border-left: 4px solid #007bff;">
                                <p style="font-weight: bold; font-size: 16px; margin: 0 0 8px 0;">${data.company.name || 'Nama Perusahaan'}</p>
                                <p style="margin: 4px 0; line-height: 1.4;">${data.company.address || 'Alamat Perusahaan'}</p>
                                ${data.company.phone ? `<p style="margin: 4px 0;">üìû ${data.company.phone}</p>` : ''}
                                ${data.company.email ? `<p style="margin: 4px 0;">üìß ${data.company.email}</p>` : ''}
                                ${data.company.website ? `<p style="margin: 4px 0;">üåê ${data.company.website}</p>` : ''}
                            </div>
                        </div>
                        
                        <div>
                            <h3 style="font-size: 16px; font-weight: bold; margin-bottom: 10px; color: #333;">KEPADA:</h3>
                            <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; border-left: 4px solid #28a745;">
                                <p style="font-weight: bold; font-size: 16px; margin: 0 0 8px 0;">${data.project.clientName}</p>
                                ${data.project.platform ? `<p style="margin: 4px 0;">üì± Platform: ${getPlatformDisplay(data.project.platform)}</p>` : ''}
                            </div>
                            
                            <div style="margin-top: 20px; background: #fff3cd; padding: 15px; border-radius: 8px; border-left: 4px solid #ffc107;">
                                <p style="margin: 4px 0;"><strong>Tanggal Invoice:</strong> ${formatDate(data.date)}</p>
                                <p style="margin: 4px 0;"><strong>Jatuh Tempo:</strong> ${formatDate(data.dueDate)}</p>
                            </div>
                        </div>
                    </div>
                    
                    <div style="margin-bottom: 30px;">
                        <h3 style="font-size: 16px; font-weight: bold; margin-bottom: 15px; color: #333;">DETAIL PROYEK:</h3>
                        <table style="width: 100%; border-collapse: collapse; background: white; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                            <thead>
                                <tr style="background: #343a40; color: white;">
                                    <th style="padding: 12px; text-align: left; border: 1px solid #ddd;">Deskripsi</th>
                                    <th style="padding: 12px; text-align: center; border: 1px solid #ddd; width: 100px;">Qty</th>
                                    <th style="padding: 12px; text-align: right; border: 1px solid #ddd; width: 150px;">Harga</th>
                                    <th style="padding: 12px; text-align: right; border: 1px solid #ddd; width: 150px;">Total</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td style="padding: 15px; border: 1px solid #ddd; vertical-align: top;">
                                        <strong>${data.project.name}</strong><br>
                                        <small style="color: #666;">${data.project.description || 'Layanan profesional'}</small><br>
                                        <small style="color: #666;">Periode: ${formatDate(data.project.startDate)} - ${formatDate(data.project.endDate)}</small>
                                    </td>
                                    <td style="padding: 15px; border: 1px solid #ddd; text-align: center;">1</td>
                                    <td style="padding: 15px; border: 1px solid #ddd; text-align: right;">${formatCurrency(subtotal)}</td>
                                    <td style="padding: 15px; border: 1px solid #ddd; text-align: right; font-weight: bold;">${formatCurrency(subtotal)}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 300px; gap: 40px; margin-bottom: 30px;">
                        <div>
                            ${data.notes ? `
                                <h3 style="font-size: 16px; font-weight: bold; margin-bottom: 10px; color: #333;">CATATAN:</h3>
                                <div style="background: #e7f3ff; padding: 15px; border-radius: 8px; border-left: 4px solid #007bff;">
                                    <p style="margin: 0; line-height: 1.5;">${data.notes}</p>
                                </div>
                            ` : ''}
                            
                            ${data.bankInfo ? `
                                <h3 style="font-size: 16px; font-weight: bold; margin: 20px 0 10px 0; color: #333;">INFORMASI PEMBAYARAN:</h3>
                                <div style="background: #d4edda; padding: 15px; border-radius: 8px; border-left: 4px solid #28a745;">
                                    <pre style="margin: 0; font-family: inherit; white-space: pre-wrap; line-height: 1.5;">${data.bankInfo}</pre>
                                </div>
                            ` : ''}
                        </div>
                        
                        <div>
                            <table style="width: 100%; border-collapse: collapse; background: white; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                <tr>
                                    <td style="padding: 10px; border: 1px solid #ddd; font-weight: bold;">Subtotal:</td>
                                    <td style="padding: 10px; border: 1px solid #ddd; text-align: right;">${formatCurrency(subtotal)}</td>
                                </tr>
                                ${data.discount > 0 ? `
                                    <tr>
                                        <td style="padding: 10px; border: 1px solid #ddd;">Diskon (${data.discount}%):</td>
                                        <td style="padding: 10px; border: 1px solid #ddd; text-align: right; color: #dc3545;">-${formatCurrency(discountAmount)}</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 10px; border: 1px solid #ddd;">Setelah Diskon:</td>
                                        <td style="padding: 10px; border: 1px solid #ddd; text-align: right;">${formatCurrency(afterDiscount)}</td>
                                    </tr>
                                ` : ''}
                                ${data.tax > 0 ? `
                                    <tr>
                                        <td style="padding: 10px; border: 1px solid #ddd;">PPN (${data.tax}%):</td>
                                        <td style="padding: 10px; border: 1px solid #ddd; text-align: right;">${formatCurrency(taxAmount)}</td>
                                    </tr>
                                ` : ''}
                                <tr style="background: #343a40; color: white; font-weight: bold; font-size: 16px;">
                                    <td style="padding: 15px; border: 1px solid #ddd;">TOTAL:</td>
                                    <td style="padding: 15px; border: 1px solid #ddd; text-align: right;">${formatCurrency(total)}</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                    
                    <div style="margin-top: 40px; text-align: center; border-top: 2px solid #eee; padding-top: 20px;">
                        <p style="margin: 0; color: #666; font-size: 12px;">Terima kasih atas kepercayaan Anda!</p>
                        <p style="margin: 5px 0 0 0; color: #666; font-size: 12px;">Invoice ini dibuat secara otomatis pada ${new Date().toLocaleDateString('id-ID')}</p>
                    </div>
                </div>
            `;
        }

        function printReport() {
            const reportType = document.getElementById('reportType').value;
            const includeStats = document.getElementById('includeStats').checked;
            const includeDescription = document.getElementById('includeDescription').checked;
            const includePrices = document.getElementById('includePrices').checked;
            
            // Filter projects based on report type
            let filteredProjects = [...projects];
            switch (reportType) {
                case 'completed':
                    filteredProjects = projects.filter(p => p.status === 'completed');
                    break;
                case 'pending':
                    filteredProjects = projects.filter(p => p.status === 'pending');
                    break;
                case 'progress':
                    filteredProjects = projects.filter(p => p.status === 'progress');
                    break;
                case 'high':
                    filteredProjects = projects.filter(p => p.priority === 'high');
                    break;
            }
            
            // Generate print content
            const printContent = generatePrintContent(filteredProjects, {
                includeStats,
                includeDescription,
                includePrices,
                reportType
            });
            
            // Create print window
            const printWindow = document.createElement('div');
            printWindow.id = 'printContent';
            printWindow.innerHTML = printContent;
            printWindow.style.display = 'none';
            document.body.appendChild(printWindow);
            
            // Print
            window.print();
            
            // Clean up
            setTimeout(() => {
                document.body.removeChild(printWindow);
            }, 1000);
            
            closePrintModal();
        }

        function generatePrintContent(filteredProjects, options) {
            const currentDate = new Date().toLocaleDateString('id-ID', {
                weekday: 'long',
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
            
            let content = `
                <div class="print-header">
                    <h1 style="font-size: 24px; margin: 0; font-weight: bold;">LAPORAN PLANNER PEKERJAAN</h1>
                    <p style="margin: 5px 0; color: #666;">Dibuat pada: ${currentDate}</p>
                </div>
            `;
            
            // Add statistics if enabled
            if (options.includeStats) {
                const totalProjects = filteredProjects.length;
                const highPriority = filteredProjects.filter(p => p.priority === 'high').length;
                const completed = filteredProjects.filter(p => p.status === 'completed').length;
                const totalValue = filteredProjects.reduce((sum, project) => sum + (project.price || 0), 0);
                
                content += `
                    <div class="print-stats">
                        <div class="print-stat-item">
                            <div style="font-weight: bold; font-size: 18px;">${totalProjects}</div>
                            <div style="font-size: 12px; color: #666;">Total Proyek</div>
                        </div>
                        <div class="print-stat-item">
                            <div style="font-weight: bold; font-size: 18px;">${highPriority}</div>
                            <div style="font-size: 12px; color: #666;">Prioritas Tinggi</div>
                        </div>
                        <div class="print-stat-item">
                            <div style="font-weight: bold; font-size: 18px;">${completed}</div>
                            <div style="font-size: 12px; color: #666;">Selesai</div>
                        </div>
                        <div class="print-stat-item">
                            <div style="font-weight: bold; font-size: 18px;">${formatCurrency(totalValue)}</div>
                            <div style="font-size: 12px; color: #666;">Total Nilai</div>
                        </div>
                    </div>
                `;
            }
            
            // Add projects list
            content += `<h2 style="margin: 20px 0 15px 0; font-size: 18px;">Laporan Proyek</h2>`;
            
            if (filteredProjects.length === 0) {
                content += `<p style="text-align: center; color: #666; font-style: italic;">Tidak ada proyek untuk ditampilkan.</p>`;
            } else {
                filteredProjects.forEach((project, index) => {
                    const priorityText = {
                        high: 'Tinggi',
                        medium: 'Sedang',
                        low: 'Rendah'
                    };
                    
                    const statusText = {
                        pending: 'Menunggu',
                        progress: 'Dalam Proses',
                        completed: 'Selesai'
                    };
                    
                    content += `
                        <div class="print-project">
                            <div class="print-project-header">
                                <span>${index + 1}. ${project.name}</span>
                                <span style="font-size: 12px; color: #666;">${project.status === 'completed' ? '‚úÖ' : project.status === 'progress' ? 'üîÑ' : '‚è≥'} ${statusText[project.status]}</span>
                            </div>
                            <div class="print-project-details">
                                <strong>Klien:</strong> ${project.clientName}
                            </div>
                            ${project.platform ? `
                                <div class="print-project-details">
                                    <strong>Platform:</strong> ${getPlatformDisplay(project.platform)}
                                </div>
                            ` : ''}
                            ${options.includeDescription && project.description ? `
                                <div class="print-project-details">
                                    <strong>Deskripsi:</strong> ${project.description}
                                </div>
                            ` : ''}
                            <div class="print-project-details">
                                <strong>Periode:</strong> ${formatDate(project.startDate)} - ${formatDate(project.endDate)}
                            </div>
                            <div class="print-project-details">
                                <strong>Prioritas:</strong> ${priorityText[project.priority]}
                            </div>
                            ${options.includePrices ? `
                                <div class="print-project-details">
                                    <strong>Harga:</strong> ${formatCurrency(project.price || 0)}
                                </div>
                            ` : ''}
                        </div>
                    `;
                });
            }
            
            // Add footer
            content += `
                <div class="print-footer">
                    <p>Laporan ini dibuat secara otomatis oleh Planner Pekerjaan Bulanan</p>
                    <p>Total ${filteredProjects.length} proyek ditampilkan</p>
                </div>
            `;
            
            return content;
        }

        // Save invoice as PDF function
        function saveInvoiceAsPDF() {
            const projectId = document.getElementById('invoiceProject').value;
            if (!projectId) {
                alert('‚ùå ' + t('selectProjectFirst'));
                return;
            }
            
            const project = projects.find(p => p.id == projectId);
            if (!project) {
                alert('‚ùå ' + t('projectNotFound'));
                return;
            }
            
            // Save invoice settings
            saveInvoiceSettings();
            
            // Get invoice data
            const invoiceData = {
                number: document.getElementById('invoiceNumber').value,
                date: document.getElementById('invoiceDate').value,
                dueDate: document.getElementById('invoiceDueDate').value,
                format: document.getElementById('invoiceFormat').value,
                tax: parseFloat(document.getElementById('invoiceTax').value) || 0,
                discount: parseFloat(document.getElementById('invoiceDiscount').value) || 0,
                company: {
                    name: document.getElementById('companyName').value,
                    address: document.getElementById('companyAddress').value,
                    phone: document.getElementById('companyPhone').value,
                    email: document.getElementById('companyEmail').value,
                    website: document.getElementById('companyWebsite').value
                },
                notes: document.getElementById('invoiceNotes').value,
                bankInfo: document.getElementById('bankInfo').value,
                project: project
            };
            
            // Generate invoice content
            const invoiceContent = generateInvoiceContent(invoiceData);
            
            // Create temporary element for PDF generation
            const tempElement = document.createElement('div');
            tempElement.innerHTML = invoiceContent;
            tempElement.style.width = '210mm';
            tempElement.style.minHeight = '297mm';
            tempElement.style.padding = '20mm';
            tempElement.style.backgroundColor = 'white';
            tempElement.style.color = 'black';
            tempElement.style.fontSize = '12px';
            tempElement.style.lineHeight = '1.4';
            tempElement.style.fontFamily = 'Arial, sans-serif';
            
            // PDF options based on format
            const formatOptions = {
                a4: [210, 297],
                a5: [148, 210],
                a6: [105, 148],
                letter: [216, 279],
                legal: [216, 356],
                receipt: [80, 200]
            };
            
            const [width, height] = formatOptions[invoiceData.format] || formatOptions.a4;
            
            const opt = {
                margin: 0,
                filename: `Invoice_${invoiceData.number}_${project.name.replace(/[^a-zA-Z0-9]/g, '_')}.pdf`,
                image: { type: 'jpeg', quality: 0.98 },
                html2canvas: { 
                    scale: 2,
                    useCORS: true,
                    letterRendering: true,
                    width: width * 3.78, // Convert mm to pixels (1mm = 3.78px at 96dpi)
                    height: height * 3.78
                },
                jsPDF: { 
                    unit: 'mm', 
                    format: [width, height], 
                    orientation: width > height ? 'landscape' : 'portrait'
                }
            };
            
            // Generate and download PDF
            html2pdf().set(opt).from(tempElement).save().then(() => {
                // Update invoice counter
                const currentCounter = parseInt(localStorage.getItem('invoiceCounter') || '0');
                localStorage.setItem('invoiceCounter', (currentCounter + 1).toString());
                
                // Show success message
                alert('‚úÖ Invoice berhasil disimpan sebagai PDF!');
            }).catch(error => {
                console.error('Error generating PDF:', error);
                alert('‚ùå Gagal menyimpan PDF. Silakan coba lagi.');
            });
        }

        // Save invoice as PNG function
        function saveInvoiceAsPNG() {
            const projectId = document.getElementById('invoiceProject').value;
            if (!projectId) {
                alert('‚ùå ' + t('selectProjectFirst'));
                return;
            }
            
            const project = projects.find(p => p.id == projectId);
            if (!project) {
                alert('‚ùå ' + t('projectNotFound'));
                return;
            }
            
            // Save invoice settings
            saveInvoiceSettings();
            
            // Get invoice data
            const invoiceData = {
                number: document.getElementById('invoiceNumber').value,
                date: document.getElementById('invoiceDate').value,
                dueDate: document.getElementById('invoiceDueDate').value,
                format: document.getElementById('invoiceFormat').value,
                tax: parseFloat(document.getElementById('invoiceTax').value) || 0,
                discount: parseFloat(document.getElementById('invoiceDiscount').value) || 0,
                company: {
                    name: document.getElementById('companyName').value,
                    address: document.getElementById('companyAddress').value,
                    phone: document.getElementById('companyPhone').value,
                    email: document.getElementById('companyEmail').value,
                    website: document.getElementById('companyWebsite').value
                },
                notes: document.getElementById('invoiceNotes').value,
                bankInfo: document.getElementById('bankInfo').value,
                project: project
            };
            
            // Generate invoice content
            const invoiceContent = generateInvoiceContent(invoiceData);
            
            // Create temporary element for PNG generation
            const tempElement = document.createElement('div');
            tempElement.innerHTML = invoiceContent;
            tempElement.style.width = '794px'; // A4 width in pixels at 96dpi
            tempElement.style.minHeight = '1123px'; // A4 height in pixels at 96dpi
            tempElement.style.padding = '40px';
            tempElement.style.backgroundColor = 'white';
            tempElement.style.color = 'black';
            tempElement.style.fontSize = '14px';
            tempElement.style.lineHeight = '1.4';
            tempElement.style.fontFamily = 'Arial, sans-serif';
            tempElement.style.position = 'absolute';
            tempElement.style.left = '-9999px';
            tempElement.style.top = '0';
            
            document.body.appendChild(tempElement);
            
            // Use html2canvas to generate PNG
            html2canvas(tempElement, {
                scale: 2,
                useCORS: true,
                letterRendering: true,
                backgroundColor: '#ffffff',
                width: 794,
                height: 1123
            }).then(canvas => {
                // Create download link
                const link = document.createElement('a');
                link.download = `Invoice_${invoiceData.number}_${project.name.replace(/[^a-zA-Z0-9]/g, '_')}.png`;
                link.href = canvas.toDataURL('image/png');
                
                // Trigger download
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                
                // Clean up
                document.body.removeChild(tempElement);
                
                // Update invoice counter
                const currentCounter = parseInt(localStorage.getItem('invoiceCounter') || '0');
                localStorage.setItem('invoiceCounter', (currentCounter + 1).toString());
                
                // Show success message
                alert('‚úÖ Invoice berhasil disimpan sebagai PNG!');
            }).catch(error => {
                console.error('Error generating PNG:', error);
                document.body.removeChild(tempElement);
                alert('‚ùå Gagal menyimpan PNG. Silakan coba lagi.');
            });
        }

        // Invoice editor variables
        let currentInvoiceData = null;
        let logoImage = null;
        let signatureImage = null;

        // Edit invoice directly function
        function editInvoiceDirectly() {
            const projectId = document.getElementById('invoiceProject').value;
            if (!projectId) {
                alert('‚ùå ' + t('selectProjectFirst'));
                return;
            }
            
            const project = projects.find(p => p.id == projectId);
            if (!project) {
                alert('‚ùå ' + t('projectNotFound'));
                return;
            }
            
            // Save invoice settings
            saveInvoiceSettings();
            
            // Get invoice data
            currentInvoiceData = {
                number: document.getElementById('invoiceNumber').value,
                date: document.getElementById('invoiceDate').value,
                dueDate: document.getElementById('invoiceDueDate').value,
                format: document.getElementById('invoiceFormat').value,
                tax: parseFloat(document.getElementById('invoiceTax').value) || 0,
                discount: parseFloat(document.getElementById('invoiceDiscount').value) || 0,
                company: {
                    name: document.getElementById('companyName').value,
                    address: document.getElementById('companyAddress').value,
                    phone: document.getElementById('companyPhone').value,
                    email: document.getElementById('companyEmail').value,
                    website: document.getElementById('companyWebsite').value
                },
                notes: document.getElementById('invoiceNotes').value,
                bankInfo: document.getElementById('bankInfo').value,
                project: project
            };
            
            // Load saved template if exists
            loadInvoiceTemplate();
            
            // Populate editor fields
            populateInvoiceEditor();
            
            // Generate initial preview
            updateInvoicePreview();
            
            // Show editor modal
            document.getElementById('invoiceEditorModal').classList.remove('hidden');
            document.getElementById('invoiceEditorModal').classList.add('flex');
            
            // Close print modal
            closePrintModal();
        }

        function closeInvoiceEditor() {
            document.getElementById('invoiceEditorModal').classList.add('hidden');
            document.getElementById('invoiceEditorModal').classList.remove('flex');
        }

        function populateInvoiceEditor() {
            // Populate company info
            document.getElementById('editCompanyName').value = currentInvoiceData.company.name || '';
            document.getElementById('editCompanyAddress').value = currentInvoiceData.company.address || '';
            document.getElementById('editCompanyPhone').value = currentInvoiceData.company.phone || '';
            document.getElementById('editCompanyEmail').value = currentInvoiceData.company.email || '';
            
            // Set default footer
            document.getElementById('invoiceFooter').value = 'Terima kasih atas kepercayaan Anda!';
        }

        function handleLogoUpload(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    logoImage = e.target.result;
                    document.getElementById('logoPreview').innerHTML = `
                        <img src="${logoImage}" alt="Logo" class="w-20 h-20 object-contain mx-auto rounded-lg">
                    `;
                    updateInvoicePreview();
                };
                reader.readAsDataURL(file);
            }
        }

        function handleSignatureUpload(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    signatureImage = e.target.result;
                    document.getElementById('signaturePreview').innerHTML = `
                        <img src="${signatureImage}" alt="Signature" class="w-24 h-16 object-contain mx-auto rounded-lg">
                    `;
                    updateInvoicePreview();
                };
                reader.readAsDataURL(file);
            }
        }

        function updateInvoicePreview() {
            if (!currentInvoiceData) return;
            
            const container = document.getElementById('invoicePreviewContainer');
            const headerColor = document.getElementById('headerColor').value;
            const invoiceTitle = document.getElementById('invoiceTitle').value;
            const companyName = document.getElementById('editCompanyName').value || 'Nama Perusahaan';
            const companyAddress = document.getElementById('editCompanyAddress').value || 'Alamat Perusahaan';
            const companyPhone = document.getElementById('editCompanyPhone').value;
            const companyEmail = document.getElementById('editCompanyEmail').value;
            const signatureName = document.getElementById('signatureName').value;
            const signatureTitle = document.getElementById('signatureTitle').value;
            const footerText = document.getElementById('invoiceFooter').value;
            
            // Calculate totals
            const subtotal = currentInvoiceData.project.price || 0;
            const discountAmount = subtotal * (currentInvoiceData.discount / 100);
            const afterDiscount = subtotal - discountAmount;
            const taxAmount = afterDiscount * (currentInvoiceData.tax / 100);
            const total = afterDiscount + taxAmount;
            
            // Format dates
            const formatDate = (dateStr) => {
                return new Date(dateStr).toLocaleDateString('id-ID', {
                    day: 'numeric',
                    month: 'long',
                    year: 'numeric'
                });
            };
            
            container.innerHTML = `
                <div style="font-family: Arial, sans-serif; font-size: 12px; line-height: 1.4; color: #333;">
                    <!-- Header -->
                    <div style="text-align: center; margin-bottom: 30px; border-bottom: 3px solid ${headerColor}; padding-bottom: 20px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                            <div style="flex: 1;">
                                ${logoImage ? `<img src="${logoImage}" alt="Logo" style="max-width: 80px; max-height: 80px; object-fit: contain;">` : '<div style="width: 80px; height: 80px; background: #f0f0f0; border-radius: 8px; display: flex; align-items: center; justify-content: center; color: #999;">üè¢</div>'}
                            </div>
                            <div style="flex: 2; text-align: center;">
                                <h1 style="font-size: 32px; margin: 0; font-weight: bold; color: ${headerColor};">${invoiceTitle}</h1>
                                <p style="font-size: 16px; margin: 5px 0; color: #666;">No: ${currentInvoiceData.number}</p>
                            </div>
                            <div style="flex: 1;"></div>
                        </div>
                    </div>
                    
                    <!-- Company and Client Info -->
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 40px; margin-bottom: 30px;">
                        <div>
                            <h3 style="font-size: 16px; font-weight: bold; margin-bottom: 10px; color: ${headerColor};">DARI:</h3>
                            <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; border-left: 4px solid ${headerColor};">
                                <p style="font-weight: bold; font-size: 16px; margin: 0 0 8px 0;">${companyName}</p>
                                <p style="margin: 4px 0; line-height: 1.4;">${companyAddress}</p>
                                ${companyPhone ? `<p style="margin: 4px 0;">üìû ${companyPhone}</p>` : ''}
                                ${companyEmail ? `<p style="margin: 4px 0;">üìß ${companyEmail}</p>` : ''}
                            </div>
                        </div>
                        
                        <div>
                            <h3 style="font-size: 16px; font-weight: bold; margin-bottom: 10px; color: ${headerColor};">KEPADA:</h3>
                            <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; border-left: 4px solid #28a745;">
                                <p style="font-weight: bold; font-size: 16px; margin: 0 0 8px 0;">${currentInvoiceData.project.clientName}</p>
                                ${currentInvoiceData.project.platform ? `<p style="margin: 4px 0;">üì± Platform: ${getPlatformDisplay(currentInvoiceData.project.platform)}</p>` : ''}
                            </div>
                            
                            <div style="margin-top: 20px; background: #fff3cd; padding: 15px; border-radius: 8px; border-left: 4px solid #ffc107;">
                                <p style="margin: 4px 0;"><strong>Tanggal Invoice:</strong> ${formatDate(currentInvoiceData.date)}</p>
                                <p style="margin: 4px 0;"><strong>Jatuh Tempo:</strong> ${formatDate(currentInvoiceData.dueDate)}</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Project Details -->
                    <div style="margin-bottom: 30px;">
                        <h3 style="font-size: 16px; font-weight: bold; margin-bottom: 15px; color: ${headerColor};">DETAIL PROYEK:</h3>
                        <table style="width: 100%; border-collapse: collapse; background: white; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                            <thead>
                                <tr style="background: ${headerColor}; color: white;">
                                    <th style="padding: 12px; text-align: left; border: 1px solid #ddd;">Deskripsi</th>
                                    <th style="padding: 12px; text-align: center; border: 1px solid #ddd; width: 100px;">Qty</th>
                                    <th style="padding: 12px; text-align: right; border: 1px solid #ddd; width: 150px;">Harga</th>
                                    <th style="padding: 12px; text-align: right; border: 1px solid #ddd; width: 150px;">Total</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td style="padding: 15px; border: 1px solid #ddd; vertical-align: top;">
                                        <strong>${currentInvoiceData.project.name}</strong><br>
                                        <small style="color: #666;">${currentInvoiceData.project.description || 'Layanan profesional'}</small><br>
                                        <small style="color: #666;">Periode: ${formatDate(currentInvoiceData.project.startDate)} - ${formatDate(currentInvoiceData.project.endDate)}</small>
                                    </td>
                                    <td style="padding: 15px; border: 1px solid #ddd; text-align: center;">1</td>
                                    <td style="padding: 15px; border: 1px solid #ddd; text-align: right;">${formatCurrency(subtotal)}</td>
                                    <td style="padding: 15px; border: 1px solid #ddd; text-align: right; font-weight: bold;">${formatCurrency(subtotal)}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <!-- Totals and Notes -->
                    <div style="display: grid; grid-template-columns: 1fr 300px; gap: 40px; margin-bottom: 30px;">
                        <div>
                            ${currentInvoiceData.notes ? `
                                <h3 style="font-size: 16px; font-weight: bold; margin-bottom: 10px; color: ${headerColor};">CATATAN:</h3>
                                <div style="background: #e7f3ff; padding: 15px; border-radius: 8px; border-left: 4px solid ${headerColor};">
                                    <p style="margin: 0; line-height: 1.5;">${currentInvoiceData.notes}</p>
                                </div>
                            ` : ''}
                            
                            ${currentInvoiceData.bankInfo ? `
                                <h3 style="font-size: 16px; font-weight: bold; margin: 20px 0 10px 0; color: ${headerColor};">INFORMASI PEMBAYARAN:</h3>
                                <div style="background: #d4edda; padding: 15px; border-radius: 8px; border-left: 4px solid #28a745;">
                                    <pre style="margin: 0; font-family: inherit; white-space: pre-wrap; line-height: 1.5;">${currentInvoiceData.bankInfo}</pre>
                                </div>
                            ` : ''}
                        </div>
                        
                        <div>
                            <table style="width: 100%; border-collapse: collapse; background: white; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                <tr>
                                    <td style="padding: 10px; border: 1px solid #ddd; font-weight: bold;">Subtotal:</td>
                                    <td style="padding: 10px; border: 1px solid #ddd; text-align: right;">${formatCurrency(subtotal)}</td>
                                </tr>
                                ${currentInvoiceData.discount > 0 ? `
                                    <tr>
                                        <td style="padding: 10px; border: 1px solid #ddd;">Diskon (${currentInvoiceData.discount}%):</td>
                                        <td style="padding: 10px; border: 1px solid #ddd; text-align: right; color: #dc3545;">-${formatCurrency(discountAmount)}</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 10px; border: 1px solid #ddd;">Setelah Diskon:</td>
                                        <td style="padding: 10px; border: 1px solid #ddd; text-align: right;">${formatCurrency(afterDiscount)}</td>
                                    </tr>
                                ` : ''}
                                ${currentInvoiceData.tax > 0 ? `
                                    <tr>
                                        <td style="padding: 10px; border: 1px solid #ddd;">PPN (${currentInvoiceData.tax}%):</td>
                                        <td style="padding: 10px; border: 1px solid #ddd; text-align: right;">${formatCurrency(taxAmount)}</td>
                                    </tr>
                                ` : ''}
                                <tr style="background: ${headerColor}; color: white; font-weight: bold; font-size: 16px;">
                                    <td style="padding: 15px; border: 1px solid #ddd;">TOTAL:</td>
                                    <td style="padding: 15px; border: 1px solid #ddd; text-align: right;">${formatCurrency(total)}</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                    
                    <!-- Signature and Footer -->
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 40px; margin-top: 40px;">
                        <div></div>
                        <div style="text-align: center;">
                            ${signatureName || signatureTitle ? `
                                <p style="margin: 0 0 10px 0; font-weight: bold;">Hormat kami,</p>
                                ${signatureImage ? `<img src="${signatureImage}" alt="Signature" style="max-width: 150px; max-height: 80px; object-fit: contain; margin: 10px 0;">` : '<div style="height: 60px;"></div>'}
                                ${signatureName ? `<p style="margin: 5px 0; font-weight: bold; border-top: 1px solid #333; padding-top: 5px; display: inline-block; min-width: 150px;">${signatureName}</p>` : ''}
                                ${signatureTitle ? `<p style="margin: 0; font-size: 11px; color: #666;">${signatureTitle}</p>` : ''}
                            ` : ''}
                        </div>
                    </div>
                    
                    ${footerText ? `
                        <div style="margin-top: 40px; text-align: center; border-top: 2px solid #eee; padding-top: 20px;">
                            <p style="margin: 0; color: #666; font-size: 12px;">${footerText}</p>
                            <p style="margin: 5px 0 0 0; color: #666; font-size: 12px;">Invoice ini dibuat secara otomatis pada ${new Date().toLocaleDateString('id-ID')}</p>
                        </div>
                    ` : ''}
                </div>
            `;
        }

        function saveInvoiceTemplate() {
            const template = {
                logoImage: logoImage,
                signatureImage: signatureImage,
                invoiceTitle: document.getElementById('invoiceTitle').value,
                headerColor: document.getElementById('headerColor').value,
                signatureName: document.getElementById('signatureName').value,
                signatureTitle: document.getElementById('signatureTitle').value,
                invoiceFooter: document.getElementById('invoiceFooter').value
            };
            
            localStorage.setItem('invoiceTemplate', JSON.stringify(template));
            alert('‚úÖ Template invoice berhasil disimpan!');
        }

        function loadInvoiceTemplate() {
            const template = JSON.parse(localStorage.getItem('invoiceTemplate') || '{}');
            
            if (template.logoImage) {
                logoImage = template.logoImage;
                document.getElementById('logoPreview').innerHTML = `
                    <img src="${logoImage}" alt="Logo" class="w-20 h-20 object-contain mx-auto rounded-lg">
                `;
            }
            
            if (template.signatureImage) {
                signatureImage = template.signatureImage;
                document.getElementById('signaturePreview').innerHTML = `
                    <img src="${signatureImage}" alt="Signature" class="w-24 h-16 object-contain mx-auto rounded-lg">
                `;
            }
            
            if (template.invoiceTitle) document.getElementById('invoiceTitle').value = template.invoiceTitle;
            if (template.headerColor) document.getElementById('headerColor').value = template.headerColor;
            if (template.signatureName) document.getElementById('signatureName').value = template.signatureName;
            if (template.signatureTitle) document.getElementById('signatureTitle').value = template.signatureTitle;
            if (template.invoiceFooter) document.getElementById('invoiceFooter').value = template.invoiceFooter;
        }

        function printEditedInvoice() {
            const content = document.getElementById('invoicePreviewContainer').innerHTML;
            
            const printWindow = document.createElement('div');
            printWindow.id = 'printContent';
            printWindow.innerHTML = `<div style="padding: 20mm;">${content}</div>`;
            printWindow.style.display = 'none';
            document.body.appendChild(printWindow);
            
            // Update invoice counter
            const currentCounter = parseInt(localStorage.getItem('invoiceCounter') || '0');
            localStorage.setItem('invoiceCounter', (currentCounter + 1).toString());
            
            window.print();
            
            setTimeout(() => {
                document.body.removeChild(printWindow);
            }, 1000);
        }

        function saveEditedInvoiceAsPDF() {
            const content = document.getElementById('invoicePreviewContainer');
            
            const opt = {
                margin: 10,
                filename: `Invoice_${currentInvoiceData.number}_${currentInvoiceData.project.name.replace(/[^a-zA-Z0-9]/g, '_')}.pdf`,
                image: { type: 'jpeg', quality: 0.98 },
                html2canvas: { scale: 2, useCORS: true, letterRendering: true },
                jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
            };
            
            html2pdf().set(opt).from(content).save().then(() => {
                const currentCounter = parseInt(localStorage.getItem('invoiceCounter') || '0');
                localStorage.setItem('invoiceCounter', (currentCounter + 1).toString());
                alert('‚úÖ Invoice berhasil disimpan sebagai PDF!');
            }).catch(error => {
                console.error('Error generating PDF:', error);
                alert('‚ùå Gagal menyimpan PDF. Silakan coba lagi.');
            });
        }

        function saveEditedInvoiceAsPNG() {
            const content = document.getElementById('invoicePreviewContainer');
            
            html2canvas(content, {
                scale: 2,
                useCORS: true,
                letterRendering: true,
                backgroundColor: '#ffffff'
            }).then(canvas => {
                const link = document.createElement('a');
                link.download = `Invoice_${currentInvoiceData.number}_${currentInvoiceData.project.name.replace(/[^a-zA-Z0-9]/g, '_')}.png`;
                link.href = canvas.toDataURL('image/png');
                
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                
                const currentCounter = parseInt(localStorage.getItem('invoiceCounter') || '0');
                localStorage.setItem('invoiceCounter', (currentCounter + 1).toString());
                
                alert('‚úÖ Invoice berhasil disimpan sebagai PNG!');
            }).catch(error => {
                console.error('Error generating PNG:', error);
                alert('‚ùå Gagal menyimpan PNG. Silakan coba lagi.');
            });
        }

        // Super Admin Dashboard Functions
        function openSuperAdminDashboard() {
            if (currentUser !== SUPER_ADMIN.username) {
                alert('‚ùå Akses ditolak! Hanya Super Admin yang dapat mengakses dashboard ini.');
                return;
            }
            
            // Load dashboard data
            loadSuperAdminData();
            
            document.getElementById('superAdminModal').classList.remove('hidden');
            document.getElementById('superAdminModal').classList.add('flex');
        }
        
        function closeSuperAdminDashboard() {
            document.getElementById('superAdminModal').classList.add('hidden');
            document.getElementById('superAdminModal').classList.remove('flex');
        }
        
        function loadSuperAdminData() {
            // Load statistics
            const stats = JSON.parse(localStorage.getItem('userStats') || '{}');
            const activities = JSON.parse(localStorage.getItem('userActivities') || '[]');
            const allProjects = JSON.parse(localStorage.getItem('workPlanner') || '[]');
            
            // Calculate totals
            const totalUsers = userAccounts.length + 1; // +1 for default admin
            const today = new Date().toDateString();
            const activeToday = Object.keys(stats).filter(username => {
                return stats[username].dailyActivity[today] && stats[username].dailyActivity[today].logins > 0;
            }).length;
            
            // Update overview stats
            document.getElementById('totalUsersCount').textContent = totalUsers;
            document.getElementById('activeUsersToday').textContent = activeToday;
            document.getElementById('totalProjectsAll').textContent = allProjects.length;
            document.getElementById('totalActivities').textContent = activities.length;
            
            // Load users table
            loadUsersTable();
            
            // Load activities
            loadActivitiesLog();
            
            // Load system info
            loadSystemInfo();
        }
        
        function loadUsersTable() {
            const tbody = document.getElementById('usersTableBody');
            const stats = JSON.parse(localStorage.getItem('userStats') || '{}');
            const allProjects = JSON.parse(localStorage.getItem('workPlanner') || '[]');
            
            let rows = '';
            
            // Add default admin
            const adminProjects = allProjects.filter(p => p.createdBy === userCredentials.username).length;
            const adminStats = stats[userCredentials.username] || {};
            const adminLastLogin = adminStats.lastLogin ? new Date(adminStats.lastLogin).toLocaleString('id-ID') : 'Belum pernah';
            const adminStatus = currentUser === userCredentials.username ? 'üü¢ Online' : '‚ö´ Offline';
            
            rows += `
                <tr class="hover:bg-gray-50">
                    <td class="border border-gray-300 px-4 py-2 font-medium">${userCredentials.username}</td>
                    <td class="border border-gray-300 px-4 py-2">-</td>
                    <td class="border border-gray-300 px-4 py-2"><span class="bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs">Admin Default</span></td>
                    <td class="border border-gray-300 px-4 py-2">-</td>
                    <td class="border border-gray-300 px-4 py-2">${adminLastLogin}</td>
                    <td class="border border-gray-300 px-4 py-2">${adminStats.totalLogins || 0}</td>
                    <td class="border border-gray-300 px-4 py-2">${adminProjects}</td>
                    <td class="border border-gray-300 px-4 py-2">${adminStatus}</td>
                </tr>
            `;
            
            // Add registered users
            userAccounts.forEach(user => {
                const userProjects = allProjects.filter(p => p.createdBy === user.username).length;
                const userStats = stats[user.username] || {};
                const lastLogin = userStats.lastLogin ? new Date(userStats.lastLogin).toLocaleString('id-ID') : 'Belum pernah';
                const status = currentUser === user.username ? 'üü¢ Online' : '‚ö´ Offline';
                const createdDate = new Date(user.createdAt).toLocaleDateString('id-ID');
                
                rows += `
                    <tr class="hover:bg-gray-50">
                        <td class="border border-gray-300 px-4 py-2 font-medium">${user.username}</td>
                        <td class="border border-gray-300 px-4 py-2">${user.email || '-'}</td>
                        <td class="border border-gray-300 px-4 py-2"><span class="bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs">User Terdaftar</span></td>
                        <td class="border border-gray-300 px-4 py-2">${createdDate}</td>
                        <td class="border border-gray-300 px-4 py-2">${lastLogin}</td>
                        <td class="border border-gray-300 px-4 py-2">${userStats.totalLogins || 0}</td>
                        <td class="border border-gray-300 px-4 py-2">${userProjects}</td>
                        <td class="border border-gray-300 px-4 py-2">${status}</td>
                    </tr>
                `;
            });
            
            tbody.innerHTML = rows;
        }
        
        function loadActivitiesLog() {
            const activities = JSON.parse(localStorage.getItem('userActivities') || '[]');
            const container = document.getElementById('activitiesContainer');
            
            if (activities.length === 0) {
                container.innerHTML = '<p class="text-center text-gray-500 py-4">Belum ada aktivitas yang tercatat.</p>';
                return;
            }
            
            // Sort by timestamp (newest first)
            const sortedActivities = activities.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
            
            let html = '';
            sortedActivities.slice(0, 50).forEach(activity => { // Show last 50 activities
                const time = new Date(activity.timestamp).toLocaleString('id-ID');
                const actionIcon = getActionIcon(activity.action);
                const actionText = getActionText(activity.action);
                
                html += `
                    <div class="bg-white/40 border border-gray-200 rounded-lg p-3 mb-2">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center gap-3">
                                <span class="text-lg">${actionIcon}</span>
                                <div>
                                    <div class="font-medium text-sm">${activity.username} - ${actionText}</div>
                                    <div class="text-xs text-gray-500">${time}</div>
                                </div>
                            </div>
                            <div class="text-xs text-gray-400">
                                ${activity.sessionId ? activity.sessionId.substring(0, 8) + '...' : ''}
                            </div>
                        </div>
                        ${activity.details && Object.keys(activity.details).length > 0 ? `
                            <div class="mt-2 text-xs text-gray-600 bg-gray-50 rounded p-2">
                                ${JSON.stringify(activity.details, null, 2)}
                            </div>
                        ` : ''}
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }
        
        function getActionIcon(action) {
            const icons = {
                'SUPER_ADMIN_LOGIN': 'üîê',
                'ADMIN_LOGIN': 'üë®‚Äçüíº',
                'USER_LOGIN': 'üë§',
                'PROJECT_CREATED': '‚ûï',
                'PROJECT_UPDATED': '‚úèÔ∏è',
                'PROJECT_COMPLETED': '‚úÖ',
                'EXPORT': 'üìä',
                'PRINT': 'üñ®Ô∏è'
            };
            return icons[action] || 'üìù';
        }
        
        function getActionText(action) {
            const texts = {
                'SUPER_ADMIN_LOGIN': 'Login sebagai Super Admin',
                'ADMIN_LOGIN': 'Login sebagai Admin',
                'USER_LOGIN': 'Login sebagai User',
                'PROJECT_CREATED': 'Membuat proyek baru',
                'PROJECT_UPDATED': 'Mengupdate proyek',
                'PROJECT_COMPLETED': 'Menyelesaikan proyek',
                'EXPORT': 'Export data',
                'PRINT': 'Mencetak laporan'
            };
            return texts[action] || action;
        }
        
        function loadSystemInfo() {
            // Calculate storage usage
            let totalSize = 0;
            for (let key in localStorage) {
                if (localStorage.hasOwnProperty(key)) {
                    totalSize += localStorage[key].length;
                }
            }
            
            document.getElementById('storageUsed').textContent = (totalSize / 1024).toFixed(2) + ' KB';
            document.getElementById('browserInfo').textContent = navigator.userAgent.split(' ')[0];
            document.getElementById('platformInfo').textContent = navigator.platform;
            document.getElementById('serverTime').textContent = new Date().toLocaleString('id-ID');
            document.getElementById('currentSessionId').textContent = sessionStorage.getItem('sessionId') || 'Tidak ada';
        }
        
        // Tab functions
        function showUsersTab() {
            // Hide all tabs
            document.getElementById('usersTabContent').classList.remove('hidden');
            document.getElementById('activitiesTabContent').classList.add('hidden');
            document.getElementById('statisticsTabContent').classList.add('hidden');
            document.getElementById('systemTabContent').classList.add('hidden');
            
            // Update tab buttons
            document.getElementById('usersTab').classList.add('bg-white/60', 'text-blue-700', 'shadow-sm');
            document.getElementById('usersTab').classList.remove('text-gray-600');
            document.getElementById('activitiesTab').classList.remove('bg-white/60', 'text-blue-700', 'shadow-sm');
            document.getElementById('activitiesTab').classList.add('text-gray-600');
            document.getElementById('statisticsTab').classList.remove('bg-white/60', 'text-blue-700', 'shadow-sm');
            document.getElementById('statisticsTab').classList.add('text-gray-600');
            document.getElementById('systemTab').classList.remove('bg-white/60', 'text-blue-700', 'shadow-sm');
            document.getElementById('systemTab').classList.add('text-gray-600');
        }
        
        function showActivitiesTab() {
            document.getElementById('usersTabContent').classList.add('hidden');
            document.getElementById('activitiesTabContent').classList.remove('hidden');
            document.getElementById('statisticsTabContent').classList.add('hidden');
            document.getElementById('systemTabContent').classList.add('hidden');
            
            document.getElementById('activitiesTab').classList.add('bg-white/60', 'text-blue-700', 'shadow-sm');
            document.getElementById('activitiesTab').classList.remove('text-gray-600');
            document.getElementById('usersTab').classList.remove('bg-white/60', 'text-blue-700', 'shadow-sm');
            document.getElementById('usersTab').classList.add('text-gray-600');
            document.getElementById('statisticsTab').classList.remove('bg-white/60', 'text-blue-700', 'shadow-sm');
            document.getElementById('statisticsTab').classList.add('text-gray-600');
            document.getElementById('systemTab').classList.remove('bg-white/60', 'text-blue-700', 'shadow-sm');
            document.getElementById('systemTab').classList.add('text-gray-600');
        }
        
        function showStatisticsTab() {
            document.getElementById('usersTabContent').classList.add('hidden');
            document.getElementById('activitiesTabContent').classList.add('hidden');
            document.getElementById('statisticsTabContent').classList.remove('hidden');
            document.getElementById('systemTabContent').classList.add('hidden');
            
            document.getElementById('statisticsTab').classList.add('bg-white/60', 'text-blue-700', 'shadow-sm');
            document.getElementById('statisticsTab').classList.remove('text-gray-600');
            document.getElementById('usersTab').classList.remove('bg-white/60', 'text-blue-700', 'shadow-sm');
            document.getElementById('usersTab').classList.add('text-gray-600');
            document.getElementById('activitiesTab').classList.remove('bg-white/60', 'text-blue-700', 'shadow-sm');
            document.getElementById('activitiesTab').classList.add('text-gray-600');
            document.getElementById('systemTab').classList.remove('bg-white/60', 'text-blue-700', 'shadow-sm');
            document.getElementById('systemTab').classList.add('text-gray-600');
            
            // Load statistics
            loadDetailedStatistics();
        }
        
        function showSystemTab() {
            document.getElementById('usersTabContent').classList.add('hidden');
            document.getElementById('activitiesTabContent').classList.add('hidden');
            document.getElementById('statisticsTabContent').classList.add('hidden');
            document.getElementById('systemTabContent').classList.remove('hidden');
            
            document.getElementById('systemTab').classList.add('bg-white/60', 'text-blue-700', 'shadow-sm');
            document.getElementById('systemTab').classList.remove('text-gray-600');
            document.getElementById('usersTab').classList.remove('bg-white/60', 'text-blue-700', 'shadow-sm');
            document.getElementById('usersTab').classList.add('text-gray-600');
            document.getElementById('activitiesTab').classList.remove('bg-white/60', 'text-blue-700', 'shadow-sm');
            document.getElementById('activitiesTab').classList.add('text-gray-600');
            document.getElementById('statisticsTab').classList.remove('bg-white/60', 'text-blue-700', 'shadow-sm');
            document.getElementById('statisticsTab').classList.add('text-gray-600');
        }
        
        function loadDetailedStatistics() {
            const stats = JSON.parse(localStorage.getItem('userStats') || '{}');
            
            // Daily login stats
            const dailyStats = {};
            Object.keys(stats).forEach(username => {
                Object.keys(stats[username].dailyActivity || {}).forEach(date => {
                    if (!dailyStats[date]) dailyStats[date] = 0;
                    dailyStats[date] += stats[username].dailyActivity[date].logins;
                });
            });
            
            let dailyHtml = '<div class="space-y-2">';
            Object.keys(dailyStats).slice(-7).forEach(date => {
                const count = dailyStats[date];
                dailyHtml += `
                    <div class="flex justify-between items-center">
                        <span class="text-sm">${new Date(date).toLocaleDateString('id-ID')}</span>
                        <div class="flex items-center gap-2">
                            <div class="bg-blue-200 h-2 rounded" style="width: ${Math.max(count * 20, 10)}px;"></div>
                            <span class="text-sm font-medium">${count}</span>
                        </div>
                    </div>
                `;
            });
            dailyHtml += '</div>';
            document.getElementById('dailyLoginStats').innerHTML = dailyHtml;
            
            // Top users
            const userActivity = Object.keys(stats).map(username => ({
                username,
                totalLogins: stats[username].totalLogins || 0,
                totalProjects: stats[username].totalProjects || 0
            })).sort((a, b) => b.totalLogins - a.totalLogins);
            
            let topUsersHtml = '<div class="space-y-3">';
            userActivity.slice(0, 5).forEach((user, index) => {
                const medal = index === 0 ? 'ü•á' : index === 1 ? 'ü•à' : index === 2 ? 'ü•â' : 'üèÖ';
                topUsersHtml += `
                    <div class="flex items-center justify-between bg-white/40 rounded-lg p-3">
                        <div class="flex items-center gap-3">
                            <span class="text-lg">${medal}</span>
                            <div>
                                <div class="font-medium">${user.username}</div>
                                <div class="text-xs text-gray-500">${user.totalProjects} proyek</div>
                            </div>
                        </div>
                        <div class="text-right">
                            <div class="font-bold text-blue-600">${user.totalLogins}</div>
                            <div class="text-xs text-gray-500">login</div>
                        </div>
                    </div>
                `;
            });
            topUsersHtml += '</div>';
            document.getElementById('topUsersStats').innerHTML = topUsersHtml;
        }
        
        // System management functions
        function exportAllData() {
            const allData = {
                userCredentials: JSON.parse(localStorage.getItem('userCredentials') || '{}'),
                userAccounts: JSON.parse(localStorage.getItem('userAccounts') || '[]'),
                userStats: JSON.parse(localStorage.getItem('userStats') || '{}'),
                userActivities: JSON.parse(localStorage.getItem('userActivities') || '[]'),
                projects: JSON.parse(localStorage.getItem('workPlanner') || '[]'),
                settings: JSON.parse(localStorage.getItem('plannerSettings') || '{}'),
                exportDate: new Date().toISOString()
            };
            
            const dataStr = JSON.stringify(allData, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            
            const link = document.createElement('a');
            link.href = URL.createObjectURL(dataBlob);
            link.download = `planner_database_backup_${new Date().toISOString().split('T')[0]}.json`;
            link.click();
            
            trackUserActivity('EXPORT_ALL_DATA', { size: dataStr.length });
            alert('‚úÖ Semua data berhasil diekspor!');
        }
        
        function backupDatabase() {
            const backup = {
                timestamp: new Date().toISOString(),
                data: {
                    userCredentials: localStorage.getItem('userCredentials'),
                    userAccounts: localStorage.getItem('userAccounts'),
                    userStats: localStorage.getItem('userStats'),
                    userActivities: localStorage.getItem('userActivities'),
                    workPlanner: localStorage.getItem('workPlanner'),
                    plannerSettings: localStorage.getItem('plannerSettings'),
                    invoiceSettings: localStorage.getItem('invoiceSettings'),
                    invoiceTemplate: localStorage.getItem('invoiceTemplate'),
                    invoiceCounter: localStorage.getItem('invoiceCounter')
                }
            };
            
            const backupStr = JSON.stringify(backup, null, 2);
            const backupBlob = new Blob([backupStr], {type: 'application/json'});
            
            const link = document.createElement('a');
            link.href = URL.createObjectURL(backupBlob);
            link.download = `planner_full_backup_${new Date().toISOString().split('T')[0]}.json`;
            link.click();
            
            trackUserActivity('DATABASE_BACKUP', { size: backupStr.length });
            alert('‚úÖ Database berhasil dibackup!');
        }
        
        function clearOldData() {
            if (confirm('‚ö†Ô∏è Hapus data aktivitas yang lebih dari 30 hari?\n\nTindakan ini tidak dapat dibatalkan!')) {
                const activities = JSON.parse(localStorage.getItem('userActivities') || '[]');
                const thirtyDaysAgo = new Date();
                thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);
                
                const filteredActivities = activities.filter(activity => 
                    new Date(activity.timestamp) > thirtyDaysAgo
                );
                
                localStorage.setItem('userActivities', JSON.stringify(filteredActivities));
                
                trackUserActivity('CLEAR_OLD_DATA', { 
                    removedCount: activities.length - filteredActivities.length 
                });
                
                alert(`‚úÖ ${activities.length - filteredActivities.length} data lama berhasil dihapus!`);
                loadSuperAdminData();
            }
        }
        
        function resetAllData() {
            const confirmText = prompt('‚ö†Ô∏è PERINGATAN: Ini akan menghapus SEMUA data!\n\nKetik "RESET SEMUA DATA" untuk konfirmasi:');
            
            if (confirmText === 'RESET SEMUA DATA') {
                // Keep only super admin credentials
                localStorage.clear();
                sessionStorage.clear();
                
                // Restore default admin
                localStorage.setItem('userCredentials', JSON.stringify({
                    username: "admin", 
                    password: "admin123"
                }));
                
                trackUserActivity('SYSTEM_RESET', { 
                    resetBy: currentUser,
                    timestamp: new Date().toISOString()
                });
                
                alert('‚úÖ Semua data berhasil direset!\n\nAnda akan logout otomatis.');
                
                setTimeout(() => {
                    logout();
                }, 2000);
            } else {
                alert('‚ùå Reset dibatalkan. Teks konfirmasi tidak sesuai.');
            }
        }
        
        function clearActivityLogs() {
            if (confirm('‚ö†Ô∏è Hapus semua log aktivitas?\n\nTindakan ini tidak dapat dibatalkan!')) {
                localStorage.removeItem('userActivities');
                trackUserActivity('CLEAR_ACTIVITY_LOGS', { clearedBy: currentUser });
                alert('‚úÖ Log aktivitas berhasil dihapus!');
                loadActivitiesLog();
            }
        }

        // Close modal when clicking outside
        document.addEventListener('click', function(e) {
            if (e.target.id === 'projectModal') {
                closeModal();
            }
            if (e.target.id === 'accountModal') {
                closeAccountModal();
            }
            if (e.target.id === 'settingsModal') {
                closeSettingsModal();
            }
            if (e.target.id === 'printModal') {
                closePrintModal();
            }
            if (e.target.id === 'invoiceEditorModal') {
                closeInvoiceEditor();
            }
            if (e.target.id === 'superAdminModal') {
                closeSuperAdminDashboard();
            }
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'968b7a0014dffe87',t:'MTc1NDExNTcwMi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
