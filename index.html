<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Planner Pekerjaan Bulanan - Login</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        body { 
            font-family: 'Inter', sans-serif; 
            backdrop-filter: blur(10px);
        }
        .glass-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        .glass-card-light {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.25);
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
        }
        .glass-button {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            transition: all 0.3s ease;
        }
        .glass-button:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }
        .priority-high { border-left: 4px solid rgba(239, 68, 68, 0.8); }
        .priority-medium { border-left: 4px solid rgba(245, 158, 11, 0.8); }
        .priority-low { border-left: 4px solid rgba(16, 185, 129, 0.8); }
        .gradient-text {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .stat-card-1 { background: linear-gradient(135deg, rgba(59, 130, 246, 0.15) 0%, rgba(147, 51, 234, 0.15) 100%); }
        .stat-card-2 { background: linear-gradient(135deg, rgba(239, 68, 68, 0.15) 0%, rgba(245, 101, 101, 0.15) 100%); }
        .stat-card-3 { background: linear-gradient(135deg, rgba(16, 185, 129, 0.15) 0%, rgba(52, 211, 153, 0.15) 100%); }
        .stat-card-4 { background: linear-gradient(135deg, rgba(147, 51, 234, 0.15) 0%, rgba(168, 85, 247, 0.15) 100%); }
        
        .header-custom-bg {
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            position: relative;
        }
        
        .header-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border-radius: 1rem;
            pointer-events: none;
        }
        
        /* Print Styles */
        @media print {
            body * {
                visibility: hidden;
            }
            
            #printContent, #printContent * {
                visibility: visible;
            }
            
            #printContent {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
                background: white !important;
                color: black !important;
                font-size: 12px;
                line-height: 1.4;
            }
            
            /* Invoice Print Formats */
            .invoice-a4 { width: 210mm; height: 297mm; }
            .invoice-a5 { width: 148mm; height: 210mm; }
            .invoice-a6 { width: 105mm; height: 148mm; }
            .invoice-letter { width: 216mm; height: 279mm; }
            .invoice-legal { width: 216mm; height: 356mm; }
            .invoice-receipt { width: 80mm; min-height: 200mm; }
            
            .invoice-container {
                margin: 0;
                padding: 20mm;
                box-sizing: border-box;
            }
            
            .invoice-receipt .invoice-container {
                padding: 5mm;
                font-size: 10px;
            }
            
            .print-header {
                text-align: center;
                margin-bottom: 20px;
                border-bottom: 2px solid #333;
                padding-bottom: 10px;
            }
            
            .print-stats {
                display: grid;
                grid-template-columns: repeat(4, 1fr);
                gap: 15px;
                margin-bottom: 20px;
                padding: 15px;
                border: 1px solid #ddd;
                background: #f9f9f9;
            }
            
            .print-stat-item {
                text-align: center;
                padding: 10px;
                border: 1px solid #ccc;
                background: white;
            }
            
            .print-project {
                margin-bottom: 15px;
                padding: 15px;
                border: 1px solid #ddd;
                page-break-inside: avoid;
            }
            
            .print-project-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 10px;
                font-weight: bold;
            }
            
            .print-project-details {
                margin-bottom: 8px;
                font-size: 11px;
            }
            
            .print-footer {
                margin-top: 30px;
                text-align: center;
                font-size: 10px;
                color: #666;
                border-top: 1px solid #ddd;
                padding-top: 10px;
            }
            
            .no-print {
                display: none !important;
            }
        }
        
        /* Login animations */
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-out;
        }
        
        .shake {
            animation: shake 0.5s ease-in-out;
        }
        
        .login-container {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .login-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }
    </style>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#4f46e5">
<script>
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('service-worker.js');
  }
</script>
</head>

<body class="bg-gradient-to-br from-transparent via-blue-50/30 to-purple-100/40 min-h-screen relative">
    <div class="absolute inset-0 bg-gradient-to-br from-blue-400/20 via-purple-500/10 to-pink-400/20"></div>
    <div class="absolute inset-0 bg-gradient-to-tl from-cyan-300/10 via-transparent to-indigo-400/15"></div>

    <!-- Login Screen -->
    <div id="loginScreen" class="login-container relative z-10">
        <div class="login-card rounded-2xl p-8 w-full max-w-md mx-4 fade-in">
            <!-- Language Selector -->
            <div class="flex justify-end mb-4">
                <div class="relative">
                    <select id="loginLanguageSelect" onchange="changeLanguageLogin(this.value)" 
                            class="px-3 py-2 bg-white/40 backdrop-blur-sm border border-white/50 rounded-lg focus:ring-2 focus:ring-blue-400 text-gray-800 text-sm">
                        <option value="id">ğŸ‡®ğŸ‡© ID</option>
                        <option value="en">ğŸ‡ºğŸ‡¸ EN</option>
                        <option value="ja">ğŸ‡¯ğŸ‡µ JP</option>
                        <option value="ko">ğŸ‡°ğŸ‡· KR</option>
                        <option value="es">ğŸ‡ªğŸ‡¸ ES</option>
                    </select>
                </div>
            </div>
            
            <div class="text-center mb-8">
                <div class="text-6xl mb-4">ğŸ”</div>
                <h1 id="loginWelcomeTitle" class="text-3xl font-bold gradient-text mb-2" data-translate="welcomeTitle">Selamat Datang</h1>
                <p id="loginWelcomeSubtitle" class="text-gray-600" data-translate="welcomeSubtitle">Masuk ke Planner Pekerjaan Bulanan</p>
            </div>
            
            <!-- Login/Register Toggle -->
            <div class="flex bg-white/20 backdrop-blur-sm rounded-xl p-1 mb-6">
                <button id="loginTab" onclick="showLoginForm()" 
                        class="flex-1 py-2 px-4 rounded-lg text-sm font-medium transition-colors bg-white/60 text-blue-700 shadow-sm"
                        data-translate="loginTab">
                    ğŸ”‘ Masuk
                </button>
                <button id="registerTab" onclick="showRegisterForm()" 
                        class="flex-1 py-2 px-4 rounded-lg text-sm font-medium transition-colors text-gray-600 hover:text-blue-700"
                        data-translate="registerTab">
                    ğŸ“ Daftar
                </button>
            </div>
            
            <!-- Login Form -->
            <div id="loginFormContainer">
                <form id="loginForm" class="space-y-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="usernameLabel">ğŸ‘¤ Username</label>
                        <input type="text" id="loginUsername" required 
                               class="w-full px-4 py-3 bg-white/60 backdrop-blur-sm border border-white/50 rounded-xl focus:ring-2 focus:ring-blue-400 focus:border-transparent text-gray-800"
                               data-translate-placeholder="usernamePlaceholder"
                               placeholder="Masukkan username">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="passwordLabel">ğŸ”‘ Password</label>
                        <div class="relative">
                            <input type="password" id="loginPassword" required 
                                   class="w-full px-4 py-3 pr-12 bg-white/60 backdrop-blur-sm border border-white/50 rounded-xl focus:ring-2 focus:ring-blue-400 focus:border-transparent text-gray-800"
                                   data-translate-placeholder="passwordPlaceholder"
                                   placeholder="Masukkan password">
                            <button type="button" onclick="toggleLoginPasswordVisibility()" 
                                    class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700">
                                <span id="loginPasswordToggleIcon">ğŸ‘ï¸</span>
                            </button>
                        </div>
                    </div>
                    
                    <div class="flex items-center">
                        <input type="checkbox" id="rememberMe" class="mr-3 rounded">
                        <label for="rememberMe" class="text-sm text-gray-700" data-translate="rememberMe">ğŸ’¾ Ingat saya</label>
                    </div>
                    
                    <div id="loginError" class="hidden bg-red-50 border border-red-200 rounded-xl p-3">
                        <div class="flex items-center gap-2">
                            <span class="text-red-600">âŒ</span>
                            <span class="text-red-800 text-sm font-medium" data-translate="loginError">Username atau password salah!</span>
                        </div>
                    </div>
                    
                    <button type="submit" id="loginButton" 
                            class="w-full glass-button text-blue-700 px-6 py-3 rounded-xl font-medium hover:bg-blue-500/20 transition-colors">
                        <span id="loginButtonText" data-translate="loginButton">ğŸš€ Masuk ke Dashboard</span>
                        <span id="loginButtonLoading" class="hidden" data-translate="loginLoading">â³ Memproses...</span>
                    </button>
                </form>
            </div>
            
            <!-- Register Form -->
            <div id="registerFormContainer" class="hidden">
                <div class="bg-green-50 border border-green-200 rounded-xl p-4 mb-6">
                    <div class="flex items-center gap-2 mb-2">
                        <span class="text-green-600">âœ¨</span>
                        <span class="text-green-800 font-medium text-sm" data-translate="createNewAccount">Buat Akun Baru:</span>
                    </div>
                    <div class="text-green-700 text-sm" data-translate="registerDescription">
                        Daftarkan akun Anda untuk menggunakan aplikasi planner pekerjaan
                    </div>
                </div>
                
                <form id="registerForm" class="space-y-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">ğŸ‘¤ Username</label>
                        <input type="text" id="registerUsername" required 
                               class="w-full px-4 py-3 bg-white/60 backdrop-blur-sm border border-white/50 rounded-xl focus:ring-2 focus:ring-green-400 focus:border-transparent text-gray-800"
                               placeholder="Pilih username (min. 3 karakter)">
                        <div class="text-xs text-gray-500 mt-1">Username harus unik dan minimal 3 karakter</div>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">ğŸ“§ Email (Opsional)</label>
                        <input type="email" id="registerEmail" 
                               class="w-full px-4 py-3 bg-white/60 backdrop-blur-sm border border-white/50 rounded-xl focus:ring-2 focus:ring-green-400 focus:border-transparent text-gray-800"
                               placeholder="email@example.com">
                        <div class="text-xs text-gray-500 mt-1">Email untuk identifikasi akun (opsional)</div>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">ğŸ”‘ Password</label>
                        <div class="relative">
                            <input type="password" id="registerPassword" required 
                                   class="w-full px-4 py-3 pr-12 bg-white/60 backdrop-blur-sm border border-white/50 rounded-xl focus:ring-2 focus:ring-green-400 focus:border-transparent text-gray-800"
                                   placeholder="Buat password (min. 6 karakter)">
                            <button type="button" onclick="toggleRegisterPasswordVisibility()" 
                                    class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700">
                                <span id="registerPasswordToggleIcon">ğŸ‘ï¸</span>
                            </button>
                        </div>
                        <div class="text-xs text-gray-500 mt-1">Password minimal 6 karakter</div>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">ğŸ” Konfirmasi Password</label>
                        <div class="relative">
                            <input type="password" id="registerConfirmPassword" required 
                                   class="w-full px-4 py-3 pr-12 bg-white/60 backdrop-blur-sm border border-white/50 rounded-xl focus:ring-2 focus:ring-green-400 focus:border-transparent text-gray-800"
                                   placeholder="Ulangi password">
                            <button type="button" onclick="toggleRegisterConfirmPasswordVisibility()" 
                                    class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700">
                                <span id="registerConfirmPasswordToggleIcon">ğŸ‘ï¸</span>
                            </button>
                        </div>
                    </div>
                    
                    <div class="flex items-start">
                        <input type="checkbox" id="agreeTerms" required class="mr-3 mt-1 rounded">
                        <label for="agreeTerms" class="text-sm text-gray-700">
                            ğŸ“‹ Saya setuju bahwa data akan disimpan secara lokal di browser ini dan bertanggung jawab atas keamanan akun saya
                        </label>
                    </div>
                    
                    <div id="registerError" class="hidden bg-red-50 border border-red-200 rounded-xl p-3">
                        <div class="flex items-center gap-2">
                            <span class="text-red-600">âŒ</span>
                            <span class="text-red-800 text-sm font-medium" id="registerErrorMessage">Terjadi kesalahan!</span>
                        </div>
                    </div>
                    
                    <div id="registerSuccess" class="hidden bg-green-50 border border-green-200 rounded-xl p-3">
                        <div class="flex items-center gap-2">
                            <span class="text-green-600">âœ…</span>
                            <span class="text-green-800 text-sm font-medium">Akun berhasil dibuat! Silakan login.</span>
                        </div>
                    </div>
                    
                    <button type="submit" id="registerButton" 
                            class="w-full glass-button text-green-700 px-6 py-3 rounded-xl font-medium hover:bg-green-500/20 transition-colors">
                        <span id="registerButtonText">âœ¨ Buat Akun</span>
                        <span id="registerButtonLoading" class="hidden">â³ Membuat akun...</span>
                    </button>
                </form>
            </div>
            
            <div class="mt-6 text-center">
                <p class="text-xs text-gray-500" data-translate="dataSecurityNote">
                    ğŸ”’ Data Anda aman dan tersimpan lokal di browser
                </p>
            </div>
        </div>
    </div>

    <!-- Main Application (Hidden by default) -->
    <div id="mainApp" class="hidden">
        <div class="container mx-auto px-4 py-8 max-w-6xl relative z-10">
            <!-- Header 1: Title, Date, User Info & Logout -->
            <div id="headerContainer1" class="glass-card rounded-2xl p-6 mb-6">
                <div id="headerOverlay" class="header-overlay"></div>
                <div class="flex flex-col md:flex-row justify-between items-center relative z-10">
                    <!-- Title Section -->
                    <div class="flex-1 text-center md:text-left mb-4 md:mb-0">
                        <div class="flex items-center justify-center md:justify-start gap-3 mb-2">
                            <h1 id="mainTitle" class="text-3xl font-bold gradient-text cursor-pointer hover:bg-white/10 px-2 py-1 rounded-lg transition-colors" onclick="editTitle()">ğŸ“… Planner Pekerjaan Bulanan</h1>
                            <button onclick="editTitle()" class="text-gray-400 hover:text-gray-600 text-sm">âœï¸</button>
                        </div>
                        <div class="flex items-center justify-center md:justify-start gap-3">
                            <p id="mainSubtitle" class="text-gray-700 px-2 py-1">
                                <span id="welcomeGreeting" data-translate="welcomeGreeting">Hai</span> 
                                <span id="usernameInSubtitle" class="font-semibold text-blue-700">-</span>, 
                                <span id="welcomeMessage" data-translate="welcomeMessage">selamat datang kembali!</span>
                            </p>
                        </div>
                    </div>
                    
                    <!-- Date & Time Section -->
                    <div class="flex-1 flex justify-center mb-4 md:mb-0">
                        <div class="glass-card-light px-6 py-4 rounded-xl">
                            <div class="text-center">
                                <div id="currentTime" class="text-2xl font-bold text-blue-700 mb-1">00:00:00</div>
                                <div id="currentDate" class="text-sm text-gray-600">Loading...</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- User Info & Logout Section -->
                    <div class="flex-1 flex justify-center md:justify-end">
                        <div class="flex items-center gap-3">
                            <div class="glass-card-light px-4 py-3 rounded-xl">
                                <div class="text-center">
                                    <div class="text-sm font-medium text-gray-700">ğŸ‘¤ <span id="currentUserDisplay">-</span></div>
                                    <div class="text-xs text-gray-500" id="sessionTypeDisplay">-</div>
                                </div>
                            </div>
                            <button onclick="logout()" class="glass-button text-red-700 px-6 py-3 rounded-xl font-medium hover:bg-red-500/20 transition-colors">
                                ğŸšª Keluar
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Header 2: Action Buttons -->
            <div id="headerContainer2" class="glass-card rounded-2xl p-6 mb-6">
                <div class="flex flex-wrap justify-center gap-3">
                    <button onclick="openAccountModal()" class="glass-button text-indigo-700 px-6 py-3 rounded-xl font-medium hover:bg-indigo-500/20 transition-colors" data-translate="accountManagement">
                        ğŸ‘¥ Kelola Akun
                    </button>
                    <button onclick="openSettingsModal()" class="glass-button text-purple-700 px-6 py-3 rounded-xl font-medium hover:bg-purple-500/20 transition-colors" data-translate="settings">
                        âš™ï¸ Pengaturan
                    </button>
                    <button id="superAdminBtn" onclick="openSuperAdminDashboard()" class="glass-button text-red-700 px-6 py-3 rounded-xl font-medium hover:bg-red-500/20 transition-colors hidden">
                        ğŸ” Super Admin Dashboard
                    </button>
                    <button onclick="exportToExcel()" class="glass-button text-green-700 px-6 py-3 rounded-xl font-medium hover:bg-green-500/20 transition-colors" data-translate="exportExcel">
                        ğŸ“Š Ekspor ke Excel
                    </button>
                    <button onclick="openPrintModal()" class="glass-button text-orange-700 px-6 py-3 rounded-xl font-medium hover:bg-orange-500/20 transition-colors" data-translate="printReport">
                        ğŸ–¨ï¸ Cetak Laporan
                    </button>
                    <button onclick="openAddModal()" class="glass-button text-blue-700 px-6 py-3 rounded-xl font-medium hover:bg-blue-500/20 transition-colors" data-translate="addProject">
                        â• Tambah Proyek
                    </button>
                </div>
            </div>

            <!-- Header 3: Statistics Cards -->
            <div id="headerContainer3" class="glass-card rounded-2xl p-6 mb-8">
                <div class="mb-4">
                    <h2 class="text-xl font-semibold gradient-text text-center" data-translate="dashboardStats">ğŸ“Š Statistik Dashboard</h2>
                </div>
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6" id="statsContainer">
                    <div class="glass-card-light stat-card-1 rounded-xl p-6 backdrop-blur-md border border-white/30">
                        <div class="flex items-center justify-between">
                            <div class="flex-1">
                                <div class="flex items-center gap-2">
                                    <p id="stat1Label" class="text-gray-700 text-sm cursor-pointer hover:bg-white/10 px-2 py-1 rounded transition-colors" onclick="editStatLabel(1)">Total Proyek</p>
                                    <button onclick="editStatLabel(1)" class="text-gray-400 hover:text-gray-600 text-xs">âœï¸</button>
                                </div>
                                <p class="text-2xl font-bold text-blue-700" id="totalProjects">0</p>
                            </div>
                            <div class="bg-white/20 backdrop-blur-sm p-3 rounded-full cursor-pointer border border-white/30" onclick="editStatIcon(1)">
                                <span class="text-2xl" id="stat1Icon">ğŸ“‹</span>
                            </div>
                        </div>
                    </div>
                    <div class="glass-card-light stat-card-2 rounded-xl p-6 backdrop-blur-md border border-white/30">
                        <div class="flex items-center justify-between">
                            <div class="flex-1">
                                <div class="flex items-center gap-2">
                                    <p id="stat2Label" class="text-gray-700 text-sm cursor-pointer hover:bg-white/10 px-2 py-1 rounded transition-colors" onclick="editStatLabel(2)">Prioritas Tinggi</p>
                                    <button onclick="editStatLabel(2)" class="text-gray-400 hover:text-gray-600 text-xs">âœï¸</button>
                                </div>
                                <p class="text-2xl font-bold text-red-700" id="highPriority">0</p>
                            </div>
                            <div class="bg-white/20 backdrop-blur-sm p-3 rounded-full cursor-pointer border border-white/30" onclick="editStatIcon(2)">
                                <span class="text-2xl" id="stat2Icon">ğŸ”¥</span>
                            </div>
                        </div>
                    </div>
                    <div class="glass-card-light stat-card-3 rounded-xl p-6 backdrop-blur-md border border-white/30">
                        <div class="flex items-center justify-between">
                            <div class="flex-1">
                                <div class="flex items-center gap-2">
                                    <p id="stat3Label" class="text-gray-700 text-sm cursor-pointer hover:bg-white/10 px-2 py-1 rounded transition-colors" onclick="editStatLabel(3)">Selesai</p>
                                    <button onclick="editStatLabel(3)" class="text-gray-400 hover:text-gray-600 text-xs">âœï¸</button>
                                </div>
                                <p class="text-2xl font-bold text-green-700" id="completedProjects">0</p>
                            </div>
                            <div class="bg-white/20 backdrop-blur-sm p-3 rounded-full cursor-pointer border border-white/30" onclick="editStatIcon(3)">
                                <span class="text-2xl" id="stat3Icon">âœ…</span>
                            </div>
                        </div>
                    </div>
                    <div class="glass-card-light stat-card-4 rounded-xl p-6 backdrop-blur-md border border-white/30">
                        <div class="flex items-center justify-between">
                            <div class="flex-1">
                                <div class="flex items-center gap-2">
                                    <p id="stat4Label" class="text-gray-700 text-sm cursor-pointer hover:bg-white/10 px-2 py-1 rounded transition-colors" onclick="editStatLabel(4)">Total Nilai</p>
                                    <button onclick="editStatLabel(4)" class="text-gray-400 hover:text-gray-600 text-xs">âœï¸</button>
                                </div>
                                <p class="text-2xl font-bold text-purple-700" id="totalValue">Rp 0</p>
                            </div>
                            <div class="bg-white/20 backdrop-blur-sm p-3 rounded-full cursor-pointer border border-white/30" onclick="editStatIcon(4)">
                                <span class="text-2xl" id="stat4Icon">ğŸ’°</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Filter and Search -->
            <div class="glass-card rounded-xl p-6 mb-8">
                <div class="flex flex-col md:flex-row gap-4">
                    <div class="flex-1">
                        <input type="text" id="searchInput" data-translate-placeholder="searchPlaceholder" placeholder="ğŸ” Cari proyek..." 
                               class="w-full px-4 py-3 bg-white/20 backdrop-blur-sm border border-white/30 rounded-xl focus:ring-2 focus:ring-blue-400 focus:border-transparent text-gray-700 placeholder-gray-600">
                    </div>
                    <select id="priorityFilter" class="px-4 py-3 bg-white/20 backdrop-blur-sm border border-white/30 rounded-xl focus:ring-2 focus:ring-blue-400 text-gray-700">
                        <option value="" data-translate="allPriorities">Semua Prioritas</option>
                        <option value="high" data-translate="high">Tinggi</option>
                        <option value="medium" data-translate="medium">Sedang</option>
                        <option value="low" data-translate="low">Rendah</option>
                    </select>
                    <select id="statusFilter" class="px-4 py-3 bg-white/20 backdrop-blur-sm border border-white/30 rounded-xl focus:ring-2 focus:ring-blue-400 text-gray-700">
                        <option value="" data-translate="allStatuses">Semua Status</option>
                        <option value="pending" data-translate="pending">Pending</option>
                        <option value="progress" data-translate="progress">Dalam Proses</option>
                        <option value="completed" data-translate="completed">Selesai</option>
                    </select>
                </div>
            </div>

            <!-- Projects List -->
            <div class="glass-card rounded-xl overflow-hidden">
                <div class="p-6 border-b border-white/20">
                    <h2 class="text-xl font-semibold gradient-text" data-translate="projectList">Daftar Proyek</h2>
                </div>
                <div id="projectsList" class="divide-y divide-white/20">
                    <div class="p-8 text-center text-gray-600">
                        <span class="text-4xl mb-4 block">ğŸ“</span>
                        <p data-translate="noProjects">Belum ada proyek. Klik "Tambah Proyek" untuk memulai!</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Account Management Modal -->
    <div id="accountModal" class="fixed inset-0 bg-black/30 backdrop-blur-sm hidden items-center justify-center z-50 p-4">
        <div class="bg-white/90 backdrop-blur-xl border border-white/40 shadow-2xl rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
            <div class="p-6 border-b border-white/20">
                <h3 class="text-xl font-semibold gradient-text" data-translate="accountManagement">ğŸ‘¥ Manajemen Akun</h3>
            </div>
            <div class="p-6 space-y-6">
                <!-- Current User Info -->
                <div>
                    <h4 class="text-lg font-medium text-gray-700 mb-4" data-translate="accountInfo">ğŸ“Š Informasi Akun Aktif</h4>
                    <div class="bg-blue-50 border border-blue-200 rounded-xl p-4 mb-4">
                        <div class="space-y-2 text-sm">
                            <div><strong data-translate="activeUsername">ğŸ‘¤ Username Aktif:</strong> <span id="currentUserDisplay2">-</span></div>
                            <div><strong data-translate="sessionType">ğŸ”’ Tipe Sesi:</strong> <span id="sessionType">-</span></div>
                            <div><strong data-translate="totalRegisteredUsers">ğŸ“Š Total Akun Terdaftar:</strong> <span id="totalRegisteredUsers">0</span></div>
                        </div>
                    </div>
                </div>
                
                <!-- Registered Users List -->
                <div class="mb-4">
                    <h4 class="text-lg font-medium text-gray-700 mb-4" data-translate="allAccountsList">ğŸ“‹ Daftar Semua Akun</h4>
                    <div id="registeredUsersList" class="space-y-2 max-h-60 overflow-y-auto">
                        <!-- Users will be populated here -->
                    </div>
                </div>
                
                <!-- Update Current User Credentials -->
                <div class="border-t border-gray-200 pt-6">
                    <h4 class="text-lg font-medium text-gray-700 mb-4" data-translate="updateCredentials">ğŸ” Update Kredensial Akun Aktif</h4>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="newUsername">Username Baru</label>
                            <input type="text" id="newUsername" placeholder="Minimal 3 karakter"
                                   class="w-full px-4 py-3 bg-white/40 backdrop-blur-sm border border-white/50 rounded-xl focus:ring-2 focus:ring-blue-400 text-gray-800">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="newPassword">Password Baru</label>
                            <div class="relative">
                                <input type="password" id="newPassword" placeholder="Minimal 6 karakter"
                                       class="w-full px-4 py-3 pr-12 bg-white/40 backdrop-blur-sm border border-white/50 rounded-xl focus:ring-2 focus:ring-blue-400 text-gray-800">
                                <button type="button" onclick="toggleNewPasswordVisibility()" 
                                        class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700">
                                    <span id="newPasswordToggleIcon">ğŸ‘ï¸</span>
                                </button>
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="confirmPassword">Konfirmasi Password</label>
                            <div class="relative">
                                <input type="password" id="confirmPassword" placeholder="Ulangi password baru"
                                       class="w-full px-4 py-3 pr-12 bg-white/40 backdrop-blur-sm border border-white/50 rounded-xl focus:ring-2 focus:ring-blue-400 text-gray-800">
                                <button type="button" onclick="toggleConfirmPasswordVisibility()" 
                                        class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700">
                                    <span id="confirmPasswordToggleIcon">ğŸ‘ï¸</span>
                                </button>
                            </div>
                        </div>
                        <button onclick="updateCredentials()" 
                                class="w-full px-4 py-3 glass-button text-blue-700 rounded-xl hover:bg-blue-500/20 transition-colors"
                                data-translate="updateCredentialsBtn">
                            ğŸ” Update Kredensial Login
                        </button>
                    </div>
                </div>
            </div>
            <div class="p-6 border-t border-white/20">
                <button type="button" onclick="closeAccountModal()" 
                        class="w-full px-4 py-3 glass-button text-gray-700 rounded-xl hover:bg-white/30 transition-colors"
                        data-translate="close">
                    Tutup
                </button>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="fixed inset-0 bg-black/30 backdrop-blur-sm hidden items-center justify-center z-50 p-4">
        <div class="bg-white/90 backdrop-blur-xl border border-white/40 shadow-2xl rounded-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto">
            <div class="p-6 border-b border-white/20">
                <h3 class="text-xl font-semibold gradient-text">âš™ï¸ Pengaturan Tampilan</h3>
            </div>
            <div class="p-6 space-y-6">

                <!-- Language Settings -->
                <div>
                    <h4 class="text-lg font-medium text-gray-700 mb-4" data-translate="language">ğŸŒ Bahasa</h4>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="selectLanguage">Pilih Bahasa</label>
                        <select id="languageSelect" onchange="changeLanguage(this.value)" 
                                class="w-full px-4 py-3 bg-white/40 backdrop-blur-sm border border-white/50 rounded-xl focus:ring-2 focus:ring-blue-400 text-gray-800">
                            <option value="id">ğŸ‡®ğŸ‡© Bahasa Indonesia</option>
                            <option value="en">ğŸ‡ºğŸ‡¸ English</option>
                            <option value="ja">ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª (Japanese)</option>
                            <option value="ko">ğŸ‡°ğŸ‡· í•œêµ­ì–´ (Korean)</option>
                            <option value="es">ğŸ‡ªğŸ‡¸ EspaÃ±ol (Spanish)</option>
                        </select>
                    </div>
                </div>

                <!-- Header Settings -->
                <div>
                    <h4 class="text-lg font-medium text-gray-700 mb-4" data-translate="header">ğŸ“ Header</h4>
                    <div class="space-y-3">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Judul Utama</label>
                            <input type="text" id="settingsTitle" 
                                   class="w-full px-4 py-3 bg-white/40 backdrop-blur-sm border border-white/50 rounded-xl focus:ring-2 focus:ring-blue-400 text-gray-800">
                        </div>
                        <div class="bg-blue-50 border border-blue-200 rounded-xl p-4">
                            <div class="flex items-center gap-2 mb-2">
                                <span class="text-blue-600">â„¹ï¸</span>
                                <span class="text-blue-800 font-medium text-sm">Info Subjudul</span>
                            </div>
                            <div class="text-blue-700 text-sm">
                                Subjudul akan menampilkan sapaan personal: "Hai [username], selamat datang kembali!" dan tidak dapat diubah.
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Stats Settings -->
                <div>
                    <h4 class="text-lg font-medium text-gray-700 mb-4">ğŸ“Š Kartu Statistik</h4>
                    <div class="space-y-4">
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Kartu 1 - Label</label>
                                <input type="text" id="settingsStat1Label" 
                                       class="w-full px-3 py-2 bg-white/40 backdrop-blur-sm border border-white/50 rounded-lg focus:ring-2 focus:ring-blue-400 text-gray-800">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Kartu 1 - Icon</label>
                                <input type="text" id="settingsStat1Icon" 
                                       class="w-full px-3 py-2 bg-white/20 backdrop-blur-sm border border-white/30 rounded-lg focus:ring-2 focus:ring-blue-400 text-gray-700"
                                       placeholder="ğŸ“‹">
                            </div>
                        </div>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Kartu 2 - Label</label>
                                <input type="text" id="settingsStat2Label" 
                                       class="w-full px-3 py-2 bg-white/40 backdrop-blur-sm border border-white/50 rounded-lg focus:ring-2 focus:ring-blue-400 text-gray-800">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Kartu 2 - Icon</label>
                                <input type="text" id="settingsStat2Icon" 
                                       class="w-full px-3 py-2 bg-white/20 backdrop-blur-sm border border-white/30 rounded-lg focus:ring-2 focus:ring-blue-400 text-gray-700"
                                       placeholder="ğŸ”¥">
                            </div>
                        </div>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Kartu 3 - Label</label>
                                <input type="text" id="settingsStat3Label" 
                                       class="w-full px-3 py-2 bg-white/40 backdrop-blur-sm border border-white/50 rounded-lg focus:ring-2 focus:ring-blue-400 text-gray-800">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Kartu 3 - Icon</label>
                                <input type="text" id="settingsStat3Icon" 
                                       class="w-full px-3 py-2 bg-white/20 backdrop-blur-sm border border-white/30 rounded-lg focus:ring-2 focus:ring-blue-400 text-gray-700"
                                       placeholder="âœ…">
                            </div>
                        </div>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Kartu 4 - Label</label>
                                <input type="text" id="settingsStat4Label" 
                                       class="w-full px-3 py-2 bg-white/40 backdrop-blur-sm border border-white/50 rounded-lg focus:ring-2 focus:ring-blue-400 text-gray-800">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Kartu 4 - Icon</label>
                                <input type="text" id="settingsStat4Icon" 
                                       class="w-full px-3 py-2 bg-white/20 backdrop-blur-sm border border-white/30 rounded-lg focus:ring-2 focus:ring-blue-400 text-gray-700"
                                       placeholder="ğŸ’°">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Reset Button -->
                <div class="pt-4 border-t border-white/20">
                    <button onclick="resetToDefault()" 
                            class="w-full px-4 py-3 glass-button text-gray-700 rounded-xl hover:bg-white/30 transition-colors mb-4">
                        ğŸ”„ Reset ke Default
                    </button>
                </div>
            </div>
            <div class="p-6 border-t border-white/20">
                <div class="flex gap-3">
                    <button type="button" onclick="closeSettingsModal()" 
                            class="flex-1 px-4 py-3 glass-button text-gray-700 rounded-xl hover:bg-white/30 transition-colors"
                            data-translate="cancel">
                        Batal
                    </button>
                    <button onclick="saveSettings()" 
                            class="flex-1 px-4 py-3 glass-button text-blue-700 rounded-xl hover:bg-blue-500/20 transition-colors"
                            data-translate="save">
                        Simpan
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Print Modal -->
    <div id="printModal" class="fixed inset-0 bg-black/30 backdrop-blur-sm hidden items-center justify-center z-50 p-4">
        <div class="bg-white/90 backdrop-blur-xl border border-white/40 shadow-2xl rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto">
            <div class="p-6 border-b border-white/20">
                <h3 class="text-xl font-semibold gradient-text" data-translate="printReportInvoice">ğŸ–¨ï¸ Cetak Laporan & Invoice</h3>
            </div>
            <div class="p-6 space-y-6">
                <!-- Print Type Selection -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="printType">Jenis Cetak</label>
                    <div class="flex bg-white/20 backdrop-blur-sm rounded-xl p-1 mb-4">
                        <button id="reportPrintTab" onclick="showReportPrint()" 
                                class="flex-1 py-2 px-4 rounded-lg text-sm font-medium transition-colors bg-white/60 text-blue-700 shadow-sm"
                                data-translate="projectReport">
                            ğŸ“Š Laporan Proyek
                        </button>
                        <button id="invoicePrintTab" onclick="showInvoicePrint()" 
                                class="flex-1 py-2 px-4 rounded-lg text-sm font-medium transition-colors text-gray-600 hover:text-blue-700"
                                data-translate="invoiceNote">
                            ğŸ§¾ Invoice/Nota
                        </button>
                    </div>
                </div>

                <!-- Report Print Section -->
                <div id="reportPrintSection">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="reportType">Jenis Laporan</label>
                        <select id="reportType" class="w-full px-4 py-3 bg-white/40 backdrop-blur-sm border border-white/50 rounded-xl focus:ring-2 focus:ring-blue-400 text-gray-800">
                            <option value="all" data-translate="allProjects">Semua Proyek</option>
                            <option value="completed" data-translate="completedOnly">Hanya yang Selesai</option>
                            <option value="pending" data-translate="pendingOnly">Hanya yang Pending</option>
                            <option value="progress" data-translate="progressOnly">Hanya yang Dalam Proses</option>
                            <option value="high" data-translate="highPriorityOnly">Hanya Prioritas Tinggi</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="printOptions">Opsi Cetak</label>
                        <div class="space-y-2">
                            <label class="flex items-center">
                                <input type="checkbox" id="includeStats" checked class="mr-2 rounded">
                                <span class="text-sm" data-translate="includeStatistics">Sertakan Statistik</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" id="includeDescription" checked class="mr-2 rounded">
                                <span class="text-sm" data-translate="includeDescriptions">Sertakan Deskripsi</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" id="includePrices" checked class="mr-2 rounded">
                                <span class="text-sm" data-translate="includePrices">Sertakan Harga</span>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Invoice Print Section -->
                <div id="invoicePrintSection" class="hidden">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Left Column - Invoice Settings -->
                        <div class="space-y-4">
                            <h4 class="text-lg font-medium text-gray-700 mb-4" data-translate="invoiceSettings">âš™ï¸ Pengaturan Invoice</h4>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="selectProjectInvoice">Pilih Proyek untuk Invoice</label>
                                <select id="invoiceProject" class="w-full px-4 py-3 bg-white/40 backdrop-blur-sm border border-white/50 rounded-xl focus:ring-2 focus:ring-blue-400 text-gray-800">
                                    <option value="" data-translate="selectProject">Pilih Proyek...</option>
                                </select>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="paperFormat">Format Kertas</label>
                                <select id="invoiceFormat" class="w-full px-4 py-3 bg-white/40 backdrop-blur-sm border border-white/50 rounded-xl focus:ring-2 focus:ring-blue-400 text-gray-800">
                                    <option value="a4" data-translate="paperA4">ğŸ“„ A4 (210 x 297 mm)</option>
                                    <option value="a5" data-translate="paperA5">ğŸ“„ A5 (148 x 210 mm)</option>
                                    <option value="a6" data-translate="paperA6">ğŸ“„ A6 (105 x 148 mm)</option>
                                    <option value="letter" data-translate="paperLetter">ğŸ“„ Letter (216 x 279 mm)</option>
                                    <option value="legal" data-translate="paperLegal">ğŸ“„ Legal (216 x 356 mm)</option>
                                    <option value="receipt" data-translate="paperReceipt">ğŸ§¾ Receipt (80mm)</option>
                                </select>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="invoiceNumber">Nomor Invoice</label>
                                <input type="text" id="invoiceNumber" 
                                       class="w-full px-4 py-3 bg-white/40 backdrop-blur-sm border border-white/50 rounded-xl focus:ring-2 focus:ring-blue-400 text-gray-800"
                                       placeholder="INV-001">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="invoiceDate">Tanggal Invoice</label>
                                <input type="date" id="invoiceDate" 
                                       class="w-full px-4 py-3 bg-white/40 backdrop-blur-sm border border-white/50 rounded-xl focus:ring-2 focus:ring-blue-400 text-gray-800">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="dueDate">Jatuh Tempo</label>
                                <input type="date" id="invoiceDueDate" 
                                       class="w-full px-4 py-3 bg-white/40 backdrop-blur-sm border border-white/50 rounded-xl focus:ring-2 focus:ring-blue-400 text-gray-800">
                            </div>
                        </div>
                        
                        <!-- Right Column - Company Info -->
                        <div class="space-y-4">
                            <h4 class="text-lg font-medium text-gray-700 mb-4" data-translate="companyInfo">ğŸ¢ Info Perusahaan</h4>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="companyName">Nama Perusahaan</label>
                                <input type="text" id="companyName" 
                                       class="w-full px-4 py-3 bg-white/40 backdrop-blur-sm border border-white/50 rounded-xl focus:ring-2 focus:ring-blue-400 text-gray-800"
                                       placeholder="PT. Nama Perusahaan">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="address">Alamat</label>
                                <textarea id="companyAddress" rows="3" 
                                          class="w-full px-4 py-3 bg-white/40 backdrop-blur-sm border border-white/50 rounded-xl focus:ring-2 focus:ring-blue-400 text-gray-800"
                                          placeholder="Jl. Contoh No. 123&#10;Jakarta 12345"></textarea>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="phone">Telepon</label>
                                <input type="text" id="companyPhone" 
                                       class="w-full px-4 py-3 bg-white/40 backdrop-blur-sm border border-white/50 rounded-xl focus:ring-2 focus:ring-blue-400 text-gray-800"
                                       placeholder="+62 21 1234 5678">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="email">Email</label>
                                <input type="email" id="companyEmail" 
                                       class="w-full px-4 py-3 bg-white/40 backdrop-blur-sm border border-white/50 rounded-xl focus:ring-2 focus:ring-blue-400 text-gray-800"
                                       placeholder="info@perusahaan.com">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="website">Website</label>
                                <input type="text" id="companyWebsite" 
                                       class="w-full px-4 py-3 bg-white/40 backdrop-blur-sm border border-white/50 rounded-xl focus:ring-2 focus:ring-blue-400 text-gray-800"
                                       placeholder="www.perusahaan.com">
                            </div>
                        </div>
                    </div>
                    
                    <!-- Additional Invoice Options -->
                    <div class="border-t border-white/20 pt-6">
                        <h4 class="text-lg font-medium text-gray-700 mb-4" data-translate="paymentOptions">ğŸ’° Opsi Pembayaran</h4>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="taxPPN">PPN (%)</label>
                                <input type="number" id="invoiceTax" min="0" max="100" step="0.1" value="11" 
                                       class="w-full px-4 py-3 bg-white/40 backdrop-blur-sm border border-white/50 rounded-xl focus:ring-2 focus:ring-blue-400 text-gray-800">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="discount">Diskon (%)</label>
                                <input type="number" id="invoiceDiscount" min="0" max="100" step="0.1" value="0" 
                                       class="w-full px-4 py-3 bg-white/40 backdrop-blur-sm border border-white/50 rounded-xl focus:ring-2 focus:ring-blue-400 text-gray-800">
                            </div>
                        </div>
                        
                        <div class="mt-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="additionalNotes">Catatan Tambahan</label>
                            <textarea id="invoiceNotes" rows="2" 
                                      class="w-full px-4 py-3 bg-white/40 backdrop-blur-sm border border-white/50 rounded-xl focus:ring-2 focus:ring-blue-400 text-gray-800"
                                      placeholder="Terima kasih atas kepercayaan Anda..."></textarea>
                        </div>
                        
                        <div class="mt-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="bankInfo">Info Rekening Bank</label>
                            <textarea id="bankInfo" rows="3" 
                                      class="w-full px-4 py-3 bg-white/40 backdrop-blur-sm border border-white/50 rounded-xl focus:ring-2 focus:ring-blue-400 text-gray-800"
                                      placeholder="Bank BCA&#10;No. Rek: 1234567890&#10;A.n: Nama Pemilik"></textarea>
                        </div>
                    </div>
                </div>
                
                <div class="flex gap-3">
                    <button type="button" onclick="closePrintModal()" 
                            class="flex-1 px-4 py-3 glass-button text-gray-700 rounded-xl hover:bg-white/30 transition-colors"
                            data-translate="cancel">
                        Tutup
                    </button>
                    <button id="printReportBtn" onclick="printReport()" 
                            class="flex-1 px-4 py-3 glass-button text-purple-700 rounded-xl hover:bg-purple-500/20 transition-colors"
                            data-translate="print">
                        ğŸ–¨ï¸ Cetak Laporan
                    </button>
                    <button id="printInvoiceBtn" onclick="printInvoice()" 
                            class="hidden flex-1 px-4 py-3 glass-button text-green-700 rounded-xl hover:bg-green-500/20 transition-colors"
                            data-translate="printInvoice">
                        ğŸ§¾ Cetak Invoice
                    </button>
                    <button id="saveInvoicePdfBtn" onclick="saveInvoiceAsPDF()" 
                            class="hidden flex-1 px-4 py-3 glass-button text-red-700 rounded-xl hover:bg-red-500/20 transition-colors"
                            data-translate="saveAsPDF">
                        ğŸ“„ Simpan PDF
                    </button>
                    <button id="saveInvoicePngBtn" onclick="saveInvoiceAsPNG()" 
                            class="hidden flex-1 px-4 py-3 glass-button text-blue-700 rounded-xl hover:bg-blue-500/20 transition-colors"
                            data-translate="saveAsPNG">
                        ğŸ–¼ï¸ Simpan PNG
                    </button>
                    <button id="editInvoiceBtn" onclick="editInvoiceDirectly()" 
                            class="hidden flex-1 px-4 py-3 glass-button text-orange-700 rounded-xl hover:bg-orange-500/20 transition-colors"
                            data-translate="editInvoice">
                        âœï¸ Edit Nota
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Super Admin Dashboard Modal -->
    <div id="superAdminModal" class="fixed inset-0 bg-black/30 backdrop-blur-sm hidden items-center justify-center z-50 p-4">
        <div class="bg-white/90 backdrop-blur-xl border border-white/40 shadow-2xl rounded-2xl max-w-7xl w-full max-h-[95vh] overflow-y-auto">
            <div class="p-6 border-b border-white/20">
                <div class="flex justify-between items-center">
                    <h3 class="text-xl font-semibold gradient-text">ğŸ” Super Admin Dashboard - Database Pengguna</h3>
                    <button onclick="closeSuperAdminDashboard()" class="text-gray-500 hover:text-gray-700 text-2xl">Ã—</button>
                </div>
            </div>
            
            <div class="p-6">
                <!-- Statistics Overview -->
                <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                    <div class="bg-blue-50 border border-blue-200 rounded-xl p-6">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-blue-600 text-sm font-medium">Total Pengguna</p>
                                <p class="text-2xl font-bold text-blue-700" id="totalUsersCount">0</p>
                            </div>
                            <div class="bg-blue-100 p-3 rounded-full">
                                <span class="text-2xl">ğŸ‘¥</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-green-50 border border-green-200 rounded-xl p-6">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-green-600 text-sm font-medium">Pengguna Aktif Hari Ini</p>
                                <p class="text-2xl font-bold text-green-700" id="activeUsersToday">0</p>
                            </div>
                            <div class="bg-green-100 p-3 rounded-full">
                                <span class="text-2xl">ğŸŸ¢</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-purple-50 border border-purple-200 rounded-xl p-6">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-purple-600 text-sm font-medium">Total Proyek</p>
                                <p class="text-2xl font-bold text-purple-700" id="totalProjectsAll">0</p>
                            </div>
                            <div class="bg-purple-100 p-3 rounded-full">
                                <span class="text-2xl">ğŸ“‹</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-orange-50 border border-orange-200 rounded-xl p-6">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-orange-600 text-sm font-medium">Total Aktivitas</p>
                                <p class="text-2xl font-bold text-orange-700" id="totalActivities">0</p>
                            </div>
                            <div class="bg-orange-100 p-3 rounded-full">
                                <span class="text-2xl">ğŸ“Š</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Tabs -->
                <div class="flex bg-white/20 backdrop-blur-sm rounded-xl p-1 mb-6">
                    <button id="usersTab" onclick="showUsersTab()" 
                            class="flex-1 py-2 px-4 rounded-lg text-sm font-medium transition-colors bg-white/60 text-blue-700 shadow-sm">
                        ğŸ‘¥ Data Pengguna
                    </button>
                    <button id="activitiesTab" onclick="showActivitiesTab()" 
                            class="flex-1 py-2 px-4 rounded-lg text-sm font-medium transition-colors text-gray-600 hover:text-blue-700">
                        ğŸ“Š Log Aktivitas
                    </button>
                    <button id="statisticsTab" onclick="showStatisticsTab()" 
                            class="flex-1 py-2 px-4 rounded-lg text-sm font-medium transition-colors text-gray-600 hover:text-blue-700">
                        ğŸ“ˆ Statistik Detail
                    </button>
                    <button id="systemTab" onclick="showSystemTab()" 
                            class="flex-1 py-2 px-4 rounded-lg text-sm font-medium transition-colors text-gray-600 hover:text-blue-700">
                        âš™ï¸ Sistem
                    </button>
                </div>
                
                <!-- Users Tab Content -->
                <div id="usersTabContent">
                    <div class="bg-white/60 backdrop-blur-sm border border-white/50 rounded-xl p-6">
                        <h4 class="text-lg font-semibold text-gray-800 mb-4">ğŸ“‹ Daftar Semua Pengguna</h4>
                        <div class="overflow-x-auto">
                            <table class="w-full border-collapse">
                                <thead>
                                    <tr class="bg-gray-100">
                                        <th class="border border-gray-300 px-4 py-2 text-left">Username</th>
                                        <th class="border border-gray-300 px-4 py-2 text-left">Email</th>
                                        <th class="border border-gray-300 px-4 py-2 text-left">Tipe</th>
                                        <th class="border border-gray-300 px-4 py-2 text-left">Terdaftar</th>
                                        <th class="border border-gray-300 px-4 py-2 text-left">Login Terakhir</th>
                                        <th class="border border-gray-300 px-4 py-2 text-left">Total Login</th>
                                        <th class="border border-gray-300 px-4 py-2 text-left">Proyek</th>
                                        <th class="border border-gray-300 px-4 py-2 text-left">Status</th>
                                    </tr>
                                </thead>
                                <tbody id="usersTableBody">
                                    <!-- Data akan diisi oleh JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                
                <!-- Activities Tab Content -->
                <div id="activitiesTabContent" class="hidden">
                    <div class="bg-white/60 backdrop-blur-sm border border-white/50 rounded-xl p-6">
                        <div class="flex justify-between items-center mb-4">
                            <h4 class="text-lg font-semibold text-gray-800">ğŸ“Š Log Aktivitas Pengguna</h4>
                            <div class="flex gap-2">
                                <select id="activityFilter" class="px-3 py-2 bg-white/60 border border-gray-300 rounded-lg text-sm">
                                    <option value="">Semua Aktivitas</option>
                                    <option value="LOGIN">Login</option>
                                    <option value="PROJECT_CREATED">Proyek Dibuat</option>
                                    <option value="PROJECT_COMPLETED">Proyek Selesai</option>
                                    <option value="EXPORT">Export Data</option>
                                </select>
                                <button onclick="clearActivityLogs()" class="px-4 py-2 bg-red-500 text-white rounded-lg text-sm hover:bg-red-600">
                                    ğŸ—‘ï¸ Hapus Log
                                </button>
                            </div>
                        </div>
                        <div class="max-h-96 overflow-y-auto">
                            <div id="activitiesContainer">
                                <!-- Activities akan diisi oleh JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Statistics Tab Content -->
                <div id="statisticsTabContent" class="hidden">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="bg-white/60 backdrop-blur-sm border border-white/50 rounded-xl p-6">
                            <h4 class="text-lg font-semibold text-gray-800 mb-4">ğŸ“ˆ Statistik Login Harian</h4>
                            <div id="dailyLoginStats">
                                <!-- Chart akan diisi oleh JavaScript -->
                            </div>
                        </div>
                        
                        <div class="bg-white/60 backdrop-blur-sm border border-white/50 rounded-xl p-6">
                            <h4 class="text-lg font-semibold text-gray-800 mb-4">ğŸ† Pengguna Paling Aktif</h4>
                            <div id="topUsersStats">
                                <!-- Stats akan diisi oleh JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- System Tab Content -->
                <div id="systemTabContent" class="hidden">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="bg-white/60 backdrop-blur-sm border border-white/50 rounded-xl p-6">
                            <h4 class="text-lg font-semibold text-gray-800 mb-4">ğŸ’¾ Manajemen Data</h4>
                            <div class="space-y-4">
                                <button onclick="exportAllData()" class="w-full px-4 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600">
                                    ğŸ“Š Export Semua Data
                                </button>
                                <button onclick="backupDatabase()" class="w-full px-4 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600">
                                    ğŸ’¾ Backup Database
                                </button>
                                <button onclick="clearOldData()" class="w-full px-4 py-3 bg-orange-500 text-white rounded-lg hover:bg-orange-600">
                                    ğŸ§¹ Bersihkan Data Lama
                                </button>
                                <button onclick="resetAllData()" class="w-full px-4 py-3 bg-red-500 text-white rounded-lg hover:bg-red-600">
                                    âš ï¸ Reset Semua Data
                                </button>
                            </div>
                        </div>
                        
                        <div class="bg-white/60 backdrop-blur-sm border border-white/50 rounded-xl p-6">
                            <h4 class="text-lg font-semibold text-gray-800 mb-4">â„¹ï¸ Informasi Sistem</h4>
                            <div class="space-y-2 text-sm">
                                <div><strong>Total Storage:</strong> <span id="storageUsed">0 KB</span></div>
                                <div><strong>Browser:</strong> <span id="browserInfo">-</span></div>
                                <div><strong>Platform:</strong> <span id="platformInfo">-</span></div>
                                <div><strong>Waktu Server:</strong> <span id="serverTime">-</span></div>
                                <div><strong>Session ID:</strong> <span id="currentSessionId">-</span></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="p-6 border-t border-white/20">
                <button onclick="closeSuperAdminDashboard()" 
                        class="w-full px-4 py-3 glass-button text-gray-700 rounded-xl hover:bg-white/30 transition-colors">
                    Tutup Dashboard
                </button>
            </div>
        </div>
    </div>

    <!-- Invoice Editor Modal -->
    <div id="invoiceEditorModal" class="fixed inset-0 bg-black/30 backdrop-blur-sm hidden items-center justify-center z-50 p-4">
        <div class="bg-white/90 backdrop-blur-xl border border-white/40 shadow-2xl rounded-2xl max-w-6xl w-full max-h-[95vh] overflow-y-auto">
            <div class="p-6 border-b border-white/20">
                <div class="flex justify-between items-center">
                    <h3 class="text-xl font-semibold gradient-text" data-translate="editInvoiceTitle">âœï¸ Edit Invoice/Nota</h3>
                    <button onclick="closeInvoiceEditor()" class="text-gray-500 hover:text-gray-700 text-2xl">Ã—</button>
                </div>
            </div>
            
            <div class="flex flex-col lg:flex-row">
                <!-- Editor Panel -->
                <div class="w-full lg:w-1/3 p-6 border-b lg:border-b-0 lg:border-r border-white/20 bg-gray-50/50">
                    <h4 class="text-lg font-medium text-gray-700 mb-4" data-translate="editorPanel">ğŸ¨ Editor</h4>
                    
                    <!-- Logo Upload -->
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="companyLogo">ğŸ¢ Logo Perusahaan</label>
                        <div class="border-2 border-dashed border-gray-300 rounded-lg p-4 text-center">
                            <input type="file" id="logoUpload" accept="image/*" class="hidden" onchange="handleLogoUpload(event)">
                            <div id="logoPreview" class="mb-2">
                                <div class="w-20 h-20 bg-gray-200 rounded-lg mx-auto flex items-center justify-center text-gray-500">
                                    ğŸ¢
                                </div>
                            </div>
                            <button onclick="document.getElementById('logoUpload').click()" 
                                    class="text-blue-600 hover:text-blue-800 text-sm" data-translate="uploadLogo">
                                ğŸ“ Upload Logo
                            </button>
                        </div>
                    </div>
                    
                    <!-- Header Settings -->
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="invoiceTitleLabel">ğŸ“ Judul Invoice</label>
                        <input type="text" id="invoiceTitle" value="INVOICE" 
                               class="w-full px-3 py-2 bg-white/60 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-400"
                               onchange="updateInvoicePreview()">
                    </div>
                    
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="headerColor">ğŸ¨ Warna Header</label>
                        <input type="color" id="headerColor" value="#333333" 
                               class="w-full h-10 rounded-lg border border-gray-300"
                               onchange="updateInvoicePreview()">
                    </div>
                    
                    <!-- Company Info Editor -->
                    <div class="mb-6">
                        <h5 class="font-medium text-gray-700 mb-3" data-translate="companyInfoEditor">ğŸ¢ Info Perusahaan</h5>
                        <div class="space-y-3">
                            <input type="text" id="editCompanyName" data-translate-placeholder="companyNamePlaceholder" placeholder="Nama Perusahaan" 
                                   class="w-full px-3 py-2 bg-white/60 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-400"
                                   onchange="updateInvoicePreview()">
                            <textarea id="editCompanyAddress" data-translate-placeholder="companyAddressPlaceholder" placeholder="Alamat Perusahaan" rows="2"
                                      class="w-full px-3 py-2 bg-white/60 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-400"
                                      onchange="updateInvoicePreview()"></textarea>
                            <input type="text" id="editCompanyPhone" data-translate-placeholder="phonePlaceholder" placeholder="Telepon" 
                                   class="w-full px-3 py-2 bg-white/60 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-400"
                                   onchange="updateInvoicePreview()">
                            <input type="email" id="editCompanyEmail" data-translate-placeholder="emailPlaceholder" placeholder="Email" 
                                   class="w-full px-3 py-2 bg-white/60 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-400"
                                   onchange="updateInvoicePreview()">
                        </div>
                    </div>
                    
                    <!-- Signature Section -->
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="signature">âœï¸ Tanda Tangan</label>
                        <div class="border-2 border-dashed border-gray-300 rounded-lg p-4 text-center">
                            <input type="file" id="signatureUpload" accept="image/*" class="hidden" onchange="handleSignatureUpload(event)">
                            <div id="signaturePreview" class="mb-2">
                                <div class="w-24 h-16 bg-gray-200 rounded-lg mx-auto flex items-center justify-center text-gray-500">
                                    âœï¸
                                </div>
                            </div>
                            <button onclick="document.getElementById('signatureUpload').click()" 
                                    class="text-blue-600 hover:text-blue-800 text-sm" data-translate="uploadSignature">
                                ğŸ“ Upload Tanda Tangan
                            </button>
                        </div>
                        <input type="text" id="signatureName" data-translate-placeholder="signerNamePlaceholder" placeholder="Nama Penandatangan" 
                               class="w-full px-3 py-2 bg-white/60 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-400 mt-2"
                               onchange="updateInvoicePreview()">
                        <input type="text" id="signatureTitle" data-translate-placeholder="signerTitlePlaceholder" placeholder="Jabatan" 
                               class="w-full px-3 py-2 bg-white/60 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-400 mt-2"
                               onchange="updateInvoicePreview()">
                    </div>
                    
                    <!-- Footer Settings -->
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="footerLabel">ğŸ“„ Footer</label>
                        <textarea id="invoiceFooter" data-translate-placeholder="footerPlaceholder" placeholder="Terima kasih atas kepercayaan Anda!" rows="2"
                                  class="w-full px-3 py-2 bg-white/60 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-400"
                                  onchange="updateInvoicePreview()"></textarea>
                    </div>
                </div>
                
                <!-- Preview Panel -->
                <div class="flex-1 p-6 min-h-0">
                    <div class="flex justify-between items-center mb-4">
                        <h4 class="text-lg font-medium text-gray-700" data-translate="previewPanel">ğŸ‘ï¸ Preview</h4>
                        <div class="flex gap-2">
                            <button onclick="printEditedInvoice()" 
                                    class="px-4 py-2 glass-button text-purple-700 rounded-lg hover:bg-purple-500/20 transition-colors"
                                    data-translate="printBtn">
                                ğŸ–¨ï¸ Cetak
                            </button>
                            <button onclick="saveEditedInvoiceAsPDF()" 
                                    class="px-4 py-2 glass-button text-red-700 rounded-lg hover:bg-red-500/20 transition-colors"
                                    data-translate="pdfBtn">
                                ğŸ“„ PDF
                            </button>
                            <button onclick="saveEditedInvoiceAsPNG()" 
                                    class="px-4 py-2 glass-button text-blue-700 rounded-lg hover:bg-blue-500/20 transition-colors"
                                    data-translate="pngBtn">
                                ğŸ–¼ï¸ PNG
                            </button>
                        </div>
                    </div>
                    
                    <!-- Invoice Preview -->
                    <div id="invoicePreviewContainer" class="bg-white border border-gray-300 rounded-lg p-6 shadow-lg min-h-[600px]">
                        <!-- Invoice content will be generated here -->
                    </div>
                </div>
            </div>
            
            <div class="p-6 border-t border-white/20">
                <div class="flex justify-end gap-3">
                    <button onclick="closeInvoiceEditor()" 
                            class="px-6 py-3 glass-button text-gray-700 rounded-xl hover:bg-white/30 transition-colors"
                            data-translate="close">
                        Tutup
                    </button>
                    <button onclick="saveInvoiceTemplate()" 
                            class="px-6 py-3 glass-button text-green-700 rounded-xl hover:bg-green-500/20 transition-colors"
                            data-translate="saveTemplate">
                        ğŸ’¾ Simpan Template
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Add/Edit Modal -->
    <div id="projectModal" class="fixed inset-0 bg-black/30 backdrop-blur-sm hidden items-center justify-center z-50 p-4">
        <div class="bg-white/90 backdrop-blur-xl border border-white/40 shadow-2xl rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto">
            <div class="p-6 border-b border-white/20">
                <h3 id="modalTitle" class="text-xl font-semibold gradient-text" data-translate="addNewProject">Tambah Proyek Baru</h3>
            </div>
            <form id="projectForm" class="p-6 space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="projectName">Nama Proyek</label>
                    <input type="text" id="projectName" required 
                           class="w-full px-4 py-3 bg-white/40 backdrop-blur-sm border border-white/50 rounded-xl focus:ring-2 focus:ring-blue-400 text-gray-800">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="clientName">Nama Client</label>
                    <input type="text" id="clientName" required 
                           class="w-full px-4 py-3 bg-white/40 backdrop-blur-sm border border-white/50 rounded-xl focus:ring-2 focus:ring-blue-400 text-gray-800"
                           placeholder="Masukkan nama client">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="platform">Platform</label>
                    <select id="platform" required 
                            class="w-full px-4 py-3 bg-white/40 backdrop-blur-sm border border-white/50 rounded-xl focus:ring-2 focus:ring-blue-400 text-gray-800">
                        <option value="" data-translate="selectPlatform">Pilih Platform</option>
                        <option value="fiverr" data-translate="fiverr">ğŸŸ¢ Fiverr</option>
                        <option value="upwork" data-translate="upwork">ğŸ”µ Upwork</option>
                        <option value="facebook" data-translate="facebook">ğŸ”µ Facebook</option>
                        <option value="tiktok" data-translate="tiktok">âš« TikTok</option>
                        <option value="instagram" data-translate="instagram">ğŸŸ£ Instagram</option>
                        <option value="linkedin" data-translate="linkedin">ğŸ”µ LinkedIn</option>
                        <option value="freelancer" data-translate="freelancer">ğŸŸ  Freelancer</option>
                        <option value="direct" data-translate="directClient">ğŸ’¼ Direct Client</option>
                        <option value="referral" data-translate="referral">ğŸ¤ Referral</option>
                        <option value="other" data-translate="other">ğŸ“± Lainnya</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="description">Deskripsi</label>
                    <textarea id="projectDescription" rows="3" 
                              class="w-full px-4 py-3 bg-white/40 backdrop-blur-sm border border-white/50 rounded-xl focus:ring-2 focus:ring-blue-400 text-gray-800"></textarea>
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="startDate">Tanggal Mulai</label>
                        <input type="date" id="startDate" required 
                               class="w-full px-4 py-3 bg-white/40 backdrop-blur-sm border border-white/50 rounded-xl focus:ring-2 focus:ring-blue-400 text-gray-800">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="endDate">Tanggal Selesai</label>
                        <input type="date" id="endDate" required 
                               class="w-full px-4 py-3 bg-white/40 backdrop-blur-sm border border-white/50 rounded-xl focus:ring-2 focus:ring-blue-400 text-gray-800">
                    </div>
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="priority">Prioritas</label>
                        <select id="priority" required 
                                class="w-full px-4 py-3 bg-white/40 backdrop-blur-sm border border-white/50 rounded-xl focus:ring-2 focus:ring-blue-400 text-gray-800">
                            <option value="high" data-translate="high">ğŸ”¥ Tinggi</option>
                            <option value="medium" data-translate="medium">âš¡ Sedang</option>
                            <option value="low" data-translate="low">ğŸ“ Rendah</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="status">Status</label>
                        <select id="status" required 
                                class="w-full px-4 py-3 bg-white/40 backdrop-blur-sm border border-white/50 rounded-xl focus:ring-2 focus:ring-blue-400 text-gray-800">
                            <option value="pending" data-translate="pending">â³ Menunggu</option>
                            <option value="progress" data-translate="progress">ğŸ”„ Dalam Proses</option>
                            <option value="completed" data-translate="completed">âœ… Selesai</option>
                        </select>
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="projectPrice">Harga Proyek (Rp)</label>
                    <input type="number" id="projectPrice" min="0" step="1000" 
                           class="w-full px-4 py-3 bg-white/40 backdrop-blur-sm border border-white/50 rounded-xl focus:ring-2 focus:ring-blue-400 text-gray-800"
                           placeholder="0">
                </div>
                <div class="flex gap-3 pt-4">
                    <button type="button" onclick="closeModal()" 
                            class="flex-1 px-4 py-3 glass-button text-gray-700 rounded-xl hover:bg-white/30 transition-colors"
                            data-translate="cancel">
                        Batal
                    </button>
                    <button type="submit" 
                            class="flex-1 px-4 py-3 glass-button text-blue-700 rounded-xl hover:bg-blue-500/20 transition-colors"
                            data-translate="save">
                        Simpan
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Authentication variables
        let userCredentials = JSON.parse(localStorage.getItem('userCredentials') || '{"username": "admin", "password": "admin123"}');
        let userAccounts = JSON.parse(localStorage.getItem('userAccounts') || '[]');
        let currentUser = null;
        let isAuthenticated = false;
        
        // Super Admin credentials (hanya untuk Anda)
        const SUPER_ADMIN = {
            username: "superadmin",
            password: "SuperAdmin2024!@#",
            secretKey: "MASTER_ACCESS_2024"
        };

        // Application variables
        let projects = JSON.parse(localStorage.getItem('workPlanner') || '[]');
        let editingId = null;
        let customSettings = JSON.parse(localStorage.getItem('plannerSettings') || '{}');
        
        // User activity tracking
        function trackUserActivity(action, details = {}) {
            const activity = {
                id: Date.now(),
                username: currentUser,
                action: action,
                details: details,
                timestamp: new Date().toISOString(),
                userAgent: navigator.userAgent,
                ip: 'Local', // Karena ini aplikasi lokal
                sessionId: sessionStorage.getItem('sessionId') || generateSessionId()
            };
            
            let activities = JSON.parse(localStorage.getItem('userActivities') || '[]');
            activities.push(activity);
            
            // Simpan maksimal 1000 aktivitas terakhir
            if (activities.length > 1000) {
                activities = activities.slice(-1000);
            }
            
            localStorage.setItem('userActivities', JSON.stringify(activities));
        }
        
        function generateSessionId() {
            const sessionId = 'session_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
            sessionStorage.setItem('sessionId', sessionId);
            return sessionId;
        }
        
        // Track user statistics
        function updateUserStats() {
            const stats = JSON.parse(localStorage.getItem('userStats') || '{}');
            const today = new Date().toDateString();
            
            if (!stats[currentUser]) {
                stats[currentUser] = {
                    totalLogins: 0,
                    lastLogin: null,
                    firstLogin: new Date().toISOString(),
                    totalProjects: 0,
                    totalTimeSpent: 0,
                    dailyActivity: {}
                };
            }
            
            stats[currentUser].totalLogins++;
            stats[currentUser].lastLogin = new Date().toISOString();
            
            if (!stats[currentUser].dailyActivity[today]) {
                stats[currentUser].dailyActivity[today] = {
                    logins: 0,
                    projectsCreated: 0,
                    projectsCompleted: 0,
                    timeSpent: 0
                };
            }
            
            stats[currentUser].dailyActivity[today].logins++;
            
            localStorage.setItem('userStats', JSON.stringify(stats));
        }
        
        // Language translations
        const translations = {
            id: {
                // Login Screen
                welcomeTitle: 'Selamat Datang',
                welcomeSubtitle: 'Masuk ke Planner Pekerjaan Bulanan',
                loginTab: 'ğŸ”‘ Masuk',
                registerTab: 'ğŸ“ Daftar',
                defaultCredentials: 'Kredensial Default:',
                username: 'Username',
                password: 'Password',
                usernameLabel: 'ğŸ‘¤ Username',
                passwordLabel: 'ğŸ”‘ Password',
                usernamePlaceholder: 'Masukkan username',
                passwordPlaceholder: 'Masukkan password',
                rememberMe: 'ğŸ’¾ Ingat saya',
                loginError: 'Username atau password salah!',
                loginButton: 'ğŸš€ Masuk ke Dashboard',
                loginLoading: 'â³ Memproses...',
                createNewAccount: 'Buat Akun Baru:',
                registerDescription: 'Daftarkan akun Anda untuk menggunakan aplikasi planner pekerjaan',
                dataSecurityNote: 'ğŸ”’ Data Anda aman dan tersimpan lokal di browser',
                
                // Header
                title: 'ğŸ“… Planner Pekerjaan Bulanan',
                subtitle: 'Kelola proyek dan tugas Anda dengan mudah',
                settings: 'âš™ï¸ Pengaturan',
                exportExcel: 'ğŸ“Š Ekspor ke Excel',
                addProject: 'â• Tambah Proyek',
                
                // Stats
                totalProjects: 'Total Proyek',
                highPriority: 'Prioritas Tinggi',
                completed: 'Selesai',
                totalValue: 'Total Nilai',
                
                // Filters
                searchPlaceholder: 'ğŸ” Cari proyek...',
                allPriorities: 'Semua Prioritas',
                allStatuses: 'Semua Status',
                high: 'Tinggi',
                medium: 'Sedang',
                low: 'Rendah',
                pending: 'Menunggu',
                progress: 'Dalam Proses',
                completed: 'Selesai',
                
                // Project List
                projectList: 'Daftar Proyek',
                noProjects: 'Belum ada proyek. Klik "Tambah Proyek" untuk memulai!',
                client: 'Klien',
                platform: 'Platform',
                edit: 'âœï¸ Edit',
                delete: 'ğŸ—‘ï¸ Hapus',
                
                // Modal
                addNewProject: 'Tambah Proyek Baru',
                editProject: 'Edit Proyek',
                projectName: 'Nama Proyek',
                clientName: 'Nama Klien',
                selectPlatform: 'Pilih Platform',
                description: 'Deskripsi',
                startDate: 'Tanggal Mulai',
                endDate: 'Tanggal Selesai',
                priority: 'Prioritas',
                status: 'Status',
                projectPrice: 'Harga Proyek',
                cancel: 'Batal',
                save: 'Simpan',
                
                // Settings Modal
                displaySettings: 'âš™ï¸ Pengaturan Tampilan',
                language: 'ğŸŒ Bahasa',
                selectLanguage: 'Pilih Bahasa',
                header: 'ğŸ“ Header',
                resetDefault: 'ğŸ”„ Reset ke Default',
                
                // Platforms
                fiverr: 'Fiverr',
                upwork: 'Upwork',
                facebook: 'Facebook',
                tiktok: 'TikTok',
                instagram: 'Instagram',
                linkedin: 'LinkedIn',
                freelancer: 'Freelancer',
                directClient: 'Klien Langsung',
                referral: 'Rujukan',
                other: 'Lainnya',
                
                // Account Management
                accountManagement: 'ğŸ‘¥ Kelola Akun',
                accountInfo: 'ğŸ“Š Informasi Akun Aktif',
                activeUsername: 'ğŸ‘¤ Username Aktif',
                sessionType: 'ğŸ”’ Tipe Sesi',
                totalRegisteredUsers: 'ğŸ“Š Total Akun Terdaftar',
                allAccountsList: 'ğŸ“‹ Daftar Semua Akun',
                updateCredentials: 'ğŸ” Update Kredensial Akun Aktif',
                newUsername: 'Username Baru',
                newPassword: 'Password Baru',
                confirmPassword: 'Konfirmasi Password',
                updateCredentialsBtn: 'ğŸ” Update Kredensial Login',
                onlyAdminAvailable: 'Hanya akun admin default yang tersedia',
                activeAccount: 'Aktif',
                createdOn: 'Dibuat',
                deleteAccount: 'Hapus Akun',
                close: 'Tutup',
                
                // Invoice Features
                printReportInvoice: 'ğŸ–¨ï¸ Cetak Laporan & Invoice',
                printType: 'Jenis Cetak',
                projectReport: 'ğŸ“Š Laporan Proyek',
                invoiceNote: 'ğŸ§¾ Invoice/Nota',
                invoiceSettings: 'âš™ï¸ Pengaturan Invoice',
                selectProjectInvoice: 'Pilih Proyek untuk Invoice',
                selectProject: 'Pilih Proyek...',
                paperFormat: 'Format Kertas',
                invoiceNumber: 'Nomor Invoice',
                invoiceDate: 'Tanggal Invoice',
                dueDate: 'Jatuh Tempo',
                companyInfo: 'ğŸ¢ Info Perusahaan',
                companyName: 'Nama Perusahaan',
                address: 'Alamat',
                phone: 'Telepon',
                email: 'Email',
                website: 'Website',
                paymentOptions: 'ğŸ’° Opsi Pembayaran',
                taxPPN: 'PPN (%)',
                discount: 'Diskon (%)',
                additionalNotes: 'Catatan Tambahan',
                bankInfo: 'Info Rekening Bank',
                printInvoice: 'ğŸ§¾ Cetak Invoice',
                
                // Paper formats
                paperA4: 'ğŸ“„ A4 (210 x 297 mm)',
                paperA5: 'ğŸ“„ A5 (148 x 210 mm)',
                paperA6: 'ğŸ“„ A6 (105 x 148 mm)',
                paperLetter: 'ğŸ“„ Letter (216 x 279 mm)',
                paperLegal: 'ğŸ“„ Legal (216 x 356 mm)',
                paperReceipt: 'ğŸ§¾ Receipt (80mm)',
                
                // Validation messages
                allFieldsRequired: 'Semua field harus diisi!',
                usernameMinLength: 'Username minimal 3 karakter!',
                passwordMinLength: 'Password minimal 6 karakter!',
                passwordMismatch: 'Konfirmasi password tidak cocok!',
                confirmUpdateCredentials: 'Apakah Anda yakin ingin mengubah kredensial login?\n\nPastikan Anda mengingat username dan password baru!',
                credentialsUpdated: 'Kredensial berhasil diperbarui!\n\nGunakan username dan password baru untuk login selanjutnya.',
                confirmDeleteAccount: 'Apakah Anda yakin ingin menghapus akun',
                accountDeleted: 'berhasil dihapus!',
                selectProjectFirst: 'Pilih proyek untuk invoice terlebih dahulu!',
                projectNotFound: 'Proyek tidak ditemukan!',
                
                // Welcome message
                welcomeGreeting: 'Hai',
                welcomeMessage: 'selamat datang kembali!',
                
                // Messages
                deleteConfirm: 'Apakah Anda yakin ingin menghapus proyek ini?',
                resetConfirm: 'Apakah Anda yakin ingin mereset semua pengaturan ke default?',
                noDataExport: 'Tidak ada data untuk diekspor!',
                noMatchingProjects: 'Tidak ada proyek yang sesuai dengan filter.',
                dashboardStats: 'ğŸ“Š Statistik Dashboard',
                
                // Print translations
                printReport: 'ğŸ–¨ï¸ Cetak Laporan',
                reportType: 'Jenis Laporan',
                allProjects: 'Semua Proyek',
                completedOnly: 'Hanya yang Selesai',
                pendingOnly: 'Hanya yang Pending',
                progressOnly: 'Hanya yang Dalam Proses',
                highPriorityOnly: 'Hanya Prioritas Tinggi',
                printOptions: 'Opsi Cetak',
                includeStatistics: 'Sertakan Statistik',
                includeDescriptions: 'Sertakan Deskripsi',
                includePrices: 'Sertakan Harga',
                print: 'ğŸ–¨ï¸ Cetak',
                saveAsPDF: 'ğŸ“„ Simpan PDF',
                saveAsPNG: 'ğŸ–¼ï¸ Simpan PNG',
                editInvoice: 'âœï¸ Edit Nota',
                
                // Invoice Editor
                editInvoiceTitle: 'âœï¸ Edit Invoice/Nota',
                editorPanel: 'ğŸ¨ Editor',
                companyLogo: 'ğŸ¢ Logo Perusahaan',
                uploadLogo: 'ğŸ“ Upload Logo',
                invoiceTitleLabel: 'ğŸ“ Judul Invoice',
                headerColor: 'ğŸ¨ Warna Header',
                companyInfoEditor: 'ğŸ¢ Info Perusahaan',
                companyNamePlaceholder: 'Nama Perusahaan',
                companyAddressPlaceholder: 'Alamat Perusahaan',
                phonePlaceholder: 'Telepon',
                emailPlaceholder: 'Email',
                signature: 'âœï¸ Tanda Tangan',
                uploadSignature: 'ğŸ“ Upload Tanda Tangan',
                signerNamePlaceholder: 'Nama Penandatangan',
                signerTitlePlaceholder: 'Jabatan',
                footerLabel: 'ğŸ“„ Footer',
                footerPlaceholder: 'Terima kasih atas kepercayaan Anda!',
                previewPanel: 'ğŸ‘ï¸ Preview',
                printBtn: 'ğŸ–¨ï¸ Cetak',
                pdfBtn: 'ğŸ“„ PDF',
                pngBtn: 'ğŸ–¼ï¸ PNG',
                saveTemplate: 'ğŸ’¾ Simpan Template'
            },
            en: {
                // Login Screen
                welcomeTitle: 'Welcome',
                welcomeSubtitle: 'Login to Monthly Work Planner',
                loginTab: 'ğŸ”‘ Login',
                registerTab: 'ğŸ“ Register',
                defaultCredentials: 'Default Credentials:',
                username: 'Username',
                password: 'Password',
                usernameLabel: 'ğŸ‘¤ Username',
                passwordLabel: 'ğŸ”‘ Password',
                usernamePlaceholder: 'Enter username',
                passwordPlaceholder: 'Enter password',
                rememberMe: 'ğŸ’¾ Remember me',
                loginError: 'Invalid username or password!',
                loginButton: 'ğŸš€ Login to Dashboard',
                loginLoading: 'â³ Processing...',
                createNewAccount: 'Create New Account:',
                registerDescription: 'Register your account to use the work planner application',
                dataSecurityNote: 'ğŸ”’ Your data is safe and stored locally in browser',
                
                // Header
                title: 'ğŸ“… Monthly Work Planner',
                subtitle: 'Manage your projects and tasks with ease',
                settings: 'âš™ï¸ Settings',
                exportExcel: 'ğŸ“Š Export to Excel',
                addProject: 'â• Add Project',
                
                // Stats
                totalProjects: 'Total Projects',
                highPriority: 'High Priority',
                completed: 'Completed',
                totalValue: 'Total Value',
                
                // Filters
                searchPlaceholder: 'ğŸ” Search projects...',
                allPriorities: 'All Priorities',
                allStatuses: 'All Statuses',
                high: 'High',
                medium: 'Medium',
                low: 'Low',
                pending: 'Pending',
                progress: 'In Progress',
                completed: 'Completed',
                
                // Project List
                projectList: 'Project List',
                noProjects: 'No projects yet. Click "Add Project" to get started!',
                client: 'Client',
                platform: 'Platform',
                edit: 'âœï¸ Edit',
                delete: 'ğŸ—‘ï¸ Delete',
                
                // Modal
                addNewProject: 'Add New Project',
                editProject: 'Edit Project',
                projectName: 'Project Name',
                clientName: 'Client Name',
                selectPlatform: 'Select Platform',
                description: 'Description',
                startDate: 'Start Date',
                endDate: 'End Date',
                priority: 'Priority',
                status: 'Status',
                projectPrice: 'Project Price',
                cancel: 'Cancel',
                save: 'Save',
                
                // Settings Modal
                displaySettings: 'âš™ï¸ Display Settings',
                language: 'ğŸŒ Language',
                selectLanguage: 'Select Language',
                header: 'ğŸ“ Header',
                resetDefault: 'ğŸ”„ Reset to Default',
                
                // Platforms
                fiverr: 'Fiverr',
                upwork: 'Upwork',
                facebook: 'Facebook',
                tiktok: 'TikTok',
                instagram: 'Instagram',
                linkedin: 'LinkedIn',
                freelancer: 'Freelancer',
                directClient: 'Direct Client',
                referral: 'Referral',
                other: 'Other',
                
                // Account Management
                accountManagement: 'ğŸ‘¥ Account Management',
                accountInfo: 'ğŸ“Š Active Account Information',
                activeUsername: 'ğŸ‘¤ Active Username',
                sessionType: 'ğŸ”’ Session Type',
                totalRegisteredUsers: 'ğŸ“Š Total Registered Accounts',
                allAccountsList: 'ğŸ“‹ All Accounts List',
                updateCredentials: 'ğŸ” Update Active Account Credentials',
                newUsername: 'New Username',
                newPassword: 'New Password',
                confirmPassword: 'Confirm Password',
                updateCredentialsBtn: 'ğŸ” Update Login Credentials',
                onlyAdminAvailable: 'Only default admin account available',
                activeAccount: 'Active',
                createdOn: 'Created',
                deleteAccount: 'Delete Account',
                close: 'Close',
                
                // Invoice Features
                printReportInvoice: 'ğŸ–¨ï¸ Print Report & Invoice',
                printType: 'Print Type',
                projectReport: 'ğŸ“Š Project Report',
                invoiceNote: 'ğŸ§¾ Invoice/Receipt',
                invoiceSettings: 'âš™ï¸ Invoice Settings',
                selectProjectInvoice: 'Select Project for Invoice',
                selectProject: 'Select Project...',
                paperFormat: 'Paper Format',
                invoiceNumber: 'Invoice Number',
                invoiceDate: 'Invoice Date',
                dueDate: 'Due Date',
                companyInfo: 'ğŸ¢ Company Information',
                companyName: 'Company Name',
                address: 'Address',
                phone: 'Phone',
                email: 'Email',
                website: 'Website',
                paymentOptions: 'ğŸ’° Payment Options',
                taxPPN: 'Tax (%)',
                discount: 'Discount (%)',
                additionalNotes: 'Additional Notes',
                bankInfo: 'Bank Account Information',
                printInvoice: 'ğŸ§¾ Print Invoice',
                
                // Paper formats
                paperA4: 'ğŸ“„ A4 (210 x 297 mm)',
                paperA5: 'ğŸ“„ A5 (148 x 210 mm)',
                paperA6: 'ğŸ“„ A6 (105 x 148 mm)',
                paperLetter: 'ğŸ“„ Letter (216 x 279 mm)',
                paperLegal: 'ğŸ“„ Legal (216 x 356 mm)',
                paperReceipt: 'ğŸ§¾ Receipt (80mm)',
                
                // Validation messages
                allFieldsRequired: 'All fields must be filled!',
                usernameMinLength: 'Username minimum 3 characters!',
                passwordMinLength: 'Password minimum 6 characters!',
                passwordMismatch: 'Password confirmation does not match!',
                confirmUpdateCredentials: 'Are you sure you want to change login credentials?\n\nMake sure you remember the new username and password!',
                credentialsUpdated: 'Credentials successfully updated!\n\nUse the new username and password for next login.',
                confirmDeleteAccount: 'Are you sure you want to delete account',
                accountDeleted: 'successfully deleted!',
                selectProjectFirst: 'Please select a project for invoice first!',
                projectNotFound: 'Project not found!',
                
                // Welcome message
                welcomeGreeting: 'Hello',
                welcomeMessage: 'welcome back!',
                
                // Messages
                deleteConfirm: 'Are you sure you want to delete this project?',
                resetConfirm: 'Are you sure you want to reset all settings to default?',
                noDataExport: 'No data to export!',
                noMatchingProjects: 'No projects match the current filter.',
                dashboardStats: 'ğŸ“Š Dashboard Statistics',
                
                // Print translations
                printReport: 'ğŸ–¨ï¸ Print Report',
                reportType: 'Report Type',
                allProjects: 'All Projects',
                completedOnly: 'Completed Only',
                pendingOnly: 'Pending Only',
                progressOnly: 'In Progress Only',
                highPriorityOnly: 'High Priority Only',
                printOptions: 'Print Options',
                includeStatistics: 'Include Statistics',
                includeDescriptions: 'Include Descriptions',
                includePrices: 'Include Prices',
                print: 'ğŸ–¨ï¸ Print',
                saveAsPDF: 'ğŸ“„ Save PDF',
                saveAsPNG: 'ğŸ–¼ï¸ Save PNG',
                editInvoice: 'âœï¸ Edit Invoice',
                
                // Invoice Editor
                editInvoiceTitle: 'âœï¸ Edit Invoice/Receipt',
                editorPanel: 'ğŸ¨ Editor',
                companyLogo: 'ğŸ¢ Company Logo',
                uploadLogo: 'ğŸ“ Upload Logo',
                invoiceTitleLabel: 'ğŸ“ Invoice Title',
                headerColor: 'ğŸ¨ Header Color',
                companyInfoEditor: 'ğŸ¢ Company Information',
                companyNamePlaceholder: 'Company Name',
                companyAddressPlaceholder: 'Company Address',
                phonePlaceholder: 'Phone',
                emailPlaceholder: 'Email',
                signature: 'âœï¸ Signature',
                uploadSignature: 'ğŸ“ Upload Signature',
                signerNamePlaceholder: 'Signer Name',
                signerTitlePlaceholder: 'Position',
                footerLabel: 'ğŸ“„ Footer',
                footerPlaceholder: 'Thank you for your trust!',
                previewPanel: 'ğŸ‘ï¸ Preview',
                printBtn: 'ğŸ–¨ï¸ Print',
                pdfBtn: 'ğŸ“„ PDF',
                pngBtn: 'ğŸ–¼ï¸ PNG',
                saveTemplate: 'ğŸ’¾ Save Template'
            },
            ja: {
                // Login Screen
                welcomeTitle: 'ã‚ˆã†ã“ã',
                welcomeSubtitle: 'æœˆæ¬¡ä½œæ¥­ãƒ—ãƒ©ãƒ³ãƒŠãƒ¼ã«ãƒ­ã‚°ã‚¤ãƒ³',
                loginTab: 'ğŸ”‘ ãƒ­ã‚°ã‚¤ãƒ³',
                registerTab: 'ğŸ“ ç™»éŒ²',
                defaultCredentials: 'ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆèªè¨¼æƒ…å ±:',
                username: 'ãƒ¦ãƒ¼ã‚¶ãƒ¼å',
                password: 'ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰',
                usernameLabel: 'ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼å',
                passwordLabel: 'ğŸ”‘ ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰',
                usernamePlaceholder: 'ãƒ¦ãƒ¼ã‚¶ãƒ¼åã‚’å…¥åŠ›',
                passwordPlaceholder: 'ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›',
                rememberMe: 'ğŸ’¾ ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ã‚’ä¿æŒ',
                loginError: 'ãƒ¦ãƒ¼ã‚¶ãƒ¼åã¾ãŸã¯ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒé–“é•ã£ã¦ã„ã¾ã™ï¼',
                loginButton: 'ğŸš€ ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«ãƒ­ã‚°ã‚¤ãƒ³',
                loginLoading: 'â³ å‡¦ç†ä¸­...',
                createNewAccount: 'æ–°ã—ã„ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œæˆ:',
                registerDescription: 'ä½œæ¥­ãƒ—ãƒ©ãƒ³ãƒŠãƒ¼ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½¿ç”¨ã™ã‚‹ãŸã‚ã«ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ç™»éŒ²ã—ã¦ãã ã•ã„',
                dataSecurityNote: 'ğŸ”’ ãƒ‡ãƒ¼ã‚¿ã¯å®‰å…¨ã§ãƒ–ãƒ©ã‚¦ã‚¶ã«ãƒ­ãƒ¼ã‚«ãƒ«ä¿å­˜ã•ã‚Œã¾ã™',
                
                // Header
                title: 'ğŸ“… æœˆæ¬¡ä½œæ¥­ãƒ—ãƒ©ãƒ³ãƒŠãƒ¼',
                subtitle: 'ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¨ã‚¿ã‚¹ã‚¯ã‚’ç°¡å˜ã«ç®¡ç†',
                settings: 'âš™ï¸ è¨­å®š',
                exportExcel: 'ğŸ“Š Excelã«ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ',
                addProject: 'â• ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¿½åŠ ',
                
                // Stats
                totalProjects: 'ç·ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ•°',
                highPriority: 'é«˜å„ªå…ˆåº¦',
                completed: 'å®Œäº†',
                totalValue: 'ç·ä¾¡å€¤',
                
                // Filters
                searchPlaceholder: 'ğŸ” ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’æ¤œç´¢...',
                allPriorities: 'ã™ã¹ã¦ã®å„ªå…ˆåº¦',
                allStatuses: 'ã™ã¹ã¦ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹',
                high: 'é«˜',
                medium: 'ä¸­',
                low: 'ä½',
                pending: 'ä¿ç•™ä¸­',
                progress: 'é€²è¡Œä¸­',
                completed: 'å®Œäº†',
                
                // Project List
                projectList: 'ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä¸€è¦§',
                noProjects: 'ã¾ã ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒã‚ã‚Šã¾ã›ã‚“ã€‚ã€Œãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¿½åŠ ã€ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦é–‹å§‹ã—ã¦ãã ã•ã„ï¼',
                client: 'ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ',
                platform: 'ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ',
                edit: 'âœï¸ ç·¨é›†',
                delete: 'ğŸ—‘ï¸ å‰Šé™¤',
                
                // Modal
                addNewProject: 'æ–°ã—ã„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’è¿½åŠ ',
                editProject: 'ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ç·¨é›†',
                projectName: 'ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå',
                clientName: 'ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå',
                selectPlatform: 'ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã‚’é¸æŠ',
                description: 'èª¬æ˜',
                startDate: 'é–‹å§‹æ—¥',
                endDate: 'çµ‚äº†æ—¥',
                priority: 'å„ªå…ˆåº¦',
                status: 'ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹',
                projectPrice: 'ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä¾¡æ ¼',
                cancel: 'ã‚­ãƒ£ãƒ³ã‚»ãƒ«',
                save: 'ä¿å­˜',
                
                // Settings Modal
                displaySettings: 'âš™ï¸ è¡¨ç¤ºè¨­å®š',
                language: 'ğŸŒ è¨€èª',
                selectLanguage: 'è¨€èªã‚’é¸æŠ',
                header: 'ğŸ“ ãƒ˜ãƒƒãƒ€ãƒ¼',
                resetDefault: 'ğŸ”„ ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã«ãƒªã‚»ãƒƒãƒˆ',
                
                // Platforms
                fiverr: 'Fiverr',
                upwork: 'Upwork',
                facebook: 'Facebook',
                tiktok: 'TikTok',
                instagram: 'Instagram',
                linkedin: 'LinkedIn',
                freelancer: 'Freelancer',
                directClient: 'ç›´æ¥ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ',
                referral: 'ç´¹ä»‹',
                other: 'ãã®ä»–',
                
                // Account Management
                accountManagement: 'ğŸ‘¥ ã‚¢ã‚«ã‚¦ãƒ³ãƒˆç®¡ç†',
                accountInfo: 'ğŸ“Š ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæƒ…å ±',
                activeUsername: 'ğŸ‘¤ ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ¦ãƒ¼ã‚¶ãƒ¼å',
                sessionType: 'ğŸ”’ ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚¿ã‚¤ãƒ—',
                totalRegisteredUsers: 'ğŸ“Š ç™»éŒ²ã‚¢ã‚«ã‚¦ãƒ³ãƒˆç·æ•°',
                allAccountsList: 'ğŸ“‹ å…¨ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä¸€è¦§',
                updateCredentials: 'ğŸ” ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‚¢ã‚«ã‚¦ãƒ³ãƒˆèªè¨¼æƒ…å ±æ›´æ–°',
                newUsername: 'æ–°ã—ã„ãƒ¦ãƒ¼ã‚¶ãƒ¼å',
                newPassword: 'æ–°ã—ã„ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰',
                confirmPassword: 'ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ç¢ºèª',
                updateCredentialsBtn: 'ğŸ” ãƒ­ã‚°ã‚¤ãƒ³èªè¨¼æƒ…å ±ã‚’æ›´æ–°',
                onlyAdminAvailable: 'ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆç®¡ç†è€…ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®ã¿åˆ©ç”¨å¯èƒ½',
                activeAccount: 'ã‚¢ã‚¯ãƒ†ã‚£ãƒ–',
                createdOn: 'ä½œæˆæ—¥',
                deleteAccount: 'ã‚¢ã‚«ã‚¦ãƒ³ãƒˆå‰Šé™¤',
                close: 'é–‰ã˜ã‚‹',
                
                // Invoice Features
                printReportInvoice: 'ğŸ–¨ï¸ ãƒ¬ãƒãƒ¼ãƒˆãƒ»è«‹æ±‚æ›¸å°åˆ·',
                printType: 'å°åˆ·ã‚¿ã‚¤ãƒ—',
                projectReport: 'ğŸ“Š ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ¬ãƒãƒ¼ãƒˆ',
                invoiceNote: 'ğŸ§¾ è«‹æ±‚æ›¸/é ˜åæ›¸',
                invoiceSettings: 'âš™ï¸ è«‹æ±‚æ›¸è¨­å®š',
                selectProjectInvoice: 'è«‹æ±‚æ›¸ç”¨ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆé¸æŠ',
                selectProject: 'ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’é¸æŠ...',
                paperFormat: 'ç”¨ç´™ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ',
                invoiceNumber: 'è«‹æ±‚æ›¸ç•ªå·',
                invoiceDate: 'è«‹æ±‚æ›¸æ—¥ä»˜',
                dueDate: 'æ”¯æ‰•æœŸé™',
                companyInfo: 'ğŸ¢ ä¼šç¤¾æƒ…å ±',
                companyName: 'ä¼šç¤¾å',
                address: 'ä½æ‰€',
                phone: 'é›»è©±ç•ªå·',
                email: 'ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹',
                website: 'ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆ',
                paymentOptions: 'ğŸ’° æ”¯æ‰•ã„ã‚ªãƒ—ã‚·ãƒ§ãƒ³',
                taxPPN: 'ç¨é‡‘ (%)',
                discount: 'å‰²å¼• (%)',
                additionalNotes: 'è¿½åŠ ãƒ¡ãƒ¢',
                bankInfo: 'éŠ€è¡Œå£åº§æƒ…å ±',
                printInvoice: 'ğŸ§¾ è«‹æ±‚æ›¸å°åˆ·',
                
                // Paper formats
                paperA4: 'ğŸ“„ A4 (210 x 297 mm)',
                paperA5: 'ğŸ“„ A5 (148 x 210 mm)',
                paperA6: 'ğŸ“„ A6 (105 x 148 mm)',
                paperLetter: 'ğŸ“„ Letter (216 x 279 mm)',
                paperLegal: 'ğŸ“„ Legal (216 x 356 mm)',
                paperReceipt: 'ğŸ§¾ Receipt (80mm)',
                
                // Validation messages
                allFieldsRequired: 'ã™ã¹ã¦ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼',
                usernameMinLength: 'ãƒ¦ãƒ¼ã‚¶ãƒ¼åã¯æœ€ä½3æ–‡å­—ã§ã™ï¼',
                passwordMinLength: 'ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯æœ€ä½6æ–‡å­—ã§ã™ï¼',
                passwordMismatch: 'ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ç¢ºèªãŒä¸€è‡´ã—ã¾ã›ã‚“ï¼',
                confirmUpdateCredentials: 'ãƒ­ã‚°ã‚¤ãƒ³èªè¨¼æƒ…å ±ã‚’å¤‰æ›´ã—ã¦ã‚‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ\n\næ–°ã—ã„ãƒ¦ãƒ¼ã‚¶ãƒ¼åã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’è¦šãˆã¦ãŠã„ã¦ãã ã•ã„ï¼',
                credentialsUpdated: 'èªè¨¼æƒ…å ±ãŒæ­£å¸¸ã«æ›´æ–°ã•ã‚Œã¾ã—ãŸï¼\n\næ¬¡å›ãƒ­ã‚°ã‚¤ãƒ³æ™‚ã¯æ–°ã—ã„ãƒ¦ãƒ¼ã‚¶ãƒ¼åã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚',
                confirmDeleteAccount: 'ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’å‰Šé™¤ã—ã¦ã‚‚ã‚ˆã‚ã—ã„ã§ã™ã‹',
                accountDeleted: 'ãŒæ­£å¸¸ã«å‰Šé™¤ã•ã‚Œã¾ã—ãŸï¼',
                selectProjectFirst: 'æœ€åˆã«è«‹æ±‚æ›¸ç”¨ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’é¸æŠã—ã¦ãã ã•ã„ï¼',
                projectNotFound: 'ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ï¼',
                
                // Welcome message
                welcomeGreeting: 'ã“ã‚“ã«ã¡ã¯',
                welcomeMessage: 'ãŠã‹ãˆã‚Šãªã•ã„ï¼',
                
                // Messages
                deleteConfirm: 'ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’å‰Šé™¤ã—ã¦ã‚‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ',
                resetConfirm: 'ã™ã¹ã¦ã®è¨­å®šã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã«ãƒªã‚»ãƒƒãƒˆã—ã¦ã‚‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ',
                noDataExport: 'ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã™ã‚‹ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“ï¼',
                noMatchingProjects: 'ç¾åœ¨ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã«ä¸€è‡´ã™ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒã‚ã‚Šã¾ã›ã‚“ã€‚',
                dashboardStats: 'ğŸ“Š ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰çµ±è¨ˆ',
                
                // Print translations
                printReport: 'ğŸ–¨ï¸ ãƒ¬ãƒãƒ¼ãƒˆå°åˆ·',
                reportType: 'ãƒ¬ãƒãƒ¼ãƒˆã‚¿ã‚¤ãƒ—',
                allProjects: 'ã™ã¹ã¦ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ',
                completedOnly: 'å®Œäº†ã®ã¿',
                pendingOnly: 'ä¿ç•™ä¸­ã®ã¿',
                progressOnly: 'é€²è¡Œä¸­ã®ã¿',
                highPriorityOnly: 'é«˜å„ªå…ˆåº¦ã®ã¿',
                printOptions: 'å°åˆ·ã‚ªãƒ—ã‚·ãƒ§ãƒ³',
                includeStatistics: 'çµ±è¨ˆã‚’å«ã‚ã‚‹',
                includeDescriptions: 'èª¬æ˜ã‚’å«ã‚ã‚‹',
                includePrices: 'ä¾¡æ ¼ã‚’å«ã‚ã‚‹',
                print: 'ğŸ–¨ï¸ å°åˆ·',
                saveAsPDF: 'ğŸ“„ PDFä¿å­˜',
                saveAsPNG: 'ğŸ–¼ï¸ PNGä¿å­˜',
                editInvoice: 'âœï¸ è«‹æ±‚æ›¸ç·¨é›†',
                
                // Invoice Editor
                editInvoiceTitle: 'âœï¸ è«‹æ±‚æ›¸/é ˜åæ›¸ç·¨é›†',
                editorPanel: 'ğŸ¨ ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼',
                companyLogo: 'ğŸ¢ ä¼šç¤¾ãƒ­ã‚´',
                uploadLogo: 'ğŸ“ ãƒ­ã‚´ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰',
                invoiceTitleLabel: 'ğŸ“ è«‹æ±‚æ›¸ã‚¿ã‚¤ãƒˆãƒ«',
                headerColor: 'ğŸ¨ ãƒ˜ãƒƒãƒ€ãƒ¼è‰²',
                companyInfoEditor: 'ğŸ¢ ä¼šç¤¾æƒ…å ±',
                companyNamePlaceholder: 'ä¼šç¤¾å',
                companyAddressPlaceholder: 'ä¼šç¤¾ä½æ‰€',
                phonePlaceholder: 'é›»è©±ç•ªå·',
                emailPlaceholder: 'ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹',
                signature: 'âœï¸ ç½²å',
                uploadSignature: 'ğŸ“ ç½²åã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰',
                signerNamePlaceholder: 'ç½²åè€…å',
                signerTitlePlaceholder: 'å½¹è·',
                footerLabel: 'ğŸ“„ ãƒ•ãƒƒã‚¿ãƒ¼',
                footerPlaceholder: 'ã”ä¿¡é ¼ã„ãŸã ãã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ï¼',
                previewPanel: 'ğŸ‘ï¸ ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼',
                printBtn: 'ğŸ–¨ï¸ å°åˆ·',
                pdfBtn: 'ğŸ“„ PDF',
                pngBtn: 'ğŸ–¼ï¸ PNG',
                saveTemplate: 'ğŸ’¾ ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆä¿å­˜'
            },
            ko: {
                // Login Screen
                welcomeTitle: 'í™˜ì˜í•©ë‹ˆë‹¤',
                welcomeSubtitle: 'ì›”ê°„ ì—…ë¬´ í”Œë˜ë„ˆì— ë¡œê·¸ì¸',
                loginTab: 'ğŸ”‘ ë¡œê·¸ì¸',
                registerTab: 'ğŸ“ íšŒì›ê°€ì…',
                defaultCredentials: 'ê¸°ë³¸ ì¸ì¦ ì •ë³´:',
                username: 'ì‚¬ìš©ìëª…',
                password: 'ë¹„ë°€ë²ˆí˜¸',
                usernameLabel: 'ğŸ‘¤ ì‚¬ìš©ìëª…',
                passwordLabel: 'ğŸ”‘ ë¹„ë°€ë²ˆí˜¸',
                usernamePlaceholder: 'ì‚¬ìš©ìëª…ì„ ì…ë ¥í•˜ì„¸ìš”',
                passwordPlaceholder: 'ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”',
                rememberMe: 'ğŸ’¾ ë¡œê·¸ì¸ ìƒíƒœ ìœ ì§€',
                loginError: 'ì‚¬ìš©ìëª… ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ì˜ëª»ë˜ì—ˆìŠµë‹ˆë‹¤!',
                loginButton: 'ğŸš€ ëŒ€ì‹œë³´ë“œë¡œ ë¡œê·¸ì¸',
                loginLoading: 'â³ ì²˜ë¦¬ ì¤‘...',
                createNewAccount: 'ìƒˆ ê³„ì • ë§Œë“¤ê¸°:',
                registerDescription: 'ì—…ë¬´ í”Œë˜ë„ˆ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ê³„ì •ì„ ë“±ë¡í•˜ì„¸ìš”',
                dataSecurityNote: 'ğŸ”’ ë°ì´í„°ëŠ” ì•ˆì „í•˜ê²Œ ë¸Œë¼ìš°ì €ì— ë¡œì»¬ ì €ì¥ë©ë‹ˆë‹¤',
                
                // Header
                title: 'ğŸ“… ì›”ê°„ ì—…ë¬´ í”Œë˜ë„ˆ',
                subtitle: 'í”„ë¡œì íŠ¸ì™€ ì‘ì—…ì„ ì‰½ê²Œ ê´€ë¦¬í•˜ì„¸ìš”',
                settings: 'âš™ï¸ ì„¤ì •',
                exportExcel: 'ğŸ“Š Excelë¡œ ë‚´ë³´ë‚´ê¸°',
                addProject: 'â• í”„ë¡œì íŠ¸ ì¶”ê°€',
                
                // Stats
                totalProjects: 'ì´ í”„ë¡œì íŠ¸',
                highPriority: 'ë†’ì€ ìš°ì„ ìˆœìœ„',
                completed: 'ì™„ë£Œë¨',
                totalValue: 'ì´ ê°€ì¹˜',
                
                // Filters
                searchPlaceholder: 'ğŸ” í”„ë¡œì íŠ¸ ê²€ìƒ‰...',
                allPriorities: 'ëª¨ë“  ìš°ì„ ìˆœìœ„',
                allStatuses: 'ëª¨ë“  ìƒíƒœ',
                high: 'ë†’ìŒ',
                medium: 'ë³´í†µ',
                low: 'ë‚®ìŒ',
                pending: 'ëŒ€ê¸° ì¤‘',
                progress: 'ì§„í–‰ ì¤‘',
                completed: 'ì™„ë£Œë¨',
                
                // Project List
                projectList: 'í”„ë¡œì íŠ¸ ëª©ë¡',
                noProjects: 'ì•„ì§ í”„ë¡œì íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤. "í”„ë¡œì íŠ¸ ì¶”ê°€"ë¥¼ í´ë¦­í•˜ì—¬ ì‹œì‘í•˜ì„¸ìš”!',
                client: 'í´ë¼ì´ì–¸íŠ¸',
                platform: 'í”Œë«í¼',
                edit: 'âœï¸ í¸ì§‘',
                delete: 'ğŸ—‘ï¸ ì‚­ì œ',
                
                // Modal
                addNewProject: 'ìƒˆ í”„ë¡œì íŠ¸ ì¶”ê°€',
                editProject: 'í”„ë¡œì íŠ¸ í¸ì§‘',
                projectName: 'í”„ë¡œì íŠ¸ëª…',
                clientName: 'í´ë¼ì´ì–¸íŠ¸ëª…',
                selectPlatform: 'í”Œë«í¼ ì„ íƒ',
                description: 'ì„¤ëª…',
                startDate: 'ì‹œì‘ì¼',
                endDate: 'ì¢…ë£Œì¼',
                priority: 'ìš°ì„ ìˆœìœ„',
                status: 'ìƒíƒœ',
                projectPrice: 'í”„ë¡œì íŠ¸ ê°€ê²©',
                cancel: 'ì·¨ì†Œ',
                save: 'ì €ì¥',
                
                // Settings Modal
                displaySettings: 'âš™ï¸ í™”ë©´ ì„¤ì •',
                language: 'ğŸŒ ì–¸ì–´',
                selectLanguage: 'ì–¸ì–´ ì„ íƒ',
                header: 'ğŸ“ í—¤ë”',
                resetDefault: 'ğŸ”„ ê¸°ë³¸ê°’ìœ¼ë¡œ ì¬ì„¤ì •',
                
                // Platforms
                fiverr: 'Fiverr',
                upwork: 'Upwork',
                facebook: 'Facebook',
                tiktok: 'TikTok',
                instagram: 'Instagram',
                linkedin: 'LinkedIn',
                freelancer: 'Freelancer',
                directClient: 'ì§ì ‘ í´ë¼ì´ì–¸íŠ¸',
                referral: 'ì¶”ì²œ',
                other: 'ê¸°íƒ€',
                
                // Account Management
                accountManagement: 'ğŸ‘¥ ê³„ì • ê´€ë¦¬',
                accountInfo: 'ğŸ“Š í™œì„± ê³„ì • ì •ë³´',
                activeUsername: 'ğŸ‘¤ í™œì„± ì‚¬ìš©ìëª…',
                sessionType: 'ğŸ”’ ì„¸ì…˜ ìœ í˜•',
                totalRegisteredUsers: 'ğŸ“Š ì´ ë“±ë¡ ê³„ì • ìˆ˜',
                allAccountsList: 'ğŸ“‹ ëª¨ë“  ê³„ì • ëª©ë¡',
                updateCredentials: 'ğŸ” í™œì„± ê³„ì • ìê²© ì¦ëª… ì—…ë°ì´íŠ¸',
                newUsername: 'ìƒˆ ì‚¬ìš©ìëª…',
                newPassword: 'ìƒˆ ë¹„ë°€ë²ˆí˜¸',
                confirmPassword: 'ë¹„ë°€ë²ˆí˜¸ í™•ì¸',
                updateCredentialsBtn: 'ğŸ” ë¡œê·¸ì¸ ìê²© ì¦ëª… ì—…ë°ì´íŠ¸',
                onlyAdminAvailable: 'ê¸°ë³¸ ê´€ë¦¬ì ê³„ì •ë§Œ ì‚¬ìš© ê°€ëŠ¥',
                activeAccount: 'í™œì„±',
                createdOn: 'ìƒì„±ì¼',
                deleteAccount: 'ê³„ì • ì‚­ì œ',
                close: 'ë‹«ê¸°',
                
                // Invoice Features
                printReportInvoice: 'ğŸ–¨ï¸ ë³´ê³ ì„œ ë° ì†¡ì¥ ì¸ì‡„',
                printType: 'ì¸ì‡„ ìœ í˜•',
                projectReport: 'ğŸ“Š í”„ë¡œì íŠ¸ ë³´ê³ ì„œ',
                invoiceNote: 'ğŸ§¾ ì†¡ì¥/ì˜ìˆ˜ì¦',
                invoiceSettings: 'âš™ï¸ ì†¡ì¥ ì„¤ì •',
                selectProjectInvoice: 'ì†¡ì¥ìš© í”„ë¡œì íŠ¸ ì„ íƒ',
                selectProject: 'í”„ë¡œì íŠ¸ ì„ íƒ...',
                paperFormat: 'ìš©ì§€ í˜•ì‹',
                invoiceNumber: 'ì†¡ì¥ ë²ˆí˜¸',
                invoiceDate: 'ì†¡ì¥ ë‚ ì§œ',
                dueDate: 'ë§Œë£Œì¼',
                companyInfo: 'ğŸ¢ íšŒì‚¬ ì •ë³´',
                companyName: 'íšŒì‚¬ëª…',
                address: 'ì£¼ì†Œ',
                phone: 'ì „í™”ë²ˆí˜¸',
                email: 'ì´ë©”ì¼',
                website: 'ì›¹ì‚¬ì´íŠ¸',
                paymentOptions: 'ğŸ’° ê²°ì œ ì˜µì…˜',
                taxPPN: 'ì„¸ê¸ˆ (%)',
                discount: 'í• ì¸ (%)',
                additionalNotes: 'ì¶”ê°€ ë©”ëª¨',
                bankInfo: 'ì€í–‰ ê³„ì¢Œ ì •ë³´',
                printInvoice: 'ğŸ§¾ ì†¡ì¥ ì¸ì‡„',
                
                // Paper formats
                paperA4: 'ğŸ“„ A4 (210 x 297 mm)',
                paperA5: 'ğŸ“„ A5 (148 x 210 mm)',
                paperA6: 'ğŸ“„ A6 (105 x 148 mm)',
                paperLetter: 'ğŸ“„ Letter (216 x 279 mm)',
                paperLegal: 'ğŸ“„ Legal (216 x 356 mm)',
                paperReceipt: 'ğŸ§¾ Receipt (80mm)',
                
                // Validation messages
                allFieldsRequired: 'ëª¨ë“  í•„ë“œë¥¼ ì…ë ¥í•´ì•¼ í•©ë‹ˆë‹¤!',
                usernameMinLength: 'ì‚¬ìš©ìëª…ì€ ìµœì†Œ 3ìì…ë‹ˆë‹¤!',
                passwordMinLength: 'ë¹„ë°€ë²ˆí˜¸ëŠ” ìµœì†Œ 6ìì…ë‹ˆë‹¤!',
                passwordMismatch: 'ë¹„ë°€ë²ˆí˜¸ í™•ì¸ì´ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤!',
                confirmUpdateCredentials: 'ë¡œê·¸ì¸ ìê²© ì¦ëª…ì„ ë³€ê²½í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n\nìƒˆ ì‚¬ìš©ìëª…ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ê¸°ì–µí•´ ë‘ì„¸ìš”!',
                credentialsUpdated: 'ìê²© ì¦ëª…ì´ ì„±ê³µì ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤!\n\në‹¤ìŒ ë¡œê·¸ì¸ ì‹œ ìƒˆ ì‚¬ìš©ìëª…ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.',
                confirmDeleteAccount: 'ê³„ì •ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ',
                accountDeleted: 'ì„±ê³µì ìœ¼ë¡œ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤!',
                selectProjectFirst: 'ë¨¼ì € ì†¡ì¥ìš© í”„ë¡œì íŠ¸ë¥¼ ì„ íƒí•˜ì„¸ìš”!',
                projectNotFound: 'í”„ë¡œì íŠ¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤!',
                
                // Welcome message
                welcomeGreeting: 'ì•ˆë…•í•˜ì„¸ìš”',
                welcomeMessage: 'ë‹¤ì‹œ ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤!',
                
                // Messages
                deleteConfirm: 'ì´ í”„ë¡œì íŠ¸ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?',
                resetConfirm: 'ëª¨ë“  ì„¤ì •ì„ ê¸°ë³¸ê°’ìœ¼ë¡œ ì¬ì„¤ì •í•˜ì‹œê² ìŠµë‹ˆê¹Œ?',
                noDataExport: 'ë‚´ë³´ë‚¼ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤!',
                noMatchingProjects: 'í˜„ì¬ í•„í„°ì™€ ì¼ì¹˜í•˜ëŠ” í”„ë¡œì íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤.',
                dashboardStats: 'ğŸ“Š ëŒ€ì‹œë³´ë“œ í†µê³„',
                
                // Print translations
                printReport: 'ğŸ–¨ï¸ ë³´ê³ ì„œ ì¸ì‡„',
                reportType: 'ë³´ê³ ì„œ ìœ í˜•',
                allProjects: 'ëª¨ë“  í”„ë¡œì íŠ¸',
                completedOnly: 'ì™„ë£Œëœ ê²ƒë§Œ',
                pendingOnly: 'ëŒ€ê¸° ì¤‘ì¸ ê²ƒë§Œ',
                progressOnly: 'ì§„í–‰ ì¤‘ì¸ ê²ƒë§Œ',
                highPriorityOnly: 'ë†’ì€ ìš°ì„ ìˆœìœ„ë§Œ',
                printOptions: 'ì¸ì‡„ ì˜µì…˜',
                includeStatistics: 'í†µê³„ í¬í•¨',
                includeDescriptions: 'ì„¤ëª… í¬í•¨',
                includePrices: 'ê°€ê²© í¬í•¨',
                print: 'ğŸ–¨ï¸ ì¸ì‡„',
                saveAsPDF: 'ğŸ“„ PDF ì €ì¥',
                saveAsPNG: 'ğŸ–¼ï¸ PNG ì €ì¥',
                editInvoice: 'âœï¸ ì†¡ì¥ í¸ì§‘',
                
                // Invoice Editor
                editInvoiceTitle: 'âœï¸ ì†¡ì¥/ì˜ìˆ˜ì¦ í¸ì§‘',
                editorPanel: 'ğŸ¨ í¸ì§‘ê¸°',
                companyLogo: 'ğŸ¢ íšŒì‚¬ ë¡œê³ ',
                uploadLogo: 'ğŸ“ ë¡œê³  ì—…ë¡œë“œ',
                invoiceTitleLabel: 'ğŸ“ ì†¡ì¥ ì œëª©',
                headerColor: 'ğŸ¨ í—¤ë” ìƒ‰ìƒ',
                companyInfoEditor: 'ğŸ¢ íšŒì‚¬ ì •ë³´',
                companyNamePlaceholder: 'íšŒì‚¬ëª…',
                companyAddressPlaceholder: 'íšŒì‚¬ ì£¼ì†Œ',
                phonePlaceholder: 'ì „í™”ë²ˆí˜¸',
                emailPlaceholder: 'ì´ë©”ì¼',
                signature: 'âœï¸ ì„œëª…',
                uploadSignature: 'ğŸ“ ì„œëª… ì—…ë¡œë“œ',
                signerNamePlaceholder: 'ì„œëª…ì ì´ë¦„',
                signerTitlePlaceholder: 'ì§ì±…',
                footerLabel: 'ğŸ“„ í‘¸í„°',
                footerPlaceholder: 'ì‹ ë¢°í•´ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤!',
                previewPanel: 'ğŸ‘ï¸ ë¯¸ë¦¬ë³´ê¸°',
                printBtn: 'ğŸ–¨ï¸ ì¸ì‡„',
                pdfBtn: 'ğŸ“„ PDF',
                pngBtn: 'ğŸ–¼ï¸ PNG',
                saveTemplate: 'ğŸ’¾ í…œí”Œë¦¿ ì €ì¥'
            },
            es: {
                // Login Screen
                welcomeTitle: 'Bienvenido',
                welcomeSubtitle: 'Iniciar sesiÃ³n en el Planificador de Trabajo Mensual',
                loginTab: 'ğŸ”‘ Iniciar SesiÃ³n',
                registerTab: 'ğŸ“ Registrarse',
                defaultCredentials: 'Credenciales por defecto:',
                username: 'Nombre de usuario',
                password: 'ContraseÃ±a',
                usernameLabel: 'ğŸ‘¤ Nombre de usuario',
                passwordLabel: 'ğŸ”‘ ContraseÃ±a',
                usernamePlaceholder: 'Ingrese nombre de usuario',
                passwordPlaceholder: 'Ingrese contraseÃ±a',
                rememberMe: 'ğŸ’¾ Recordarme',
                loginError: 'Â¡Nombre de usuario o contraseÃ±a incorrectos!',
                loginButton: 'ğŸš€ Iniciar sesiÃ³n al Panel',
                loginLoading: 'â³ Procesando...',
                createNewAccount: 'Crear nueva cuenta:',
                registerDescription: 'Registre su cuenta para usar la aplicaciÃ³n de planificador de trabajo',
                dataSecurityNote: 'ğŸ”’ Sus datos estÃ¡n seguros y almacenados localmente en el navegador',
                
                // Header
                title: 'ğŸ“… Planificador de Trabajo Mensual',
                subtitle: 'Gestione sus proyectos y tareas con facilidad',
                settings: 'âš™ï¸ ConfiguraciÃ³n',
                exportExcel: 'ğŸ“Š Exportar a Excel',
                addProject: 'â• Agregar Proyecto',
                
                // Stats
                totalProjects: 'Total de Proyectos',
                highPriority: 'Alta Prioridad',
                completed: 'Completados',
                totalValue: 'Valor Total',
                
                // Filters
                searchPlaceholder: 'ğŸ” Buscar proyectos...',
                allPriorities: 'Todas las Prioridades',
                allStatuses: 'Todos los Estados',
                high: 'Alta',
                medium: 'Media',
                low: 'Baja',
                pending: 'Pendiente',
                progress: 'En Progreso',
                completed: 'Completado',
                
                // Project List
                projectList: 'Lista de Proyectos',
                noProjects: 'AÃºn no hay proyectos. Â¡Haga clic en "Agregar Proyecto" para comenzar!',
                client: 'Cliente',
                platform: 'Plataforma',
                edit: 'âœï¸ Editar',
                delete: 'ğŸ—‘ï¸ Eliminar',
                
                // Modal
                addNewProject: 'Agregar Nuevo Proyecto',
                editProject: 'Editar Proyecto',
                projectName: 'Nombre del Proyecto',
                clientName: 'Nombre del Cliente',
                selectPlatform: 'Seleccionar Plataforma',
                description: 'DescripciÃ³n',
                startDate: 'Fecha de Inicio',
                endDate: 'Fecha de FinalizaciÃ³n',
                priority: 'Prioridad',
                status: 'Estado',
                projectPrice: 'Precio del Proyecto',
                cancel: 'Cancelar',
                save: 'Guardar',
                
                // Settings Modal
                displaySettings: 'âš™ï¸ ConfiguraciÃ³n de Pantalla',
                language: 'ğŸŒ Idioma',
                selectLanguage: 'Seleccionar Idioma',
                header: 'ğŸ“ Encabezado',
                resetDefault: 'ğŸ”„ Restablecer por Defecto',
                
                // Platforms
                fiverr: 'Fiverr',
                upwork: 'Upwork',
                facebook: 'Facebook',
                tiktok: 'TikTok',
                instagram: 'Instagram',
                linkedin: 'LinkedIn',
                freelancer: 'Freelancer',
                directClient: 'Cliente Directo',
                referral: 'Referencia',
                other: 'Otro',
                
                // Account Management
                accountManagement: 'ğŸ‘¥ GestiÃ³n de Cuentas',
                accountInfo: 'ğŸ“Š InformaciÃ³n de Cuenta Activa',
                activeUsername: 'ğŸ‘¤ Nombre de Usuario Activo',
                sessionType: 'ğŸ”’ Tipo de SesiÃ³n',
                totalRegisteredUsers: 'ğŸ“Š Total de Cuentas Registradas',
                allAccountsList: 'ğŸ“‹ Lista de Todas las Cuentas',
                updateCredentials: 'ğŸ” Actualizar Credenciales de Cuenta Activa',
                newUsername: 'Nuevo Nombre de Usuario',
                newPassword: 'Nueva ContraseÃ±a',
                confirmPassword: 'Confirmar ContraseÃ±a',
                updateCredentialsBtn: 'ğŸ” Actualizar Credenciales de Acceso',
                onlyAdminAvailable: 'Solo cuenta de administrador por defecto disponible',
                activeAccount: 'Activa',
                createdOn: 'Creada',
                deleteAccount: 'Eliminar Cuenta',
                close: 'Cerrar',
                
                // Invoice Features
                printReportInvoice: 'ğŸ–¨ï¸ Imprimir Informe y Factura',
                printType: 'Tipo de ImpresiÃ³n',
                projectReport: 'ğŸ“Š Informe de Proyecto',
                invoiceNote: 'ğŸ§¾ Factura/Recibo',
                invoiceSettings: 'âš™ï¸ ConfiguraciÃ³n de Factura',
                selectProjectInvoice: 'Seleccionar Proyecto para Factura',
                selectProject: 'Seleccionar Proyecto...',
                paperFormat: 'Formato de Papel',
                invoiceNumber: 'NÃºmero de Factura',
                invoiceDate: 'Fecha de Factura',
                dueDate: 'Fecha de Vencimiento',
                companyInfo: 'ğŸ¢ InformaciÃ³n de la Empresa',
                companyName: 'Nombre de la Empresa',
                address: 'DirecciÃ³n',
                phone: 'TelÃ©fono',
                email: 'Correo ElectrÃ³nico',
                website: 'Sitio Web',
                paymentOptions: 'ğŸ’° Opciones de Pago',
                taxPPN: 'Impuesto (%)',
                discount: 'Descuento (%)',
                additionalNotes: 'Notas Adicionales',
                bankInfo: 'InformaciÃ³n de Cuenta Bancaria',
                printInvoice: 'ğŸ§¾ Imprimir Factura',
                
                // Paper formats
                paperA4: 'ğŸ“„ A4 (210 x 297 mm)',
                paperA5: 'ğŸ“„ A5 (148 x 210 mm)',
                paperA6: 'ğŸ“„ A6 (105 x 148 mm)',
                paperLetter: 'ğŸ“„ Letter (216 x 279 mm)',
                paperLegal: 'ğŸ“„ Legal (216 x 356 mm)',
                paperReceipt: 'ğŸ§¾ Receipt (80mm)',
                
                // Validation messages
                allFieldsRequired: 'Â¡Todos los campos deben ser completados!',
                usernameMinLength: 'Â¡El nombre de usuario debe tener mÃ­nimo 3 caracteres!',
                passwordMinLength: 'Â¡La contraseÃ±a debe tener mÃ­nimo 6 caracteres!',
                passwordMismatch: 'Â¡La confirmaciÃ³n de contraseÃ±a no coincide!',
                confirmUpdateCredentials: 'Â¿EstÃ¡ seguro de que desea cambiar las credenciales de acceso?\n\nÂ¡AsegÃºrese de recordar el nuevo nombre de usuario y contraseÃ±a!',
                credentialsUpdated: 'Â¡Credenciales actualizadas exitosamente!\n\nUse el nuevo nombre de usuario y contraseÃ±a para el prÃ³ximo acceso.',
                confirmDeleteAccount: 'Â¿EstÃ¡ seguro de que desea eliminar la cuenta',
                accountDeleted: 'eliminada exitosamente!',
                selectProjectFirst: 'Â¡Por favor seleccione un proyecto para la factura primero!',
                projectNotFound: 'Â¡Proyecto no encontrado!',
                
                // Welcome message
                welcomeGreeting: 'Hola',
                welcomeMessage: 'Â¡bienvenido de nuevo!',
                
                // Messages
                deleteConfirm: 'Â¿EstÃ¡ seguro de que desea eliminar este proyecto?',
                resetConfirm: 'Â¿EstÃ¡ seguro de que desea restablecer toda la configuraciÃ³n por defecto?',
                noDataExport: 'Â¡No hay datos para exportar!',
                noMatchingProjects: 'No hay proyectos que coincidan con el filtro actual.',
                dashboardStats: 'ğŸ“Š EstadÃ­sticas del Panel',
                
                // Print translations
                printReport: 'ğŸ–¨ï¸ Imprimir Informe',
                reportType: 'Tipo de Informe',
                allProjects: 'Todos los Proyectos',
                completedOnly: 'Solo Completados',
                pendingOnly: 'Solo Pendientes',
                progressOnly: 'Solo en Progreso',
                highPriorityOnly: 'Solo Alta Prioridad',
                printOptions: 'Opciones de ImpresiÃ³n',
                includeStatistics: 'Incluir EstadÃ­sticas',
                includeDescriptions: 'Incluir Descripciones',
                includePrices: 'Incluir Precios',
                print: 'ğŸ–¨ï¸ Imprimir',
                saveAsPDF: 'ğŸ“„ Guardar PDF',
                saveAsPNG: 'ğŸ–¼ï¸ Guardar PNG',
                editInvoice: 'âœï¸ Editar Factura',
                
                // Invoice Editor
                editInvoiceTitle: 'âœï¸ Editar Factura/Recibo',
                editorPanel: 'ğŸ¨ Editor',
                companyLogo: 'ğŸ¢ Logo de la Empresa',
                uploadLogo: 'ğŸ“ Subir Logo',
                invoiceTitleLabel: 'ğŸ“ TÃ­tulo de la Factura',
                headerColor: 'ğŸ¨ Color del Encabezado',
                companyInfoEditor: 'ğŸ¢ InformaciÃ³n de la Empresa',
                companyNamePlaceholder: 'Nombre de la Empresa',
                companyAddressPlaceholder: 'DirecciÃ³n de la Empresa',
                phonePlaceholder: 'TelÃ©fono',
                emailPlaceholder: 'Correo ElectrÃ³nico',
                signature: 'âœï¸ Firma',
                uploadSignature: 'ğŸ“ Subir Firma',
                signerNamePlaceholder: 'Nombre del Firmante',
                signerTitlePlaceholder: 'Cargo',
                footerLabel: 'ğŸ“„ Pie de PÃ¡gina',
                footerPlaceholder: 'Â¡Gracias por su confianza!',
                previewPanel: 'ğŸ‘ï¸ Vista Previa',
                printBtn: 'ğŸ–¨ï¸ Imprimir',
                pdfBtn: 'ğŸ“„ PDF',
                pngBtn: 'ğŸ–¼ï¸ PNG',
                saveTemplate: 'ğŸ’¾ Guardar Plantilla'
            }
        };

        // Current language
        let currentLanguage = localStorage.getItem('plannerLanguage') || 'id';

        // Default settings
        const defaultSettings = {
            title: 'ğŸ“… Planner Pekerjaan Bulanan',
            stat1Label: 'Total Proyek',
            stat1Icon: 'ğŸ“‹',
            stat2Label: 'Prioritas Tinggi',
            stat2Icon: 'ğŸ”¥',
            stat3Label: 'Selesai',
            stat3Icon: 'âœ…',
            stat4Label: 'Total Nilai',
            stat4Icon: 'ğŸ’°',
            language: 'id'
        };

        // Translation function
        function t(key) {
            return translations[currentLanguage][key] || translations['id'][key] || key;
        }

        // Authentication functions
        function checkAuthentication() {
            // Check if user is remembered (permanent login)
            const rememberedUser = localStorage.getItem('rememberedUser');
            if (rememberedUser) {
                currentUser = rememberedUser;
                isAuthenticated = true;
                showMainApp();
                return;
            }
            
            // Check if user has active session (temporary login)
            const sessionUser = sessionStorage.getItem('currentUser');
            if (sessionUser) {
                currentUser = sessionUser;
                isAuthenticated = true;
                showMainApp();
                return;
            }
            
            // No authentication found, show login
            showLoginScreen();
        }

        function showLoginScreen() {
            document.getElementById('loginScreen').classList.remove('hidden');
            document.getElementById('mainApp').classList.add('hidden');
        }

        function showMainApp() {
            document.getElementById('loginScreen').classList.add('hidden');
            document.getElementById('mainApp').classList.remove('hidden');
            updateUserInfo();
            loadCustomSettings();
            renderProjects();
            updateStats();
            updateClock();
            
            // Show super admin button if logged in as super admin
            if (currentUser === SUPER_ADMIN.username) {
                document.getElementById('superAdminBtn').classList.remove('hidden');
            } else {
                document.getElementById('superAdminBtn').classList.add('hidden');
            }
        }

        function toggleLoginPasswordVisibility() {
            const passwordInput = document.getElementById('loginPassword');
            const toggleIcon = document.getElementById('loginPasswordToggleIcon');
            
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                toggleIcon.textContent = 'ğŸ™ˆ';
            } else {
                passwordInput.type = 'password';
                toggleIcon.textContent = 'ğŸ‘ï¸';
            }
        }

        // Form toggle functions
        function showLoginForm() {
            document.getElementById('loginFormContainer').classList.remove('hidden');
            document.getElementById('registerFormContainer').classList.add('hidden');
            document.getElementById('loginTab').classList.add('bg-white/60', 'text-blue-700', 'shadow-sm');
            document.getElementById('loginTab').classList.remove('text-gray-600');
            document.getElementById('registerTab').classList.remove('bg-white/60', 'text-blue-700', 'shadow-sm');
            document.getElementById('registerTab').classList.add('text-gray-600');
            
            // Clear any error messages
            document.getElementById('loginError').classList.add('hidden');
            document.getElementById('registerError').classList.add('hidden');
            document.getElementById('registerSuccess').classList.add('hidden');
        }

        function showRegisterForm() {
            document.getElementById('loginFormContainer').classList.add('hidden');
            document.getElementById('registerFormContainer').classList.remove('hidden');
            document.getElementById('registerTab').classList.add('bg-white/60', 'text-green-700', 'shadow-sm');
            document.getElementById('registerTab').classList.remove('text-gray-600');
            document.getElementById('loginTab').classList.remove('bg-white/60', 'text-blue-700', 'shadow-sm');
            document.getElementById('loginTab').classList.add('text-gray-600');
            
            // Clear any error messages
            document.getElementById('loginError').classList.add('hidden');
            document.getElementById('registerError').classList.add('hidden');
            document.getElementById('registerSuccess').classList.add('hidden');
        }

        // Password visibility toggles for register form
        function toggleRegisterPasswordVisibility() {
            const passwordInput = document.getElementById('registerPassword');
            const toggleIcon = document.getElementById('registerPasswordToggleIcon');
            
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                toggleIcon.textContent = 'ğŸ™ˆ';
            } else {
                passwordInput.type = 'password';
                toggleIcon.textContent = 'ğŸ‘ï¸';
            }
        }

        function toggleRegisterConfirmPasswordVisibility() {
            const passwordInput = document.getElementById('registerConfirmPassword');
            const toggleIcon = document.getElementById('registerConfirmPasswordToggleIcon');
            
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                toggleIcon.textContent = 'ğŸ™ˆ';
            } else {
                passwordInput.type = 'password';
                toggleIcon.textContent = 'ğŸ‘ï¸';
            }
        }

        function login(username, password, remember = false) {
            // Check super admin credentials first
            if (username === SUPER_ADMIN.username && password === SUPER_ADMIN.password) {
                currentUser = username;
                isAuthenticated = true;
                
                if (remember) {
                    localStorage.setItem('rememberedUser', username);
                } else {
                    sessionStorage.setItem('currentUser', username);
                }
                
                // Track super admin login
                trackUserActivity('SUPER_ADMIN_LOGIN', { 
                    timestamp: new Date().toISOString(),
                    userAgent: navigator.userAgent 
                });
                
                showMainApp();
                return true;
            }
            
            // Check default admin credentials
            if (username === userCredentials.username && password === userCredentials.password) {
                currentUser = username;
                isAuthenticated = true;
                
                if (remember) {
                    localStorage.setItem('rememberedUser', username);
                } else {
                    sessionStorage.setItem('currentUser', username);
                }
                
                // Track admin login
                trackUserActivity('ADMIN_LOGIN', { timestamp: new Date().toISOString() });
                updateUserStats();
                
                showMainApp();
                return true;
            }
            
            // Check registered user accounts
            const userAccount = userAccounts.find(account => 
                account.username === username && password === password
            );
            
            if (userAccount) {
                currentUser = username;
                isAuthenticated = true;
                
                if (remember) {
                    localStorage.setItem('rememberedUser', username);
                } else {
                    sessionStorage.setItem('currentUser', username);
                }
                
                // Track user login
                trackUserActivity('USER_LOGIN', { 
                    timestamp: new Date().toISOString(),
                    email: userAccount.email 
                });
                updateUserStats();
                
                showMainApp();
                return true;
            }
            
            return false;
        }

        function logout() {
            if (confirm('ğŸšª Apakah Anda yakin ingin keluar?')) {
                // Clear all authentication data
                localStorage.removeItem('rememberedUser');
                sessionStorage.removeItem('currentUser');
                currentUser = null;
                isAuthenticated = false;
                
                // Show login screen
                showLoginScreen();
                
                // Clear login form
                document.getElementById('loginForm').reset();
                document.getElementById('loginError').classList.add('hidden');
            }
        }

        function updateUserInfo() {
            const userDisplays = document.querySelectorAll('#currentUserDisplay, #currentUserDisplay2');
            userDisplays.forEach(display => {
                display.textContent = currentUser || '-';
            });
            
            // Update username in subtitle
            const usernameInSubtitle = document.getElementById('usernameInSubtitle');
            if (usernameInSubtitle) {
                usernameInSubtitle.textContent = currentUser || '-';
            }
            
            const sessionType = localStorage.getItem('rememberedUser') ? 'Permanen (Diingat)' : 'Sementara (Sesi)';
            const sessionDisplays = document.querySelectorAll('#sessionTypeDisplay, #sessionType');
            sessionDisplays.forEach(display => {
                display.textContent = sessionType;
            });
        }

        // Registration function
        function registerUser(username, email, password, confirmPassword) {
            // Validation
            if (!username || !password || !confirmPassword) {
                return { success: false, message: 'Semua field wajib harus diisi!' };
            }
            
            if (username.length < 3) {
                return { success: false, message: 'Username minimal 3 karakter!' };
            }
            
            if (password.length < 6) {
                return { success: false, message: 'Password minimal 6 karakter!' };
            }
            
            if (password !== confirmPassword) {
                return { success: false, message: 'Konfirmasi password tidak cocok!' };
            }
            
            // Check if username already exists (including default admin)
            if (username === userCredentials.username) {
                return { success: false, message: 'Username sudah digunakan! Pilih username lain.' };
            }
            
            const existingUser = userAccounts.find(account => account.username === username);
            if (existingUser) {
                return { success: false, message: 'Username sudah digunakan! Pilih username lain.' };
            }
            
            // Check if email already exists (if provided)
            if (email) {
                const existingEmail = userAccounts.find(account => account.email === email);
                if (existingEmail) {
                    return { success: false, message: 'Email sudah terdaftar! Gunakan email lain.' };
                }
            }
            
            // Create new user account
            const newUser = {
                id: Date.now(),
                username: username,
                email: email || '',
                password: password,
                createdAt: new Date().toISOString(),
                lastLogin: null
            };
            
            userAccounts.push(newUser);
            localStorage.setItem('userAccounts', JSON.stringify(userAccounts));
            
            return { success: true, message: 'Akun berhasil dibuat!' };
        }

        // Login form handler
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize language selector
            const loginLanguageSelect = document.getElementById('loginLanguageSelect');
            if (loginLanguageSelect) {
                loginLanguageSelect.value = currentLanguage;
            }
            
            // Update translations on page load
            updateTranslations();
            
            // Check authentication on page load
            checkAuthentication();
            
            // Login form event listener
            document.getElementById('loginForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const username = document.getElementById('loginUsername').value.trim();
                const password = document.getElementById('loginPassword').value;
                const remember = document.getElementById('rememberMe').checked;
                
                // Show loading state
                const button = document.getElementById('loginButton');
                const buttonText = document.getElementById('loginButtonText');
                const buttonLoading = document.getElementById('loginButtonLoading');
                
                button.disabled = true;
                buttonText.classList.add('hidden');
                buttonLoading.classList.remove('hidden');
                
                // Simulate loading delay
                setTimeout(() => {
                    if (login(username, password, remember)) {
                        // Success - form will be hidden by showMainApp()
                        document.getElementById('loginError').classList.add('hidden');
                    } else {
                        // Failed login
                        document.getElementById('loginError').classList.remove('hidden');
                        
                        // Shake animation
                        const loginCard = document.querySelector('.login-card');
                        loginCard.classList.add('shake');
                        setTimeout(() => {
                            loginCard.classList.remove('shake');
                        }, 500);
                    }
                    
                    // Reset button state
                    button.disabled = false;
                    buttonText.classList.remove('hidden');
                    buttonLoading.classList.add('hidden');
                }, 1000);
            });
            
            // Register form event listener
            document.getElementById('registerForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const username = document.getElementById('registerUsername').value.trim();
                const email = document.getElementById('registerEmail').value.trim();
                const password = document.getElementById('registerPassword').value;
                const confirmPassword = document.getElementById('registerConfirmPassword').value;
                
                // Show loading state
                const button = document.getElementById('registerButton');
                const buttonText = document.getElementById('registerButtonText');
                const buttonLoading = document.getElementById('registerButtonLoading');
                
                button.disabled = true;
                buttonText.classList.add('hidden');
                buttonLoading.classList.remove('hidden');
                
                // Hide previous messages
                document.getElementById('registerError').classList.add('hidden');
                document.getElementById('registerSuccess').classList.add('hidden');
                
                // Simulate loading delay
                setTimeout(() => {
                    const result = registerUser(username, email, password, confirmPassword);
                    
                    if (result.success) {
                        // Success
                        document.getElementById('registerSuccess').classList.remove('hidden');
                        document.getElementById('registerForm').reset();
                        
                        // Auto switch to login form after 2 seconds
                        setTimeout(() => {
                            showLoginForm();
                            // Pre-fill username in login form
                            document.getElementById('loginUsername').value = username;
                        }, 2000);
                    } else {
                        // Error
                        document.getElementById('registerErrorMessage').textContent = result.message;
                        document.getElementById('registerError').classList.remove('hidden');
                        
                        // Shake animation
                        const loginCard = document.querySelector('.login-card');
                        loginCard.classList.add('shake');
                        setTimeout(() => {
                            loginCard.classList.remove('shake');
                        }, 500);
                    }
                    
                    // Reset button state
                    button.disabled = false;
                    buttonText.classList.remove('hidden');
                    buttonLoading.classList.add('hidden');
                }, 1500);
            });
            
            // Other event listeners
            if (document.getElementById('searchInput')) {
                document.getElementById('searchInput').addEventListener('input', filterProjects);
                document.getElementById('priorityFilter').addEventListener('change', filterProjects);
                document.getElementById('statusFilter').addEventListener('change', filterProjects);
                document.getElementById('projectForm').addEventListener('submit', saveProject);
            }
        });

        // Credential management functions
        function toggleNewPasswordVisibility() {
            const passwordInput = document.getElementById('newPassword');
            const toggleIcon = document.getElementById('newPasswordToggleIcon');
            
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                toggleIcon.textContent = 'ğŸ™ˆ';
            } else {
                passwordInput.type = 'password';
                toggleIcon.textContent = 'ğŸ‘ï¸';
            }
        }

        function toggleConfirmPasswordVisibility() {
            const passwordInput = document.getElementById('confirmPassword');
            const toggleIcon = document.getElementById('confirmPasswordToggleIcon');
            
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                toggleIcon.textContent = 'ğŸ™ˆ';
            } else {
                passwordInput.type = 'password';
                toggleIcon.textContent = 'ğŸ‘ï¸';
            }
        }

        function updateCredentials() {
            const newUsername = document.getElementById('newUsername').value.trim();
            const newPassword = document.getElementById('newPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            
            // Validation
            if (!newUsername || !newPassword || !confirmPassword) {
                alert('âŒ ' + t('allFieldsRequired'));
                return;
            }
            
            if (newUsername.length < 3) {
                alert('âŒ ' + t('usernameMinLength'));
                return;
            }
            
            if (newPassword.length < 6) {
                alert('âŒ ' + t('passwordMinLength'));
                return;
            }
            
            if (newPassword !== confirmPassword) {
                alert('âŒ ' + t('passwordMismatch'));
                return;
            }
            
            if (confirm('ğŸ” ' + t('confirmUpdateCredentials'))) {
                // Update credentials
                userCredentials = {
                    username: newUsername,
                    password: newPassword
                };
                
                localStorage.setItem('userCredentials', JSON.stringify(userCredentials));
                
                // Update current user if username changed
                if (currentUser !== newUsername) {
                    currentUser = newUsername;
                    
                    // Update stored authentication
                    if (localStorage.getItem('rememberedUser')) {
                        localStorage.setItem('rememberedUser', newUsername);
                    }
                    if (sessionStorage.getItem('currentUser')) {
                        sessionStorage.setItem('currentUser', newUsername);
                    }
                }
                
                // Clear form
                document.getElementById('newUsername').value = '';
                document.getElementById('newPassword').value = '';
                document.getElementById('confirmPassword').value = '';
                
                // Update display
                updateUserInfo();
                
                alert('âœ… ' + t('credentialsUpdated'));
            }
        }

        // Change language function
        function changeLanguage(lang) {
            currentLanguage = lang;
            localStorage.setItem('plannerLanguage', lang);
            customSettings.language = lang;
            localStorage.setItem('plannerSettings', JSON.stringify(customSettings));
            
            // Update all translatable elements
            updateTranslations();
            
            // Re-render projects to update their content
            renderProjects();
            updateStats();
        }

        // Change language function for login screen
        function changeLanguageLogin(lang) {
            currentLanguage = lang;
            localStorage.setItem('plannerLanguage', lang);
            
            // Update all translatable elements
            updateTranslations();
        }

        // Update all translations
        function updateTranslations() {
            // Update elements with data-translate attribute
            document.querySelectorAll('[data-translate]').forEach(element => {
                const key = element.getAttribute('data-translate');
                element.textContent = t(key);
            });
            
            // Update placeholder texts
            document.querySelectorAll('[data-translate-placeholder]').forEach(element => {
                const key = element.getAttribute('data-translate-placeholder');
                element.placeholder = t(key);
            });
            
            // Update select options
            document.querySelectorAll('option[data-translate]').forEach(option => {
                const key = option.getAttribute('data-translate');
                const originalText = option.textContent;
                const iconMatch = originalText.match(/^[ğŸŸ¢ğŸ”µâš«ğŸŸ£ğŸŸ ğŸ’¼ğŸ¤ğŸ“±]/);
                const icon = iconMatch ? iconMatch[0] + ' ' : '';
                option.textContent = icon + t(key).replace(/^[ğŸŸ¢ğŸ”µâš«ğŸŸ£ğŸŸ ğŸ’¼ğŸ¤ğŸ“±]\s*/, '');
            });
        }

        // Clock function
        function updateClock() {
            const now = new Date();
            
            // Format time (24-hour format)
            const timeOptions = {
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit',
                hour12: false,
                timeZone: 'Asia/Jakarta'
            };
            
            // Format date
            const dateOptions = {
                weekday: 'long',
                year: 'numeric',
                month: 'long',
                day: 'numeric',
                timeZone: 'Asia/Jakarta'
            };
            
            const timeString = now.toLocaleTimeString('id-ID', timeOptions);
            const dateString = now.toLocaleDateString('id-ID', dateOptions);
            
            const timeElement = document.getElementById('currentTime');
            const dateElement = document.getElementById('currentDate');
            
            if (timeElement) timeElement.textContent = timeString;
            if (dateElement) dateElement.textContent = dateString;
            
            // Update every second
            setTimeout(updateClock, 1000);
        }

        // Load and apply custom settings
        function loadCustomSettings() {
            const settings = { ...defaultSettings, ...customSettings };
            
            const titleElement = document.getElementById('mainTitle');
            
            if (titleElement) titleElement.textContent = settings.title;
            
            // Load stat labels and icons
            for (let i = 1; i <= 4; i++) {
                const labelElement = document.getElementById(`stat${i}Label`);
                const iconElement = document.getElementById(`stat${i}Icon`);
                
                if (labelElement) labelElement.textContent = settings[`stat${i}Label`];
                if (iconElement) iconElement.textContent = settings[`stat${i}Icon`];
            }
        }

        // Quick edit functions
        function editTitle() {
            const currentText = document.getElementById('mainTitle').textContent;
            const newText = prompt('Edit judul:', currentText);
            if (newText && newText.trim()) {
                document.getElementById('mainTitle').textContent = newText.trim();
                customSettings.title = newText.trim();
                localStorage.setItem('plannerSettings', JSON.stringify(customSettings));
            }
        }



        function editStatLabel(statNumber) {
            const currentText = document.getElementById(`stat${statNumber}Label`).textContent;
            const newText = prompt(`Edit label kartu ${statNumber}:`, currentText);
            if (newText && newText.trim()) {
                document.getElementById(`stat${statNumber}Label`).textContent = newText.trim();
                customSettings[`stat${statNumber}Label`] = newText.trim();
                localStorage.setItem('plannerSettings', JSON.stringify(customSettings));
            }
        }

        function editStatIcon(statNumber) {
            const currentIcon = document.getElementById(`stat${statNumber}Icon`).textContent;
            const newIcon = prompt(`Edit icon kartu ${statNumber} (gunakan emoji):`, currentIcon);
            if (newIcon && newIcon.trim()) {
                document.getElementById(`stat${statNumber}Icon`).textContent = newIcon.trim();
                customSettings[`stat${statNumber}Icon`] = newIcon.trim();
                localStorage.setItem('plannerSettings', JSON.stringify(customSettings));
            }
        }

        // Account management functions
        function openAccountModal() {
            // Update user info
            updateUserInfo();
            
            // Display registered users
            displayRegisteredUsers();
            
            document.getElementById('accountModal').classList.remove('hidden');
            document.getElementById('accountModal').classList.add('flex');
        }

        function closeAccountModal() {
            document.getElementById('accountModal').classList.add('hidden');
            document.getElementById('accountModal').classList.remove('flex');
        }

        // Settings modal functions
        function displayRegisteredUsers() {
            const usersList = document.getElementById('registeredUsersList');
            const totalUsers = document.getElementById('totalRegisteredUsers');
            
            // Update total count (including default admin)
            totalUsers.textContent = userAccounts.length + 1;
            
            if (userAccounts.length === 0) {
                usersList.innerHTML = `
                    <div class="text-center text-gray-500 text-sm py-4">
                        <span class="text-2xl block mb-2">ğŸ‘¤</span>
                        ${t('onlyAdminAvailable')}
                    </div>
                `;
                return;
            }
            
            usersList.innerHTML = userAccounts.map(user => {
                const createdDate = new Date(user.createdAt).toLocaleDateString('id-ID');
                const isCurrentUser = user.username === currentUser;
                
                return `
                    <div class="bg-white/60 backdrop-blur-sm border border-white/50 rounded-lg p-3 ${isCurrentUser ? 'ring-2 ring-blue-400' : ''}">
                        <div class="flex items-center justify-between">
                            <div class="flex-1">
                                <div class="flex items-center gap-2">
                                    <span class="font-medium text-gray-800">${user.username}</span>
                                    ${isCurrentUser ? `<span class="text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full">${t('activeAccount')}</span>` : ''}
                                </div>
                                ${user.email ? `<div class="text-xs text-gray-600">ğŸ“§ ${user.email}</div>` : ''}
                                <div class="text-xs text-gray-500">ğŸ“… ${t('createdOn')}: ${createdDate}</div>
                            </div>
                            ${!isCurrentUser ? `
                                <button onclick="deleteUserAccount('${user.username}')" 
                                        class="text-red-600 hover:text-red-800 text-sm px-2 py-1 rounded hover:bg-red-50 transition-colors">
                                    ğŸ—‘ï¸
                                </button>
                            ` : ''}
                        </div>
                    </div>
                `;
            }).join('');
        }

        function deleteUserAccount(username) {
            if (confirm(`ğŸ—‘ï¸ ${t('confirmDeleteAccount')} "${username}"?\n\nTindakan ini tidak dapat dibatalkan!`)) {
                userAccounts = userAccounts.filter(account => account.username !== username);
                localStorage.setItem('userAccounts', JSON.stringify(userAccounts));
                displayRegisteredUsers();
                
                alert(`âœ… Akun "${username}" ${t('accountDeleted')}`);
            }
        }

        function openSettingsModal() {
            const settings = { ...defaultSettings, ...customSettings };
            
            // Load language setting
            document.getElementById('languageSelect').value = currentLanguage;
            
            document.getElementById('settingsTitle').value = settings.title;
            document.getElementById('settingsStat1Label').value = settings.stat1Label;
            document.getElementById('settingsStat1Icon').value = settings.stat1Icon;
            document.getElementById('settingsStat2Label').value = settings.stat2Label;
            document.getElementById('settingsStat2Icon').value = settings.stat2Icon;
            document.getElementById('settingsStat3Label').value = settings.stat3Label;
            document.getElementById('settingsStat3Icon').value = settings.stat3Icon;
            document.getElementById('settingsStat4Label').value = settings.stat4Label;
            document.getElementById('settingsStat4Icon').value = settings.stat4Icon;
            
            document.getElementById('settingsModal').classList.remove('hidden');
            document.getElementById('settingsModal').classList.add('flex');
        }

        function closeSettingsModal() {
            document.getElementById('settingsModal').classList.add('hidden');
            document.getElementById('settingsModal').classList.remove('flex');
        }

        function saveSettings() {
            customSettings = {
                title: document.getElementById('settingsTitle').value.trim() || defaultSettings.title,
                stat1Label: document.getElementById('settingsStat1Label').value.trim() || defaultSettings.stat1Label,
                stat1Icon: document.getElementById('settingsStat1Icon').value.trim() || defaultSettings.stat1Icon,
                stat2Label: document.getElementById('settingsStat2Label').value.trim() || defaultSettings.stat2Label,
                stat2Icon: document.getElementById('settingsStat2Icon').value.trim() || defaultSettings.stat2Icon,
                stat3Label: document.getElementById('settingsStat3Label').value.trim() || defaultSettings.stat3Label,
                stat3Icon: document.getElementById('settingsStat3Icon').value.trim() || defaultSettings.stat3Icon,
                stat4Label: document.getElementById('settingsStat4Label').value.trim() || defaultSettings.stat4Label,
                stat4Icon: document.getElementById('settingsStat4Icon').value.trim() || defaultSettings.stat4Icon,
                language: currentLanguage
            };
            
            localStorage.setItem('plannerSettings', JSON.stringify(customSettings));
            loadCustomSettings();
            closeSettingsModal();
        }

        function resetToDefault() {
            if (confirm(t('resetConfirm'))) {
                customSettings = {};
                localStorage.removeItem('plannerSettings');
                loadCustomSettings();
                
                // Update form fields
                document.getElementById('settingsTitle').value = defaultSettings.title;
                document.getElementById('settingsStat1Label').value = defaultSettings.stat1Label;
                document.getElementById('settingsStat1Icon').value = defaultSettings.stat1Icon;
                document.getElementById('settingsStat2Label').value = defaultSettings.stat2Label;
                document.getElementById('settingsStat2Icon').value = defaultSettings.stat2Icon;
                document.getElementById('settingsStat3Label').value = defaultSettings.stat3Label;
                document.getElementById('settingsStat3Icon').value = defaultSettings.stat3Icon;
                document.getElementById('settingsStat4Label').value = defaultSettings.stat4Label;
                document.getElementById('settingsStat4Icon').value = defaultSettings.stat4Icon;
            }
        }

        // Project management functions
        function openAddModal() {
            editingId = null;
            document.getElementById('modalTitle').textContent = t('addNewProject');
            document.getElementById('projectForm').reset();
            document.getElementById('projectModal').classList.remove('hidden');
            document.getElementById('projectModal').classList.add('flex');
        }

        function openEditModal(id) {
            editingId = id;
            const project = projects.find(p => p.id === id);
            if (!project) return;

            document.getElementById('modalTitle').textContent = t('editProject');
            document.getElementById('projectName').value = project.name;
            document.getElementById('clientName').value = project.clientName;
            document.getElementById('platform').value = project.platform || '';
            document.getElementById('projectDescription').value = project.description;
            document.getElementById('startDate').value = project.startDate;
            document.getElementById('endDate').value = project.endDate;
            document.getElementById('priority').value = project.priority;
            document.getElementById('status').value = project.status;
            document.getElementById('projectPrice').value = project.price || 0;
            
            document.getElementById('projectModal').classList.remove('hidden');
            document.getElementById('projectModal').classList.add('flex');
        }

        function closeModal() {
            document.getElementById('projectModal').classList.add('hidden');
            document.getElementById('projectModal').classList.remove('flex');
        }

        function saveProject(e) {
            e.preventDefault();
            
            const projectData = {
                id: editingId || Date.now(),
                name: document.getElementById('projectName').value,
                clientName: document.getElementById('clientName').value,
                platform: document.getElementById('platform').value,
                description: document.getElementById('projectDescription').value,
                startDate: document.getElementById('startDate').value,
                endDate: document.getElementById('endDate').value,
                priority: document.getElementById('priority').value,
                status: document.getElementById('status').value,
                price: parseFloat(document.getElementById('projectPrice').value) || 0,
                createdAt: editingId ? projects.find(p => p.id === editingId).createdAt : new Date().toISOString(),
                createdBy: currentUser // Track who created the project
            };

            if (editingId) {
                const index = projects.findIndex(p => p.id === editingId);
                projects[index] = projectData;
                
                // Track project update
                trackUserActivity('PROJECT_UPDATED', {
                    projectId: editingId,
                    projectName: projectData.name,
                    changes: 'Project details updated'
                });
            } else {
                projects.push(projectData);
                
                // Track project creation
                trackUserActivity('PROJECT_CREATED', {
                    projectId: projectData.id,
                    projectName: projectData.name,
                    clientName: projectData.clientName,
                    platform: projectData.platform
                });
                
                // Update user stats
                const stats = JSON.parse(localStorage.getItem('userStats') || '{}');
                if (stats[currentUser]) {
                    stats[currentUser].totalProjects++;
                    const today = new Date().toDateString();
                    if (stats[currentUser].dailyActivity[today]) {
                        stats[currentUser].dailyActivity[today].projectsCreated++;
                    }
                    localStorage.setItem('userStats', JSON.stringify(stats));
                }
            }

            localStorage.setItem('workPlanner', JSON.stringify(projects));
            renderProjects();
            updateStats();
            closeModal();
        }

        function toggleProjectStatus(id) {
            const project = projects.find(p => p.id === id);
            if (!project) return;
            
            // Toggle between completed and pending
            project.status = project.status === 'completed' ? 'pending' : 'completed';
            
            localStorage.setItem('workPlanner', JSON.stringify(projects));
            renderProjects();
            updateStats();
        }

        function deleteProject(id) {
            if (confirm(t('deleteConfirm'))) {
                projects = projects.filter(p => p.id !== id);
                localStorage.setItem('workPlanner', JSON.stringify(projects));
                renderProjects();
                updateStats();
            }
        }

        function renderProjects() {
            const container = document.getElementById('projectsList');
            if (!container) return;
            
            if (projects.length === 0) {
                container.innerHTML = `
                    <div class="p-8 text-center text-gray-500">
                        <span class="text-4xl mb-4 block">ğŸ“</span>
                        <p>${t('noProjects')}</p>
                    </div>
                `;
                return;
            }

            const sortedProjects = [...projects].sort((a, b) => {
                const priorityOrder = { high: 3, medium: 2, low: 1 };
                return priorityOrder[b.priority] - priorityOrder[a.priority];
            });

            container.innerHTML = sortedProjects.map(project => {
                const priorityColors = {
                    high: 'bg-red-100 text-red-800',
                    medium: 'bg-yellow-100 text-yellow-800',
                    low: 'bg-green-100 text-green-800'
                };

                const statusColors = {
                    pending: 'bg-gray-100 text-gray-800',
                    progress: 'bg-blue-100 text-blue-800',
                    completed: 'bg-green-100 text-green-800'
                };

                const priorityIcons = {
                    high: 'ğŸ”¥',
                    medium: 'âš¡',
                    low: 'ğŸ“'
                };

                const statusIcons = {
                    pending: 'â³',
                    progress: 'ğŸ”„',
                    completed: 'âœ…'
                };

                return `
                    <div class="p-6 priority-${project.priority} hover:bg-gray-50 transition-colors ${project.status === 'completed' ? 'bg-green-50' : ''}">
                        <div class="flex flex-col md:flex-row md:items-center justify-between gap-4">
                            <div class="flex items-start gap-4 flex-1">
                                <div class="flex items-center mt-1">
                                    <input type="checkbox" 
                                           ${project.status === 'completed' ? 'checked' : ''} 
                                           onchange="toggleProjectStatus(${project.id})"
                                           class="w-5 h-5 text-green-600 bg-gray-100 border-gray-300 rounded focus:ring-green-500 focus:ring-2 cursor-pointer">
                                </div>
                                <div class="flex-1">
                                    <div class="flex items-center gap-3 mb-2">
                                        <h3 class="text-lg font-semibold text-gray-800 ${project.status === 'completed' ? 'line-through text-gray-500' : ''}">${project.name}</h3>
                                        <span class="px-2 py-1 rounded-full text-xs font-medium ${priorityColors[project.priority]}">
                                            ${priorityIcons[project.priority]} ${t(project.priority)}
                                        </span>
                                        <span class="px-2 py-1 rounded-full text-xs font-medium ${statusColors[project.status]}">
                                            ${statusIcons[project.status]} ${t(project.status)}
                                        </span>
                                    </div>
                                    <p class="text-blue-600 font-medium mb-1 ${project.status === 'completed' ? 'text-gray-400' : ''}">ğŸ‘¤ ${t('client')}: ${project.clientName}</p>
                                    ${project.platform ? `<p class="text-purple-600 font-medium mb-1 ${project.status === 'completed' ? 'text-gray-400' : ''}">ğŸ“± ${t('platform')}: ${getPlatformDisplay(project.platform)}</p>` : ''}
                                    <p class="text-gray-600 mb-2 ${project.status === 'completed' ? 'text-gray-400' : ''}">${project.description}</p>
                                    <div class="flex flex-wrap gap-4 text-sm text-gray-500">
                                        <span>ğŸ“… ${formatDate(project.startDate)} - ${formatDate(project.endDate)}</span>
                                        <span class="font-semibold text-purple-600 ${project.status === 'completed' ? 'text-gray-400' : ''}">ğŸ’° ${formatCurrency(project.price)}</span>
                                    </div>
                                </div>
                            </div>
                            <div class="flex gap-2">
                                <button onclick="openEditModal(${project.id})" 
                                        class="px-4 py-2 glass-button text-blue-700 rounded-lg hover:bg-blue-500/20 transition-colors">
                                    ${t('edit')}
                                </button>
                                <button onclick="deleteProject(${project.id})" 
                                        class="px-4 py-2 glass-button text-red-700 rounded-lg hover:bg-red-500/20 transition-colors">
                                    ${t('delete')}
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function filterProjects() {
            const search = document.getElementById('searchInput').value.toLowerCase();
            const priorityFilter = document.getElementById('priorityFilter').value;
            const statusFilter = document.getElementById('statusFilter').value;

            let filtered = projects.filter(project => {
                const matchesSearch = project.name.toLowerCase().includes(search) || 
                                    project.description.toLowerCase().includes(search) ||
                                    project.clientName.toLowerCase().includes(search) ||
                                    (project.platform && project.platform.toLowerCase().includes(search));
                const matchesPriority = !priorityFilter || project.priority === priorityFilter;
                const matchesStatus = !statusFilter || project.status === statusFilter;
                
                return matchesSearch && matchesPriority && matchesStatus;
            });

            // Temporarily update the display
            const container = document.getElementById('projectsList');
            if (filtered.length === 0) {
                container.innerHTML = `
                    <div class="p-8 text-center text-gray-500">
                        <span class="text-4xl mb-4 block">ğŸ”</span>
                        <p>${t('noMatchingProjects')}</p>
                    </div>
                `;
                return;
            }

            // Use the same rendering logic but with filtered data
            const originalProjects = projects;
            projects = filtered;
            renderProjects();
            projects = originalProjects;
        }

        function updateStats() {
            const totalElement = document.getElementById('totalProjects');
            const highElement = document.getElementById('highPriority');
            const completedElement = document.getElementById('completedProjects');
            const valueElement = document.getElementById('totalValue');
            
            if (totalElement) totalElement.textContent = projects.length;
            if (highElement) highElement.textContent = projects.filter(p => p.priority === 'high').length;
            if (completedElement) completedElement.textContent = projects.filter(p => p.status === 'completed').length;
            
            const totalValue = projects.reduce((sum, project) => sum + (project.price || 0), 0);
            if (valueElement) valueElement.textContent = formatCurrency(totalValue);
        }

        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('id-ID', { 
                day: 'numeric', 
                month: 'short', 
                year: 'numeric' 
            });
        }

        function formatCurrency(amount) {
            return new Intl.NumberFormat('id-ID', {
                style: 'currency',
                currency: 'IDR',
                minimumFractionDigits: 0
            }).format(amount);
        }

        function getPlatformDisplay(platform) {
            const platformIcons = {
                'fiverr': 'ğŸŸ¢',
                'upwork': 'ğŸ”µ',
                'facebook': 'ğŸ”µ',
                'tiktok': 'âš«',
                'instagram': 'ğŸŸ£',
                'linkedin': 'ğŸ”µ',
                'freelancer': 'ğŸŸ ',
                'direct': 'ğŸ’¼',
                'referral': 'ğŸ¤',
                'other': 'ğŸ“±'
            };
            const icon = platformIcons[platform] || 'ğŸ“±';
            const translatedName = t(platform) || platform;
            return `${icon} ${translatedName.replace(/^[ğŸŸ¢ğŸ”µâš«ğŸŸ£ğŸŸ ğŸ’¼ğŸ¤ğŸ“±]\s*/, '')}`;
        }

        function exportToExcel() {
            if (projects.length === 0) {
                alert(t('noDataExport'));
                return;
            }

            const exportData = projects.map(project => ({
                'Nama Proyek': project.name,
                'Nama Client': project.clientName,
                'Platform': project.platform ? getPlatformDisplay(project.platform) : '-',
                'Deskripsi': project.description,
                'Tanggal Mulai': project.startDate,
                'Tanggal Selesai': project.endDate,
                'Prioritas': project.priority.charAt(0).toUpperCase() + project.priority.slice(1),
                'Status': project.status === 'progress' ? 'Dalam Proses' : project.status.charAt(0).toUpperCase() + project.status.slice(1),
                'Total Harga (Rp)': project.price || 0,
                'Dibuat': new Date(project.createdAt).toLocaleDateString('id-ID')
            }));

            const ws = XLSX.utils.json_to_sheet(exportData);
            const wb = XLSX.utils.book_new();
            XLSX.utils.book_append_sheet(wb, ws, 'Planner Pekerjaan');

            // Auto-fit column widths
            const colWidths = [];
            Object.keys(exportData[0]).forEach(key => {
                const maxLength = Math.max(
                    key.length,
                    ...exportData.map(row => String(row[key]).length)
                );
                colWidths.push({ wch: Math.min(maxLength + 2, 50) });
            });
            ws['!cols'] = colWidths;

            const fileName = `Planner_Pekerjaan_${new Date().toISOString().split('T')[0]}.xlsx`;
            XLSX.writeFile(wb, fileName);
        }

        // Print functions
        function openPrintModal() {
            // Load invoice settings from localStorage
            loadInvoiceSettings();
            
            // Populate project dropdown for invoice
            populateInvoiceProjects();
            
            // Set default dates
            const today = new Date().toISOString().split('T')[0];
            const dueDate = new Date();
            dueDate.setDate(dueDate.getDate() + 30);
            
            document.getElementById('invoiceDate').value = today;
            document.getElementById('invoiceDueDate').value = dueDate.toISOString().split('T')[0];
            
            // Generate invoice number
            const invoiceCount = parseInt(localStorage.getItem('invoiceCounter') || '0') + 1;
            document.getElementById('invoiceNumber').value = `INV-${String(invoiceCount).padStart(3, '0')}`;
            
            document.getElementById('printModal').classList.remove('hidden');
            document.getElementById('printModal').classList.add('flex');
        }

        function closePrintModal() {
            document.getElementById('printModal').classList.add('hidden');
            document.getElementById('printModal').classList.remove('flex');
        }

        function showReportPrint() {
            document.getElementById('reportPrintSection').classList.remove('hidden');
            document.getElementById('invoicePrintSection').classList.add('hidden');
            
            document.getElementById('reportPrintTab').classList.add('bg-white/60', 'text-blue-700', 'shadow-sm');
            document.getElementById('reportPrintTab').classList.remove('text-gray-600');
            document.getElementById('invoicePrintTab').classList.remove('bg-white/60', 'text-blue-700', 'shadow-sm');
            document.getElementById('invoicePrintTab').classList.add('text-gray-600');
            
            document.getElementById('printReportBtn').classList.remove('hidden');
            document.getElementById('printInvoiceBtn').classList.add('hidden');
            document.getElementById('saveInvoicePdfBtn').classList.add('hidden');
            document.getElementById('saveInvoicePngBtn').classList.add('hidden');
            document.getElementById('editInvoiceBtn').classList.add('hidden');
        }

        function showInvoicePrint() {
            document.getElementById('reportPrintSection').classList.add('hidden');
            document.getElementById('invoicePrintSection').classList.remove('hidden');
            
            document.getElementById('invoicePrintTab').classList.add('bg-white/60', 'text-green-700', 'shadow-sm');
            document.getElementById('invoicePrintTab').classList.remove('text-gray-600');
            document.getElementById('reportPrintTab').classList.remove('bg-white/60', 'text-blue-700', 'shadow-sm');
            document.getElementById('reportPrintTab').classList.add('text-gray-600');
            
            document.getElementById('printReportBtn').classList.add('hidden');
            document.getElementById('printInvoiceBtn').classList.remove('hidden');
            document.getElementById('saveInvoicePdfBtn').classList.remove('hidden');
            document.getElementById('saveInvoicePngBtn').classList.remove('hidden');
            document.getElementById('editInvoiceBtn').classList.remove('hidden');
        }

        function populateInvoiceProjects() {
            const select = document.getElementById('invoiceProject');
            select.innerHTML = '<option value="">Pilih Proyek...</option>';
            
            projects.forEach(project => {
                const option = document.createElement('option');
                option.value = project.id;
                option.textContent = `${project.name} - ${project.clientName} (${formatCurrency(project.price || 0)})`;
                select.appendChild(option);
            });
        }

        function loadInvoiceSettings() {
            const settings = JSON.parse(localStorage.getItem('invoiceSettings') || '{}');
            
            if (settings.companyName) document.getElementById('companyName').value = settings.companyName;
            if (settings.companyAddress) document.getElementById('companyAddress').value = settings.companyAddress;
            if (settings.companyPhone) document.getElementById('companyPhone').value = settings.companyPhone;
            if (settings.companyEmail) document.getElementById('companyEmail').value = settings.companyEmail;
            if (settings.companyWebsite) document.getElementById('companyWebsite').value = settings.companyWebsite;
            if (settings.bankInfo) document.getElementById('bankInfo').value = settings.bankInfo;
            if (settings.invoiceNotes) document.getElementById('invoiceNotes').value = settings.invoiceNotes;
        }

        function saveInvoiceSettings() {
            const settings = {
                companyName: document.getElementById('companyName').value,
                companyAddress: document.getElementById('companyAddress').value,
                companyPhone: document.getElementById('companyPhone').value,
                companyEmail: document.getElementById('companyEmail').value,
                companyWebsite: document.getElementById('companyWebsite').value,
                bankInfo: document.getElementById('bankInfo').value,
                invoiceNotes: document.getElementById('invoiceNotes').value
            };
            
            localStorage.setItem('invoiceSettings', JSON.stringify(settings));
        }

        function printInvoice() {
            const projectId = document.getElementById('invoiceProject').value;
            if (!projectId) {
                alert('âŒ ' + t('selectProjectFirst'));
                return;
            }
            
            const project = projects.find(p => p.id == projectId);
            if (!project) {
                alert('âŒ ' + t('projectNotFound'));
                return;
            }
            
            // Save invoice settings
            saveInvoiceSettings();
            
            // Get invoice data
            const invoiceData = {
                number: document.getElementById('invoiceNumber').value,
                date: document.getElementById('invoiceDate').value,
                dueDate: document.getElementById('invoiceDueDate').value,
                format: document.getElementById('invoiceFormat').value,
                tax: parseFloat(document.getElementById('invoiceTax').value) || 0,
                discount: parseFloat(document.getElementById('invoiceDiscount').value) || 0,
                company: {
                    name: document.getElementById('companyName').value,
                    address: document.getElementById('companyAddress').value,
                    phone: document.getElementById('companyPhone').value,
                    email: document.getElementById('companyEmail').value,
                    website: document.getElementById('companyWebsite').value
                },
                notes: document.getElementById('invoiceNotes').value,
                bankInfo: document.getElementById('bankInfo').value,
                project: project
            };
            
            // Generate invoice content
            const invoiceContent = generateInvoiceContent(invoiceData);
            
            // Create print window
            const printWindow = document.createElement('div');
            printWindow.id = 'printContent';
            printWindow.className = `invoice-${invoiceData.format}`;
            printWindow.innerHTML = invoiceContent;
            printWindow.style.display = 'none';
            document.body.appendChild(printWindow);
            
            // Update invoice counter
            const currentCounter = parseInt(localStorage.getItem('invoiceCounter') || '0');
            localStorage.setItem('invoiceCounter', (currentCounter + 1).toString());
            
            // Print
            window.print();
            
            // Clean up
            setTimeout(() => {
                document.body.removeChild(printWindow);
            }, 1000);
            
            closePrintModal();
        }

        function generateInvoiceContent(data) {
            const subtotal = data.project.price || 0;
            const discountAmount = subtotal * (data.discount / 100);
            const afterDiscount = subtotal - discountAmount;
            const taxAmount = afterDiscount * (data.tax / 100);
            const total = afterDiscount + taxAmount;
            
            const formatDate = (dateStr) => {
                return new Date(dateStr).toLocaleDateString('id-ID', {
                    day: 'numeric',
                    month: 'long',
                    year: 'numeric'
                });
            };
            
            return `
                <div class="invoice-container">
                    <div style="text-align: center; margin-bottom: 30px; border-bottom: 3px solid #333; padding-bottom: 20px;">
                        <h1 style="font-size: 28px; margin: 0; font-weight: bold; color: #333;">INVOICE</h1>
                        <p style="font-size: 16px; margin: 5px 0; color: #666;">No: ${data.number}</p>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 40px; margin-bottom: 30px;">
                        <div>
                            <h3 style="font-size: 16px; font-weight: bold; margin-bottom: 10px; color: #333;">DARI:</h3>
                            <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; border-left: 4px solid #007bff;">
                                <p style="font-weight: bold; font-size: 16px; margin: 0 0 8px 0;">${data.company.name || 'Nama Perusahaan'}</p>
                                <p style="margin: 4px 0; line-height: 1.4;">${data.company.address || 'Alamat Perusahaan'}</p>
                                ${data.company.phone ? `<p style="margin: 4px 0;">ğŸ“ ${data.company.phone}</p>` : ''}
                                ${data.company.email ? `<p style="margin: 4px 0;">ğŸ“§ ${data.company.email}</p>` : ''}
                                ${data.company.website ? `<p style="margin: 4px 0;">ğŸŒ ${data.company.website}</p>` : ''}
                            </div>
                        </div>
                        
                        <div>
                            <h3 style="font-size: 16px; font-weight: bold; margin-bottom: 10px; color: #333;">KEPADA:</h3>
                            <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; border-left: 4px solid #28a745;">
                                <p style="font-weight: bold; font-size: 16px; margin: 0 0 8px 0;">${data.project.clientName}</p>
                                ${data.project.platform ? `<p style="margin: 4px 0;">ğŸ“± Platform: ${getPlatformDisplay(data.project.platform)}</p>` : ''}
                            </div>
                            
                            <div style="margin-top: 20px; background: #fff3cd; padding: 15px; border-radius: 8px; border-left: 4px solid #ffc107;">
                                <p style="margin: 4px 0;"><strong>Tanggal Invoice:</strong> ${formatDate(data.date)}</p>
                                <p style="margin: 4px 0;"><strong>Jatuh Tempo:</strong> ${formatDate(data.dueDate)}</p>
                            </div>
                        </div>
                    </div>
                    
                    <div style="margin-bottom: 30px;">
                        <h3 style="font-size: 16px; font-weight: bold; margin-bottom: 15px; color: #333;">DETAIL PROYEK:</h3>
                        <table style="width: 100%; border-collapse: collapse; background: white; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                            <thead>
                                <tr style="background: #343a40; color: white;">
                                    <th style="padding: 12px; text-align: left; border: 1px solid #ddd;">Deskripsi</th>
                                    <th style="padding: 12px; text-align: center; border: 1px solid #ddd; width: 100px;">Qty</th>
                                    <th style="padding: 12px; text-align: right; border: 1px solid #ddd; width: 150px;">Harga</th>
                                    <th style="padding: 12px; text-align: right; border: 1px solid #ddd; width: 150px;">Total</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td style="padding: 15px; border: 1px solid #ddd; vertical-align: top;">
                                        <strong>${data.project.name}</strong><br>
                                        <small style="color: #666;">${data.project.description || 'Layanan profesional'}</small><br>
                                        <small style="color: #666;">Periode: ${formatDate(data.project.startDate)} - ${formatDate(data.project.endDate)}</small>
                                    </td>
                                    <td style="padding: 15px; border: 1px solid #ddd; text-align: center;">1</td>
                                    <td style="padding: 15px; border: 1px solid #ddd; text-align: right;">${formatCurrency(subtotal)}</td>
                                    <td style="padding: 15px; border: 1px solid #ddd; text-align: right; font-weight: bold;">${formatCurrency(subtotal)}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 300px; gap: 40px; margin-bottom: 30px;">
                        <div>
                            ${data.notes ? `
                                <h3 style="font-size: 16px; font-weight: bold; margin-bottom: 10px; color: #333;">CATATAN:</h3>
                                <div style="background: #e7f3ff; padding: 15px; border-radius: 8px; border-left: 4px solid #007bff;">
                                    <p style="margin: 0; line-height: 1.5;">${data.notes}</p>
                                </div>
                            ` : ''}
                            
                            ${data.bankInfo ? `
                                <h3 style="font-size: 16px; font-weight: bold; margin: 20px 0 10px 0; color: #333;">INFORMASI PEMBAYARAN:</h3>
                                <div style="background: #d4edda; padding: 15px; border-radius: 8px; border-left: 4px solid #28a745;">
                                    <pre style="margin: 0; font-family: inherit; white-space: pre-wrap; line-height: 1.5;">${data.bankInfo}</pre>
                                </div>
                            ` : ''}
                        </div>
                        
                        <div>
                            <table style="width: 100%; border-collapse: collapse; background: white; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                <tr>
                                    <td style="padding: 10px; border: 1px solid #ddd; font-weight: bold;">Subtotal:</td>
                                    <td style="padding: 10px; border: 1px solid #ddd; text-align: right;">${formatCurrency(subtotal)}</td>
                                </tr>
                                ${data.discount > 0 ? `
                                    <tr>
                                        <td style="padding: 10px; border: 1px solid #ddd;">Diskon (${data.discount}%):</td>
                                        <td style="padding: 10px; border: 1px solid #ddd; text-align: right; color: #dc3545;">-${formatCurrency(discountAmount)}</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 10px; border: 1px solid #ddd;">Setelah Diskon:</td>
                                        <td style="padding: 10px; border: 1px solid #ddd; text-align: right;">${formatCurrency(afterDiscount)}</td>
                                    </tr>
                                ` : ''}
                                ${data.tax > 0 ? `
                                    <tr>
                                        <td style="padding: 10px; border: 1px solid #ddd;">PPN (${data.tax}%):</td>
                                        <td style="padding: 10px; border: 1px solid #ddd; text-align: right;">${formatCurrency(taxAmount)}</td>
                                    </tr>
                                ` : ''}
                                <tr style="background: #343a40; color: white; font-weight: bold; font-size: 16px;">
                                    <td style="padding: 15px; border: 1px solid #ddd;">TOTAL:</td>
                                    <td style="padding: 15px; border: 1px solid #ddd; text-align: right;">${formatCurrency(total)}</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                    
                    <div style="margin-top: 40px; text-align: center; border-top: 2px solid #eee; padding-top: 20px;">
                        <p style="margin: 0; color: #666; font-size: 12px;">Terima kasih atas kepercayaan Anda!</p>
                        <p style="margin: 5px 0 0 0; color: #666; font-size: 12px;">Invoice ini dibuat secara otomatis pada ${new Date().toLocaleDateString('id-ID')}</p>
                    </div>
                </div>
            `;
        }

        function printReport() {
            const reportType = document.getElementById('reportType').value;
            const includeStats = document.getElementById('includeStats').checked;
            const includeDescription = document.getElementById('includeDescription').checked;
            const includePrices = document.getElementById('includePrices').checked;
            
            // Filter projects based on report type
            let filteredProjects = [...projects];
            switch (reportType) {
                case 'completed':
                    filteredProjects = projects.filter(p => p.status === 'completed');
                    break;
                case 'pending':
                    filteredProjects = projects.filter(p => p.status === 'pending');
                    break;
                case 'progress':
                    filteredProjects = projects.filter(p => p.status === 'progress');
                    break;
                case 'high':
                    filteredProjects = projects.filter(p => p.priority === 'high');
                    break;
            }
            
            // Generate print content
            const printContent = generatePrintContent(filteredProjects, {
                includeStats,
                includeDescription,
                includePrices,
                reportType
            });
            
            // Create print window
            const printWindow = document.createElement('div');
            printWindow.id = 'printContent';
            printWindow.innerHTML = printContent;
            printWindow.style.display = 'none';
            document.body.appendChild(printWindow);
            
            // Print
            window.print();
            
            // Clean up
            setTimeout(() => {
                document.body.removeChild(printWindow);
            }, 1000);
            
            closePrintModal();
        }

        function generatePrintContent(filteredProjects, options) {
            const currentDate = new Date().toLocaleDateString('id-ID', {
                weekday: 'long',
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
            
            let content = `
                <div class="print-header">
                    <h1 style="font-size: 24px; margin: 0; font-weight: bold;">LAPORAN PLANNER PEKERJAAN</h1>
                    <p style="margin: 5px 0; color: #666;">Dibuat pada: ${currentDate}</p>
                </div>
            `;
            
            // Add statistics if enabled
            if (options.includeStats) {
                const totalProjects = filteredProjects.length;
                const highPriority = filteredProjects.filter(p => p.priority === 'high').length;
                const completed = filteredProjects.filter(p => p.status === 'completed').length;
                const totalValue = filteredProjects.reduce((sum, project) => sum + (project.price || 0), 0);
                
                content += `
                    <div class="print-stats">
                        <div class="print-stat-item">
                            <div style="font-weight: bold; font-size: 18px;">${totalProjects}</div>
                            <div style="font-size: 12px; color: #666;">Total Proyek</div>
                        </div>
                        <div class="print-stat-item">
                            <div style="font-weight: bold; font-size: 18px;">${highPriority}</div>
                            <div style="font-size: 12px; color: #666;">Prioritas Tinggi</div>
                        </div>
                        <div class="print-stat-item">
                            <div style="font-weight: bold; font-size: 18px;">${completed}</div>
                            <div style="font-size: 12px; color: #666;">Selesai</div>
                        </div>
                        <div class="print-stat-item">
                            <div style="font-weight: bold; font-size: 18px;">${formatCurrency(totalValue)}</div>
                            <div style="font-size: 12px; color: #666;">Total Nilai</div>
                        </div>
                    </div>
                `;
            }
            
            // Add projects list
            content += `<h2 style="margin: 20px 0 15px 0; font-size: 18px;">Laporan Proyek</h2>`;
            
            if (filteredProjects.length === 0) {
                content += `<p style="text-align: center; color: #666; font-style: italic;">Tidak ada proyek untuk ditampilkan.</p>`;
            } else {
                filteredProjects.forEach((project, index) => {
                    const priorityText = {
                        high: 'Tinggi',
                        medium: 'Sedang',
                        low: 'Rendah'
                    };
                    
                    const statusText = {
                        pending: 'Menunggu',
                        progress: 'Dalam Proses',
                        completed: 'Selesai'
                    };
                    
                    content += `
                        <div class="print-project">
                            <div class="print-project-header">
                                <span>${index + 1}. ${project.name}</span>
                                <span style="font-size: 12px; color: #666;">${project.status === 'completed' ? 'âœ…' : project.status === 'progress' ? 'ğŸ”„' : 'â³'} ${statusText[project.status]}</span>
                            </div>
                            <div class="print-project-details">
                                <strong>Klien:</strong> ${project.clientName}
                            </div>
                            ${project.platform ? `
                                <div class="print-project-details">
                                    <strong>Platform:</strong> ${getPlatformDisplay(project.platform)}
                                </div>
                            ` : ''}
                            ${options.includeDescription && project.description ? `
                                <div class="print-project-details">
                                    <strong>Deskripsi:</strong> ${project.description}
                                </div>
                            ` : ''}
                            <div class="print-project-details">
                                <strong>Periode:</strong> ${formatDate(project.startDate)} - ${formatDate(project.endDate)}
                            </div>
                            <div class="print-project-details">
                                <strong>Prioritas:</strong> ${priorityText[project.priority]}
                            </div>
                            ${options.includePrices ? `
                                <div class="print-project-details">
                                    <strong>Harga:</strong> ${formatCurrency(project.price || 0)}
                                </div>
                            ` : ''}
                        </div>
                    `;
                });
            }
            
            // Add footer
            content += `
                <div class="print-footer">
                    <p>Laporan ini dibuat secara otomatis oleh Planner Pekerjaan Bulanan</p>
                    <p>Total ${filteredProjects.length} proyek ditampilkan</p>
                </div>
            `;
            
            return content;
        }

        // Save invoice as PDF function
        function saveInvoiceAsPDF() {
            const projectId = document.getElementById('invoiceProject').value;
            if (!projectId) {
                alert('âŒ ' + t('selectProjectFirst'));
                return;
            }
            
            const project = projects.find(p => p.id == projectId);
            if (!project) {
                alert('âŒ ' + t('projectNotFound'));
                return;
            }
            
            // Save invoice settings
            saveInvoiceSettings();
            
            // Get invoice data
            const invoiceData = {
                number: document.getElementById('invoiceNumber').value,
                date: document.getElementById('invoiceDate').value,
                dueDate: document.getElementById('invoiceDueDate').value,
                format: document.getElementById('invoiceFormat').value,
                tax: parseFloat(document.getElementById('invoiceTax').value) || 0,
                discount: parseFloat(document.getElementById('invoiceDiscount').value) || 0,
                company: {
                    name: document.getElementById('companyName').value,
                    address: document.getElementById('companyAddress').value,
                    phone: document.getElementById('companyPhone').value,
                    email: document.getElementById('companyEmail').value,
                    website: document.getElementById('companyWebsite').value
                },
                notes: document.getElementById('invoiceNotes').value,
                bankInfo: document.getElementById('bankInfo').value,
                project: project
            };
            
            // Generate invoice content
            const invoiceContent = generateInvoiceContent(invoiceData);
            
            // Create temporary element for PDF generation
            const tempElement = document.createElement('div');
            tempElement.innerHTML = invoiceContent;
            tempElement.style.width = '210mm';
            tempElement.style.minHeight = '297mm';
            tempElement.style.padding = '20mm';
            tempElement.style.backgroundColor = 'white';
            tempElement.style.color = 'black';
            tempElement.style.fontSize = '12px';
            tempElement.style.lineHeight = '1.4';
            tempElement.style.fontFamily = 'Arial, sans-serif';
            
            // PDF options based on format
            const formatOptions = {
                a4: [210, 297],
                a5: [148, 210],
                a6: [105, 148],
                letter: [216, 279],
                legal: [216, 356],
                receipt: [80, 200]
            };
            
            const [width, height] = formatOptions[invoiceData.format] || formatOptions.a4;
            
            const opt = {
                margin: 0,
                filename: `Invoice_${invoiceData.number}_${project.name.replace(/[^a-zA-Z0-9]/g, '_')}.pdf`,
                image: { type: 'jpeg', quality: 0.98 },
                html2canvas: { 
                    scale: 2,
                    useCORS: true,
                    letterRendering: true,
                    width: width * 3.78, // Convert mm to pixels (1mm = 3.78px at 96dpi)
                    height: height * 3.78
                },
                jsPDF: { 
                    unit: 'mm', 
                    format: [width, height], 
                    orientation: width > height ? 'landscape' : 'portrait'
                }
            };
            
            // Generate and download PDF
            html2pdf().set(opt).from(tempElement).save().then(() => {
                // Update invoice counter
                const currentCounter = parseInt(localStorage.getItem('invoiceCounter') || '0');
                localStorage.setItem('invoiceCounter', (currentCounter + 1).toString());
                
                // Show success message
                alert('âœ… Invoice berhasil disimpan sebagai PDF!');
            }).catch(error => {
                console.error('Error generating PDF:', error);
                alert('âŒ Gagal menyimpan PDF. Silakan coba lagi.');
            });
        }

        // Save invoice as PNG function
        function saveInvoiceAsPNG() {
            const projectId = document.getElementById('invoiceProject').value;
            if (!projectId) {
                alert('âŒ ' + t('selectProjectFirst'));
                return;
            }
            
            const project = projects.find(p => p.id == projectId);
            if (!project) {
                alert('âŒ ' + t('projectNotFound'));
                return;
            }
            
            // Save invoice settings
            saveInvoiceSettings();
            
            // Get invoice data
            const invoiceData = {
                number: document.getElementById('invoiceNumber').value,
                date: document.getElementById('invoiceDate').value,
                dueDate: document.getElementById('invoiceDueDate').value,
                format: document.getElementById('invoiceFormat').value,
                tax: parseFloat(document.getElementById('invoiceTax').value) || 0,
                discount: parseFloat(document.getElementById('invoiceDiscount').value) || 0,
                company: {
                    name: document.getElementById('companyName').value,
                    address: document.getElementById('companyAddress').value,
                    phone: document.getElementById('companyPhone').value,
                    email: document.getElementById('companyEmail').value,
                    website: document.getElementById('companyWebsite').value
                },
                notes: document.getElementById('invoiceNotes').value,
                bankInfo: document.getElementById('bankInfo').value,
                project: project
            };
            
            // Generate invoice content
            const invoiceContent = generateInvoiceContent(invoiceData);
            
            // Create temporary element for PNG generation
            const tempElement = document.createElement('div');
            tempElement.innerHTML = invoiceContent;
            tempElement.style.width = '794px'; // A4 width in pixels at 96dpi
            tempElement.style.minHeight = '1123px'; // A4 height in pixels at 96dpi
            tempElement.style.padding = '40px';
            tempElement.style.backgroundColor = 'white';
            tempElement.style.color = 'black';
            tempElement.style.fontSize = '14px';
            tempElement.style.lineHeight = '1.4';
            tempElement.style.fontFamily = 'Arial, sans-serif';
            tempElement.style.position = 'absolute';
            tempElement.style.left = '-9999px';
            tempElement.style.top = '0';
            
            document.body.appendChild(tempElement);
            
            // Use html2canvas to generate PNG
            html2canvas(tempElement, {
                scale: 2,
                useCORS: true,
                letterRendering: true,
                backgroundColor: '#ffffff',
                width: 794,
                height: 1123
            }).then(canvas => {
                // Create download link
                const link = document.createElement('a');
                link.download = `Invoice_${invoiceData.number}_${project.name.replace(/[^a-zA-Z0-9]/g, '_')}.png`;
                link.href = canvas.toDataURL('image/png');
                
                // Trigger download
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                
                // Clean up
                document.body.removeChild(tempElement);
                
                // Update invoice counter
                const currentCounter = parseInt(localStorage.getItem('invoiceCounter') || '0');
                localStorage.setItem('invoiceCounter', (currentCounter + 1).toString());
                
                // Show success message
                alert('âœ… Invoice berhasil disimpan sebagai PNG!');
            }).catch(error => {
                console.error('Error generating PNG:', error);
                document.body.removeChild(tempElement);
                alert('âŒ Gagal menyimpan PNG. Silakan coba lagi.');
            });
        }

        // Invoice editor variables
        let currentInvoiceData = null;
        let logoImage = null;
        let signatureImage = null;

        // Edit invoice directly function
        function editInvoiceDirectly() {
            const projectId = document.getElementById('invoiceProject').value;
            if (!projectId) {
                alert('âŒ ' + t('selectProjectFirst'));
                return;
            }
            
            const project = projects.find(p => p.id == projectId);
            if (!project) {
                alert('âŒ ' + t('projectNotFound'));
                return;
            }
            
            // Save invoice settings
            saveInvoiceSettings();
            
            // Get invoice data
            currentInvoiceData = {
                number: document.getElementById('invoiceNumber').value,
                date: document.getElementById('invoiceDate').value,
                dueDate: document.getElementById('invoiceDueDate').value,
                format: document.getElementById('invoiceFormat').value,
                tax: parseFloat(document.getElementById('invoiceTax').value) || 0,
                discount: parseFloat(document.getElementById('invoiceDiscount').value) || 0,
                company: {
                    name: document.getElementById('companyName').value,
                    address: document.getElementById('companyAddress').value,
                    phone: document.getElementById('companyPhone').value,
                    email: document.getElementById('companyEmail').value,
                    website: document.getElementById('companyWebsite').value
                },
                notes: document.getElementById('invoiceNotes').value,
                bankInfo: document.getElementById('bankInfo').value,
                project: project
            };
            
            // Load saved template if exists
            loadInvoiceTemplate();
            
            // Populate editor fields
            populateInvoiceEditor();
            
            // Generate initial preview
            updateInvoicePreview();
            
            // Show editor modal
            document.getElementById('invoiceEditorModal').classList.remove('hidden');
            document.getElementById('invoiceEditorModal').classList.add('flex');
            
            // Close print modal
            closePrintModal();
        }

        function closeInvoiceEditor() {
            document.getElementById('invoiceEditorModal').classList.add('hidden');
            document.getElementById('invoiceEditorModal').classList.remove('flex');
        }

        function populateInvoiceEditor() {
            // Populate company info
            document.getElementById('editCompanyName').value = currentInvoiceData.company.name || '';
            document.getElementById('editCompanyAddress').value = currentInvoiceData.company.address || '';
            document.getElementById('editCompanyPhone').value = currentInvoiceData.company.phone || '';
            document.getElementById('editCompanyEmail').value = currentInvoiceData.company.email || '';
            
            // Set default footer
            document.getElementById('invoiceFooter').value = 'Terima kasih atas kepercayaan Anda!';
        }

        function handleLogoUpload(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    logoImage = e.target.result;
                    document.getElementById('logoPreview').innerHTML = `
                        <img src="${logoImage}" alt="Logo" class="w-20 h-20 object-contain mx-auto rounded-lg">
                    `;
                    updateInvoicePreview();
                };
                reader.readAsDataURL(file);
            }
        }

        function handleSignatureUpload(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    signatureImage = e.target.result;
                    document.getElementById('signaturePreview').innerHTML = `
                        <img src="${signatureImage}" alt="Signature" class="w-24 h-16 object-contain mx-auto rounded-lg">
                    `;
                    updateInvoicePreview();
                };
                reader.readAsDataURL(file);
            }
        }

        function updateInvoicePreview() {
            if (!currentInvoiceData) return;
            
            const container = document.getElementById('invoicePreviewContainer');
            const headerColor = document.getElementById('headerColor').value;
            const invoiceTitle = document.getElementById('invoiceTitle').value;
            const companyName = document.getElementById('editCompanyName').value || 'Nama Perusahaan';
            const companyAddress = document.getElementById('editCompanyAddress').value || 'Alamat Perusahaan';
            const companyPhone = document.getElementById('editCompanyPhone').value;
            const companyEmail = document.getElementById('editCompanyEmail').value;
            const signatureName = document.getElementById('signatureName').value;
            const signatureTitle = document.getElementById('signatureTitle').value;
            const footerText = document.getElementById('invoiceFooter').value;
            
            // Calculate totals
            const subtotal = currentInvoiceData.project.price || 0;
            const discountAmount = subtotal * (currentInvoiceData.discount / 100);
            const afterDiscount = subtotal - discountAmount;
            const taxAmount = afterDiscount * (currentInvoiceData.tax / 100);
            const total = afterDiscount + taxAmount;
            
            // Format dates
            const formatDate = (dateStr) => {
                return new Date(dateStr).toLocaleDateString('id-ID', {
                    day: 'numeric',
                    month: 'long',
                    year: 'numeric'
                });
            };
            
            container.innerHTML = `
                <div style="font-family: Arial, sans-serif; font-size: 12px; line-height: 1.4; color: #333;">
                    <!-- Header -->
                    <div style="text-align: center; margin-bottom: 30px; border-bottom: 3px solid ${headerColor}; padding-bottom: 20px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                            <div style="flex: 1;">
                                ${logoImage ? `<img src="${logoImage}" alt="Logo" style="max-width: 80px; max-height: 80px; object-fit: contain;">` : '<div style="width: 80px; height: 80px; background: #f0f0f0; border-radius: 8px; display: flex; align-items: center; justify-content: center; color: #999;">ğŸ¢</div>'}
                            </div>
                            <div style="flex: 2; text-align: center;">
                                <h1 style="font-size: 32px; margin: 0; font-weight: bold; color: ${headerColor};">${invoiceTitle}</h1>
                                <p style="font-size: 16px; margin: 5px 0; color: #666;">No: ${currentInvoiceData.number}</p>
                            </div>
                            <div style="flex: 1;"></div>
                        </div>
                    </div>
                    
                    <!-- Company and Client Info -->
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 40px; margin-bottom: 30px;">
                        <div>
                            <h3 style="font-size: 16px; font-weight: bold; margin-bottom: 10px; color: ${headerColor};">DARI:</h3>
                            <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; border-left: 4px solid ${headerColor};">
                                <p style="font-weight: bold; font-size: 16px; margin: 0 0 8px 0;">${companyName}</p>
                                <p style="margin: 4px 0; line-height: 1.4;">${companyAddress}</p>
                                ${companyPhone ? `<p style="margin: 4px 0;">ğŸ“ ${companyPhone}</p>` : ''}
                                ${companyEmail ? `<p style="margin: 4px 0;">ğŸ“§ ${companyEmail}</p>` : ''}
                            </div>
                        </div>
                        
                        <div>
                            <h3 style="font-size: 16px; font-weight: bold; margin-bottom: 10px; color: ${headerColor};">KEPADA:</h3>
                            <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; border-left: 4px solid #28a745;">
                                <p style="font-weight: bold; font-size: 16px; margin: 0 0 8px 0;">${currentInvoiceData.project.clientName}</p>
                                ${currentInvoiceData.project.platform ? `<p style="margin: 4px 0;">ğŸ“± Platform: ${getPlatformDisplay(currentInvoiceData.project.platform)}</p>` : ''}
                            </div>
                            
                            <div style="margin-top: 20px; background: #fff3cd; padding: 15px; border-radius: 8px; border-left: 4px solid #ffc107;">
                                <p style="margin: 4px 0;"><strong>Tanggal Invoice:</strong> ${formatDate(currentInvoiceData.date)}</p>
                                <p style="margin: 4px 0;"><strong>Jatuh Tempo:</strong> ${formatDate(currentInvoiceData.dueDate)}</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Project Details -->
                    <div style="margin-bottom: 30px;">
                        <h3 style="font-size: 16px; font-weight: bold; margin-bottom: 15px; color: ${headerColor};">DETAIL PROYEK:</h3>
                        <table style="width: 100%; border-collapse: collapse; background: white; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                            <thead>
                                <tr style="background: ${headerColor}; color: white;">
                                    <th style="padding: 12px; text-align: left; border: 1px solid #ddd;">Deskripsi</th>
                                    <th style="padding: 12px; text-align: center; border: 1px solid #ddd; width: 100px;">Qty</th>
                                    <th style="padding: 12px; text-align: right; border: 1px solid #ddd; width: 150px;">Harga</th>
                                    <th style="padding: 12px; text-align: right; border: 1px solid #ddd; width: 150px;">Total</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td style="padding: 15px; border: 1px solid #ddd; vertical-align: top;">
                                        <strong>${currentInvoiceData.project.name}</strong><br>
                                        <small style="color: #666;">${currentInvoiceData.project.description || 'Layanan profesional'}</small><br>
                                        <small style="color: #666;">Periode: ${formatDate(currentInvoiceData.project.startDate)} - ${formatDate(currentInvoiceData.project.endDate)}</small>
                                    </td>
                                    <td style="padding: 15px; border: 1px solid #ddd; text-align: center;">1</td>
                                    <td style="padding: 15px; border: 1px solid #ddd; text-align: right;">${formatCurrency(subtotal)}</td>
                                    <td style="padding: 15px; border: 1px solid #ddd; text-align: right; font-weight: bold;">${formatCurrency(subtotal)}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <!-- Totals and Notes -->
                    <div style="display: grid; grid-template-columns: 1fr 300px; gap: 40px; margin-bottom: 30px;">
                        <div>
                            ${currentInvoiceData.notes ? `
                                <h3 style="font-size: 16px; font-weight: bold; margin-bottom: 10px; color: ${headerColor};">CATATAN:</h3>
                                <div style="background: #e7f3ff; padding: 15px; border-radius: 8px; border-left: 4px solid ${headerColor};">
                                    <p style="margin: 0; line-height: 1.5;">${currentInvoiceData.notes}</p>
                                </div>
                            ` : ''}
                            
                            ${currentInvoiceData.bankInfo ? `
                                <h3 style="font-size: 16px; font-weight: bold; margin: 20px 0 10px 0; color: ${headerColor};">INFORMASI PEMBAYARAN:</h3>
                                <div style="background: #d4edda; padding: 15px; border-radius: 8px; border-left: 4px solid #28a745;">
                                    <pre style="margin: 0; font-family: inherit; white-space: pre-wrap; line-height: 1.5;">${currentInvoiceData.bankInfo}</pre>
                                </div>
                            ` : ''}
                        </div>
                        
                        <div>
                            <table style="width: 100%; border-collapse: collapse; background: white; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                <tr>
                                    <td style="padding: 10px; border: 1px solid #ddd; font-weight: bold;">Subtotal:</td>
                                    <td style="padding: 10px; border: 1px solid #ddd; text-align: right;">${formatCurrency(subtotal)}</td>
                                </tr>
                                ${currentInvoiceData.discount > 0 ? `
                                    <tr>
                                        <td style="padding: 10px; border: 1px solid #ddd;">Diskon (${currentInvoiceData.discount}%):</td>
                                        <td style="padding: 10px; border: 1px solid #ddd; text-align: right; color: #dc3545;">-${formatCurrency(discountAmount)}</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 10px; border: 1px solid #ddd;">Setelah Diskon:</td>
                                        <td style="padding: 10px; border: 1px solid #ddd; text-align: right;">${formatCurrency(afterDiscount)}</td>
                                    </tr>
                                ` : ''}
                                ${currentInvoiceData.tax > 0 ? `
                                    <tr>
                                        <td style="padding: 10px; border: 1px solid #ddd;">PPN (${currentInvoiceData.tax}%):</td>
                                        <td style="padding: 10px; border: 1px solid #ddd; text-align: right;">${formatCurrency(taxAmount)}</td>
                                    </tr>
                                ` : ''}
                                <tr style="background: ${headerColor}; color: white; font-weight: bold; font-size: 16px;">
                                    <td style="padding: 15px; border: 1px solid #ddd;">TOTAL:</td>
                                    <td style="padding: 15px; border: 1px solid #ddd; text-align: right;">${formatCurrency(total)}</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                    
                    <!-- Signature and Footer -->
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 40px; margin-top: 40px;">
                        <div></div>
                        <div style="text-align: center;">
                            ${signatureName || signatureTitle ? `
                                <p style="margin: 0 0 10px 0; font-weight: bold;">Hormat kami,</p>
                                ${signatureImage ? `<img src="${signatureImage}" alt="Signature" style="max-width: 150px; max-height: 80px; object-fit: contain; margin: 10px 0;">` : '<div style="height: 60px;"></div>'}
                                ${signatureName ? `<p style="margin: 5px 0; font-weight: bold; border-top: 1px solid #333; padding-top: 5px; display: inline-block; min-width: 150px;">${signatureName}</p>` : ''}
                                ${signatureTitle ? `<p style="margin: 0; font-size: 11px; color: #666;">${signatureTitle}</p>` : ''}
                            ` : ''}
                        </div>
                    </div>
                    
                    ${footerText ? `
                        <div style="margin-top: 40px; text-align: center; border-top: 2px solid #eee; padding-top: 20px;">
                            <p style="margin: 0; color: #666; font-size: 12px;">${footerText}</p>
                            <p style="margin: 5px 0 0 0; color: #666; font-size: 12px;">Invoice ini dibuat secara otomatis pada ${new Date().toLocaleDateString('id-ID')}</p>
                        </div>
                    ` : ''}
                </div>
            `;
        }

        function saveInvoiceTemplate() {
            const template = {
                logoImage: logoImage,
                signatureImage: signatureImage,
                invoiceTitle: document.getElementById('invoiceTitle').value,
                headerColor: document.getElementById('headerColor').value,
                signatureName: document.getElementById('signatureName').value,
                signatureTitle: document.getElementById('signatureTitle').value,
                invoiceFooter: document.getElementById('invoiceFooter').value
            };
            
            localStorage.setItem('invoiceTemplate', JSON.stringify(template));
            alert('âœ… Template invoice berhasil disimpan!');
        }

        function loadInvoiceTemplate() {
            const template = JSON.parse(localStorage.getItem('invoiceTemplate') || '{}');
            
            if (template.logoImage) {
                logoImage = template.logoImage;
                document.getElementById('logoPreview').innerHTML = `
                    <img src="${logoImage}" alt="Logo" class="w-20 h-20 object-contain mx-auto rounded-lg">
                `;
            }
            
            if (template.signatureImage) {
                signatureImage = template.signatureImage;
                document.getElementById('signaturePreview').innerHTML = `
                    <img src="${signatureImage}" alt="Signature" class="w-24 h-16 object-contain mx-auto rounded-lg">
                `;
            }
            
            if (template.invoiceTitle) document.getElementById('invoiceTitle').value = template.invoiceTitle;
            if (template.headerColor) document.getElementById('headerColor').value = template.headerColor;
            if (template.signatureName) document.getElementById('signatureName').value = template.signatureName;
            if (template.signatureTitle) document.getElementById('signatureTitle').value = template.signatureTitle;
            if (template.invoiceFooter) document.getElementById('invoiceFooter').value = template.invoiceFooter;
        }

        function printEditedInvoice() {
            const content = document.getElementById('invoicePreviewContainer').innerHTML;
            
            const printWindow = document.createElement('div');
            printWindow.id = 'printContent';
            printWindow.innerHTML = `<div style="padding: 20mm;">${content}</div>`;
            printWindow.style.display = 'none';
            document.body.appendChild(printWindow);
            
            // Update invoice counter
            const currentCounter = parseInt(localStorage.getItem('invoiceCounter') || '0');
            localStorage.setItem('invoiceCounter', (currentCounter + 1).toString());
            
            window.print();
            
            setTimeout(() => {
                document.body.removeChild(printWindow);
            }, 1000);
        }

        function saveEditedInvoiceAsPDF() {
            const content = document.getElementById('invoicePreviewContainer');
            
            const opt = {
                margin: 10,
                filename: `Invoice_${currentInvoiceData.number}_${currentInvoiceData.project.name.replace(/[^a-zA-Z0-9]/g, '_')}.pdf`,
                image: { type: 'jpeg', quality: 0.98 },
                html2canvas: { scale: 2, useCORS: true, letterRendering: true },
                jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
            };
            
            html2pdf().set(opt).from(content).save().then(() => {
                const currentCounter = parseInt(localStorage.getItem('invoiceCounter') || '0');
                localStorage.setItem('invoiceCounter', (currentCounter + 1).toString());
                alert('âœ… Invoice berhasil disimpan sebagai PDF!');
            }).catch(error => {
                console.error('Error generating PDF:', error);
                alert('âŒ Gagal menyimpan PDF. Silakan coba lagi.');
            });
        }

        function saveEditedInvoiceAsPNG() {
            const content = document.getElementById('invoicePreviewContainer');
            
            html2canvas(content, {
                scale: 2,
                useCORS: true,
                letterRendering: true,
                backgroundColor: '#ffffff'
            }).then(canvas => {
                const link = document.createElement('a');
                link.download = `Invoice_${currentInvoiceData.number}_${currentInvoiceData.project.name.replace(/[^a-zA-Z0-9]/g, '_')}.png`;
                link.href = canvas.toDataURL('image/png');
                
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                
                const currentCounter = parseInt(localStorage.getItem('invoiceCounter') || '0');
                localStorage.setItem('invoiceCounter', (currentCounter + 1).toString());
                
                alert('âœ… Invoice berhasil disimpan sebagai PNG!');
            }).catch(error => {
                console.error('Error generating PNG:', error);
                alert('âŒ Gagal menyimpan PNG. Silakan coba lagi.');
            });
        }

        // Super Admin Dashboard Functions
        function openSuperAdminDashboard() {
            if (currentUser !== SUPER_ADMIN.username) {
                alert('âŒ Akses ditolak! Hanya Super Admin yang dapat mengakses dashboard ini.');
                return;
            }
            
            // Load dashboard data
            loadSuperAdminData();
            
            document.getElementById('superAdminModal').classList.remove('hidden');
            document.getElementById('superAdminModal').classList.add('flex');
        }
        
        function closeSuperAdminDashboard() {
            document.getElementById('superAdminModal').classList.add('hidden');
            document.getElementById('superAdminModal').classList.remove('flex');
        }
        
        function loadSuperAdminData() {
            // Load statistics
            const stats = JSON.parse(localStorage.getItem('userStats') || '{}');
            const activities = JSON.parse(localStorage.getItem('userActivities') || '[]');
            const allProjects = JSON.parse(localStorage.getItem('workPlanner') || '[]');
            
            // Calculate totals
            const totalUsers = userAccounts.length + 1; // +1 for default admin
            const today = new Date().toDateString();
            const activeToday = Object.keys(stats).filter(username => {
                return stats[username].dailyActivity[today] && stats[username].dailyActivity[today].logins > 0;
            }).length;
            
            // Update overview stats
            document.getElementById('totalUsersCount').textContent = totalUsers;
            document.getElementById('activeUsersToday').textContent = activeToday;
            document.getElementById('totalProjectsAll').textContent = allProjects.length;
            document.getElementById('totalActivities').textContent = activities.length;
            
            // Load users table
            loadUsersTable();
            
            // Load activities
            loadActivitiesLog();
            
            // Load system info
            loadSystemInfo();
        }
        
        function loadUsersTable() {
            const tbody = document.getElementById('usersTableBody');
            const stats = JSON.parse(localStorage.getItem('userStats') || '{}');
            const allProjects = JSON.parse(localStorage.getItem('workPlanner') || '[]');
            
            let rows = '';
            
            // Add default admin
            const adminProjects = allProjects.filter(p => p.createdBy === userCredentials.username).length;
            const adminStats = stats[userCredentials.username] || {};
            const adminLastLogin = adminStats.lastLogin ? new Date(adminStats.lastLogin).toLocaleString('id-ID') : 'Belum pernah';
            const adminStatus = currentUser === userCredentials.username ? 'ğŸŸ¢ Online' : 'âš« Offline';
            
            rows += `
                <tr class="hover:bg-gray-50">
                    <td class="border border-gray-300 px-4 py-2 font-medium">${userCredentials.username}</td>
                    <td class="border border-gray-300 px-4 py-2">-</td>
                    <td class="border border-gray-300 px-4 py-2"><span class="bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs">Admin Default</span></td>
                    <td class="border border-gray-300 px-4 py-2">-</td>
                    <td class="border border-gray-300 px-4 py-2">${adminLastLogin}</td>
                    <td class="border border-gray-300 px-4 py-2">${adminStats.totalLogins || 0}</td>
                    <td class="border border-gray-300 px-4 py-2">${adminProjects}</td>
                    <td class="border border-gray-300 px-4 py-2">${adminStatus}</td>
                </tr>
            `;
            
            // Add registered users
            userAccounts.forEach(user => {
                const userProjects = allProjects.filter(p => p.createdBy === user.username).length;
                const userStats = stats[user.username] || {};
                const lastLogin = userStats.lastLogin ? new Date(userStats.lastLogin).toLocaleString('id-ID') : 'Belum pernah';
                const status = currentUser === user.username ? 'ğŸŸ¢ Online' : 'âš« Offline';
                const createdDate = new Date(user.createdAt).toLocaleDateString('id-ID');
                
                rows += `
                    <tr class="hover:bg-gray-50">
                        <td class="border border-gray-300 px-4 py-2 font-medium">${user.username}</td>
                        <td class="border border-gray-300 px-4 py-2">${user.email || '-'}</td>
                        <td class="border border-gray-300 px-4 py-2"><span class="bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs">User Terdaftar</span></td>
                        <td class="border border-gray-300 px-4 py-2">${createdDate}</td>
                        <td class="border border-gray-300 px-4 py-2">${lastLogin}</td>
                        <td class="border border-gray-300 px-4 py-2">${userStats.totalLogins || 0}</td>
                        <td class="border border-gray-300 px-4 py-2">${userProjects}</td>
                        <td class="border border-gray-300 px-4 py-2">${status}</td>
                    </tr>
                `;
            });
            
            tbody.innerHTML = rows;
        }
        
        function loadActivitiesLog() {
            const activities = JSON.parse(localStorage.getItem('userActivities') || '[]');
            const container = document.getElementById('activitiesContainer');
            
            if (activities.length === 0) {
                container.innerHTML = '<p class="text-center text-gray-500 py-4">Belum ada aktivitas yang tercatat.</p>';
                return;
            }
            
            // Sort by timestamp (newest first)
            const sortedActivities = activities.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
            
            let html = '';
            sortedActivities.slice(0, 50).forEach(activity => { // Show last 50 activities
                const time = new Date(activity.timestamp).toLocaleString('id-ID');
                const actionIcon = getActionIcon(activity.action);
                const actionText = getActionText(activity.action);
                
                html += `
                    <div class="bg-white/40 border border-gray-200 rounded-lg p-3 mb-2">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center gap-3">
                                <span class="text-lg">${actionIcon}</span>
                                <div>
                                    <div class="font-medium text-sm">${activity.username} - ${actionText}</div>
                                    <div class="text-xs text-gray-500">${time}</div>
                                </div>
                            </div>
                            <div class="text-xs text-gray-400">
                                ${activity.sessionId ? activity.sessionId.substring(0, 8) + '...' : ''}
                            </div>
                        </div>
                        ${activity.details && Object.keys(activity.details).length > 0 ? `
                            <div class="mt-2 text-xs text-gray-600 bg-gray-50 rounded p-2">
                                ${JSON.stringify(activity.details, null, 2)}
                            </div>
                        ` : ''}
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }
        
        function getActionIcon(action) {
            const icons = {
                'SUPER_ADMIN_LOGIN': 'ğŸ”',
                'ADMIN_LOGIN': 'ğŸ‘¨â€ğŸ’¼',
                'USER_LOGIN': 'ğŸ‘¤',
                'PROJECT_CREATED': 'â•',
                'PROJECT_UPDATED': 'âœï¸',
                'PROJECT_COMPLETED': 'âœ…',
                'EXPORT': 'ğŸ“Š',
                'PRINT': 'ğŸ–¨ï¸'
            };
            return icons[action] || 'ğŸ“';
        }
        
        function getActionText(action) {
            const texts = {
                'SUPER_ADMIN_LOGIN': 'Login sebagai Super Admin',
                'ADMIN_LOGIN': 'Login sebagai Admin',
                'USER_LOGIN': 'Login sebagai User',
                'PROJECT_CREATED': 'Membuat proyek baru',
                'PROJECT_UPDATED': 'Mengupdate proyek',
                'PROJECT_COMPLETED': 'Menyelesaikan proyek',
                'EXPORT': 'Export data',
                'PRINT': 'Mencetak laporan'
            };
            return texts[action] || action;
        }
        
        function loadSystemInfo() {
            // Calculate storage usage
            let totalSize = 0;
            for (let key in localStorage) {
                if (localStorage.hasOwnProperty(key)) {
                    totalSize += localStorage[key].length;
                }
            }
            
            document.getElementById('storageUsed').textContent = (totalSize / 1024).toFixed(2) + ' KB';
            document.getElementById('browserInfo').textContent = navigator.userAgent.split(' ')[0];
            document.getElementById('platformInfo').textContent = navigator.platform;
            document.getElementById('serverTime').textContent = new Date().toLocaleString('id-ID');
            document.getElementById('currentSessionId').textContent = sessionStorage.getItem('sessionId') || 'Tidak ada';
        }
        
        // Tab functions
        function showUsersTab() {
            // Hide all tabs
            document.getElementById('usersTabContent').classList.remove('hidden');
            document.getElementById('activitiesTabContent').classList.add('hidden');
            document.getElementById('statisticsTabContent').classList.add('hidden');
            document.getElementById('systemTabContent').classList.add('hidden');
            
            // Update tab buttons
            document.getElementById('usersTab').classList.add('bg-white/60', 'text-blue-700', 'shadow-sm');
            document.getElementById('usersTab').classList.remove('text-gray-600');
            document.getElementById('activitiesTab').classList.remove('bg-white/60', 'text-blue-700', 'shadow-sm');
            document.getElementById('activitiesTab').classList.add('text-gray-600');
            document.getElementById('statisticsTab').classList.remove('bg-white/60', 'text-blue-700', 'shadow-sm');
            document.getElementById('statisticsTab').classList.add('text-gray-600');
            document.getElementById('systemTab').classList.remove('bg-white/60', 'text-blue-700', 'shadow-sm');
            document.getElementById('systemTab').classList.add('text-gray-600');
        }
        
        function showActivitiesTab() {
            document.getElementById('usersTabContent').classList.add('hidden');
            document.getElementById('activitiesTabContent').classList.remove('hidden');
            document.getElementById('statisticsTabContent').classList.add('hidden');
            document.getElementById('systemTabContent').classList.add('hidden');
            
            document.getElementById('activitiesTab').classList.add('bg-white/60', 'text-blue-700', 'shadow-sm');
            document.getElementById('activitiesTab').classList.remove('text-gray-600');
            document.getElementById('usersTab').classList.remove('bg-white/60', 'text-blue-700', 'shadow-sm');
            document.getElementById('usersTab').classList.add('text-gray-600');
            document.getElementById('statisticsTab').classList.remove('bg-white/60', 'text-blue-700', 'shadow-sm');
            document.getElementById('statisticsTab').classList.add('text-gray-600');
            document.getElementById('systemTab').classList.remove('bg-white/60', 'text-blue-700', 'shadow-sm');
            document.getElementById('systemTab').classList.add('text-gray-600');
        }
        
        function showStatisticsTab() {
            document.getElementById('usersTabContent').classList.add('hidden');
            document.getElementById('activitiesTabContent').classList.add('hidden');
            document.getElementById('statisticsTabContent').classList.remove('hidden');
            document.getElementById('systemTabContent').classList.add('hidden');
            
            document.getElementById('statisticsTab').classList.add('bg-white/60', 'text-blue-700', 'shadow-sm');
            document.getElementById('statisticsTab').classList.remove('text-gray-600');
            document.getElementById('usersTab').classList.remove('bg-white/60', 'text-blue-700', 'shadow-sm');
            document.getElementById('usersTab').classList.add('text-gray-600');
            document.getElementById('activitiesTab').classList.remove('bg-white/60', 'text-blue-700', 'shadow-sm');
            document.getElementById('activitiesTab').classList.add('text-gray-600');
            document.getElementById('systemTab').classList.remove('bg-white/60', 'text-blue-700', 'shadow-sm');
            document.getElementById('systemTab').classList.add('text-gray-600');
            
            // Load statistics
            loadDetailedStatistics();
        }
        
        function showSystemTab() {
            document.getElementById('usersTabContent').classList.add('hidden');
            document.getElementById('activitiesTabContent').classList.add('hidden');
            document.getElementById('statisticsTabContent').classList.add('hidden');
            document.getElementById('systemTabContent').classList.remove('hidden');
            
            document.getElementById('systemTab').classList.add('bg-white/60', 'text-blue-700', 'shadow-sm');
            document.getElementById('systemTab').classList.remove('text-gray-600');
            document.getElementById('usersTab').classList.remove('bg-white/60', 'text-blue-700', 'shadow-sm');
            document.getElementById('usersTab').classList.add('text-gray-600');
            document.getElementById('activitiesTab').classList.remove('bg-white/60', 'text-blue-700', 'shadow-sm');
            document.getElementById('activitiesTab').classList.add('text-gray-600');
            document.getElementById('statisticsTab').classList.remove('bg-white/60', 'text-blue-700', 'shadow-sm');
            document.getElementById('statisticsTab').classList.add('text-gray-600');
        }
        
        function loadDetailedStatistics() {
            const stats = JSON.parse(localStorage.getItem('userStats') || '{}');
            
            // Daily login stats
            const dailyStats = {};
            Object.keys(stats).forEach(username => {
                Object.keys(stats[username].dailyActivity || {}).forEach(date => {
                    if (!dailyStats[date]) dailyStats[date] = 0;
                    dailyStats[date] += stats[username].dailyActivity[date].logins;
                });
            });
            
            let dailyHtml = '<div class="space-y-2">';
            Object.keys(dailyStats).slice(-7).forEach(date => {
                const count = dailyStats[date];
                dailyHtml += `
                    <div class="flex justify-between items-center">
                        <span class="text-sm">${new Date(date).toLocaleDateString('id-ID')}</span>
                        <div class="flex items-center gap-2">
                            <div class="bg-blue-200 h-2 rounded" style="width: ${Math.max(count * 20, 10)}px;"></div>
                            <span class="text-sm font-medium">${count}</span>
                        </div>
                    </div>
                `;
            });
            dailyHtml += '</div>';
            document.getElementById('dailyLoginStats').innerHTML = dailyHtml;
            
            // Top users
            const userActivity = Object.keys(stats).map(username => ({
                username,
                totalLogins: stats[username].totalLogins || 0,
                totalProjects: stats[username].totalProjects || 0
            })).sort((a, b) => b.totalLogins - a.totalLogins);
            
            let topUsersHtml = '<div class="space-y-3">';
            userActivity.slice(0, 5).forEach((user, index) => {
                const medal = index === 0 ? 'ğŸ¥‡' : index === 1 ? 'ğŸ¥ˆ' : index === 2 ? 'ğŸ¥‰' : 'ğŸ…';
                topUsersHtml += `
                    <div class="flex items-center justify-between bg-white/40 rounded-lg p-3">
                        <div class="flex items-center gap-3">
                            <span class="text-lg">${medal}</span>
                            <div>
                                <div class="font-medium">${user.username}</div>
                                <div class="text-xs text-gray-500">${user.totalProjects} proyek</div>
                            </div>
                        </div>
                        <div class="text-right">
                            <div class="font-bold text-blue-600">${user.totalLogins}</div>
                            <div class="text-xs text-gray-500">login</div>
                        </div>
                    </div>
                `;
            });
            topUsersHtml += '</div>';
            document.getElementById('topUsersStats').innerHTML = topUsersHtml;
        }
        
        // System management functions
        function exportAllData() {
            const allData = {
                userCredentials: JSON.parse(localStorage.getItem('userCredentials') || '{}'),
                userAccounts: JSON.parse(localStorage.getItem('userAccounts') || '[]'),
                userStats: JSON.parse(localStorage.getItem('userStats') || '{}'),
                userActivities: JSON.parse(localStorage.getItem('userActivities') || '[]'),
                projects: JSON.parse(localStorage.getItem('workPlanner') || '[]'),
                settings: JSON.parse(localStorage.getItem('plannerSettings') || '{}'),
                exportDate: new Date().toISOString()
            };
            
            const dataStr = JSON.stringify(allData, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            
            const link = document.createElement('a');
            link.href = URL.createObjectURL(dataBlob);
            link.download = `planner_database_backup_${new Date().toISOString().split('T')[0]}.json`;
            link.click();
            
            trackUserActivity('EXPORT_ALL_DATA', { size: dataStr.length });
            alert('âœ… Semua data berhasil diekspor!');
        }
        
        function backupDatabase() {
            const backup = {
                timestamp: new Date().toISOString(),
                data: {
                    userCredentials: localStorage.getItem('userCredentials'),
                    userAccounts: localStorage.getItem('userAccounts'),
                    userStats: localStorage.getItem('userStats'),
                    userActivities: localStorage.getItem('userActivities'),
                    workPlanner: localStorage.getItem('workPlanner'),
                    plannerSettings: localStorage.getItem('plannerSettings'),
                    invoiceSettings: localStorage.getItem('invoiceSettings'),
                    invoiceTemplate: localStorage.getItem('invoiceTemplate'),
                    invoiceCounter: localStorage.getItem('invoiceCounter')
                }
            };
            
            const backupStr = JSON.stringify(backup, null, 2);
            const backupBlob = new Blob([backupStr], {type: 'application/json'});
            
            const link = document.createElement('a');
            link.href = URL.createObjectURL(backupBlob);
            link.download = `planner_full_backup_${new Date().toISOString().split('T')[0]}.json`;
            link.click();
            
            trackUserActivity('DATABASE_BACKUP', { size: backupStr.length });
            alert('âœ… Database berhasil dibackup!');
        }
        
        function clearOldData() {
            if (confirm('âš ï¸ Hapus data aktivitas yang lebih dari 30 hari?\n\nTindakan ini tidak dapat dibatalkan!')) {
                const activities = JSON.parse(localStorage.getItem('userActivities') || '[]');
                const thirtyDaysAgo = new Date();
                thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);
                
                const filteredActivities = activities.filter(activity => 
                    new Date(activity.timestamp) > thirtyDaysAgo
                );
                
                localStorage.setItem('userActivities', JSON.stringify(filteredActivities));
                
                trackUserActivity('CLEAR_OLD_DATA', { 
                    removedCount: activities.length - filteredActivities.length 
                });
                
                alert(`âœ… ${activities.length - filteredActivities.length} data lama berhasil dihapus!`);
                loadSuperAdminData();
            }
        }
        
        function resetAllData() {
            const confirmText = prompt('âš ï¸ PERINGATAN: Ini akan menghapus SEMUA data!\n\nKetik "RESET SEMUA DATA" untuk konfirmasi:');
            
            if (confirmText === 'RESET SEMUA DATA') {
                // Keep only super admin credentials
                localStorage.clear();
                sessionStorage.clear();
                
                // Restore default admin
                localStorage.setItem('userCredentials', JSON.stringify({
                    username: "admin", 
                    password: "admin123"
                }));
                
                trackUserActivity('SYSTEM_RESET', { 
                    resetBy: currentUser,
                    timestamp: new Date().toISOString()
                });
                
                alert('âœ… Semua data berhasil direset!\n\nAnda akan logout otomatis.');
                
                setTimeout(() => {
                    logout();
                }, 2000);
            } else {
                alert('âŒ Reset dibatalkan. Teks konfirmasi tidak sesuai.');
            }
        }
        
        function clearActivityLogs() {
            if (confirm('âš ï¸ Hapus semua log aktivitas?\n\nTindakan ini tidak dapat dibatalkan!')) {
                localStorage.removeItem('userActivities');
                trackUserActivity('CLEAR_ACTIVITY_LOGS', { clearedBy: currentUser });
                alert('âœ… Log aktivitas berhasil dihapus!');
                loadActivitiesLog();
            }
        }

        // Close modal when clicking outside
        document.addEventListener('click', function(e) {
            if (e.target.id === 'projectModal') {
                closeModal();
            }
            if (e.target.id === 'accountModal') {
                closeAccountModal();
            }
            if (e.target.id === 'settingsModal') {
                closeSettingsModal();
            }
            if (e.target.id === 'printModal') {
                closePrintModal();
            }
            if (e.target.id === 'invoiceEditorModal') {
                closeInvoiceEditor();
            }
            if (e.target.id === 'superAdminModal') {
                closeSuperAdminDashboard();
            }
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'968b7a0014dffe87',t:'MTc1NDExNTcwMi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
